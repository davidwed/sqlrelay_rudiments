<html>
<head>
<title>/usr/local/src/rudiments-0.25/include/rudiments/permissions.h.html</title>
<meta name="Generator" content="Vim/6.1">
</head>
<body bgcolor="#ffffff" text="#000000">
<pre>
<font color="#0000f8">// Copyright (c) 1999-2002 David Muse</font>
<font color="#0000f8">// See the COPYING file for more information.</font>

<font color="#a020f0">#ifndef RUDIMENTS_PERMISSIONS_H</font>
<font color="#a020f0">#define RUDIMENTS_PERMISSIONS_H</font>

<font color="#a020f0">#include </font><font color="#f800f8">&lt;rudiments/private/config.h&gt;</font>

<font color="#a020f0">#include </font><font color="#f800f8">&lt;sys/types.h&gt;</font>

<font color="#0000f8">// Permissions are access priveleges.  Files, directories, semaphores and</font>
<font color="#0000f8">// shared memory segments all have permissions associated with them.</font>
<font color="#0000f8">//</font>
<font color="#0000f8">// There are 3 types of permissions: read, write and execute.</font>
<font color="#0000f8">//</font>
<font color="#0000f8">// These permissions can be granted to:</font>
<font color="#0000f8">//      1. The user that owns the object.</font>
<font color="#0000f8">//      2. Other users in the group of the user that owns the object.</font>
<font color="#0000f8">//      3. All other users.</font>
<font color="#0000f8">//</font>
<font color="#0000f8">// The execute permission has 2 modifications which can be applied to it:</font>
<font color="#0000f8">//      1. Set user id - the program will run as the user that owns</font>
<font color="#0000f8">//                      it instead of as the user that ran it</font>
<font color="#0000f8">//      1. Set group id - the program will run as the group that owns</font>
<font color="#0000f8">//                      it instead of as the group of the user that ran it</font>
<font color="#0000f8">//</font>
<font color="#0000f8">// The &quot;sticky bit&quot; may also be set.  When set, the file is saved in the</font>
<font color="#0000f8">// system's swap space. As a side-effect, it cannot be deleted by a user other</font>
<font color="#0000f8">// than the one that created it.</font>

<font color="#288850"><b>class</b></font> permissions {
        <font color="#a02828"><b>public</b></font>:
                <font color="#288850"><b>static</b></font>  <font color="#288850"><b>int</b></font>     setFilePermissions(<font color="#288850"><b>const</b></font> <font color="#288850"><b>char</b></font> *filename,
                                                        mode_t perms);
                                <font color="#0000f8">// set the permissions on &quot;filename&quot; to &quot;perms&quot;</font>
                <font color="#288850"><b>static</b></font>  <font color="#288850"><b>int</b></font>     setFilePermissions(<font color="#288850"><b>int</b></font> fd, mode_t perms);
                                <font color="#0000f8">// set the permissions on the file associated</font>
                                <font color="#0000f8">// with file descriptor &quot;fd&quot; to &quot;perms&quot;</font>

                <font color="#288850"><b>static</b></font>  mode_t  evalPermString(<font color="#288850"><b>const</b></font> <font color="#288850"><b>char</b></font> *permstring);
                                <font color="#0000f8">// Return a permission defined in &quot;permstring&quot;.</font>
                                <font color="#0000f8">//</font>
                                <font color="#0000f8">// &quot;permstring&quot; should be the same format as</font>
                                <font color="#0000f8">// displayed by the &quot;ls -l&quot; command.</font>
                                <font color="#0000f8">//</font>
                                <font color="#0000f8">// The first 3 characters set permissions for </font>
                                <font color="#0000f8">// the owner.</font>
                                <font color="#0000f8">// The next 3 characters set permissions for </font>
                                <font color="#0000f8">// the group.</font>
                                <font color="#0000f8">// The next 3 characters set permissions for </font>
                                <font color="#0000f8">// all others.</font>
                                <font color="#0000f8">//</font>
                                <font color="#0000f8">// For example:</font>
                                <font color="#0000f8">//      rwxr-xr-x : read/execute for everyone</font>
                                <font color="#0000f8">//                      and write for the owner</font>
                                <font color="#0000f8">//      rw-rw-r-- : read for everyone and</font>
                                <font color="#0000f8">//                      write for the owner and</font>
                                <font color="#0000f8">//                      owner's group</font>
                                <font color="#0000f8">//      rw-r--r-- : read for everyone and</font>
                                <font color="#0000f8">//                      write for the owner</font>
                                <font color="#0000f8">//      rwsr-sr-x : read/execute for everyone,</font>
                                <font color="#0000f8">//                      write for the owner and</font>
                                <font color="#0000f8">//                      run as the user/group</font>
                                <font color="#0000f8">//                      that owns the file</font>
                                <font color="#0000f8">//      rw-rw-rwt : read/write for everyone,</font>
                                <font color="#0000f8">//                      and save the file in</font>
                                <font color="#0000f8">//                      swap space</font>
                <font color="#288850"><b>static</b></font>  <font color="#288850"><b>char</b></font>    *evalPermOctal(mode_t mode);



                <font color="#0000f8">// The following methods can be or'ed together to define</font>
                <font color="#0000f8">// a permission.  For example:</font>
                <font color="#0000f8">//</font>
                <font color="#0000f8">// mode_t perm=(ownerReadWriteExecute() | </font>
                <font color="#0000f8">//                      groupReadExecute() | </font>
                <font color="#0000f8">//                      othersReadExecute())</font>
                <font color="#0000f8">// </font>
                <font color="#0000f8">// sets perm equal to rwxr-xr-x permissions </font>

                <font color="#288850"><b>static</b></font>  mode_t  everyoneReadWrite();
                                <font color="#0000f8">// returns rw-rw-rw- (666) permissions</font>
                <font color="#288850"><b>static</b></font>  mode_t  everyoneReadWriteExecute();
                                <font color="#0000f8">// returns rwxrwxrwx (777) permissions</font>
                <font color="#288850"><b>static</b></font>  mode_t  ownerRead();
                                <font color="#0000f8">// returns r-------- (400) permissions</font>
                <font color="#288850"><b>static</b></font>  mode_t  ownerWrite();
                                <font color="#0000f8">// returns -w------- (200) permissions</font>
                <font color="#288850"><b>static</b></font>  mode_t  ownerExecute();
                                <font color="#0000f8">// returns --x------ (100) permissions</font>
                <font color="#288850"><b>static</b></font>  mode_t  ownerReadWrite();
                                <font color="#0000f8">// returns rw------- (600) permissions</font>
                <font color="#288850"><b>static</b></font>  mode_t  ownerReadExecute();
                                <font color="#0000f8">// returns r-x------ (500) permissions</font>
                <font color="#288850"><b>static</b></font>  mode_t  ownerReadWriteExecute();
                                <font color="#0000f8">// returns rwx------ (700) permissions</font>
                <font color="#288850"><b>static</b></font>  mode_t  groupRead();
                                <font color="#0000f8">// returns ---r----- (040) permissions</font>
                <font color="#288850"><b>static</b></font>  mode_t  groupWrite();
                                <font color="#0000f8">// returns ----w---- (020) permissions</font>
                <font color="#288850"><b>static</b></font>  mode_t  groupExecute();
                                <font color="#0000f8">// returns -----x--- (010) permissions</font>
                <font color="#288850"><b>static</b></font>  mode_t  groupReadWrite();
                                <font color="#0000f8">// returns ---rw---- (060) permissions</font>
                <font color="#288850"><b>static</b></font>  mode_t  groupReadExecute();
                                <font color="#0000f8">// returns ---r-x--- (050) permissions</font>
                <font color="#288850"><b>static</b></font>  mode_t  groupReadWriteExecute();
                                <font color="#0000f8">// returns ---rwx--- (070) permissions</font>
                <font color="#288850"><b>static</b></font>  mode_t  othersRead();
                                <font color="#0000f8">// returns ------r-- (004) permissions</font>
                <font color="#288850"><b>static</b></font>  mode_t  othersWrite();
                                <font color="#0000f8">// returns -------w- (002) permissions</font>
                <font color="#288850"><b>static</b></font>  mode_t  othersExecute();
                                <font color="#0000f8">// returns --------x (001) permissions</font>
                <font color="#288850"><b>static</b></font>  mode_t  othersReadWrite();
                                <font color="#0000f8">// returns ------rw- (006) permissions</font>
                <font color="#288850"><b>static</b></font>  mode_t  othersReadExecute();
                                <font color="#0000f8">// returns ------r-x (005) permissions</font>
                <font color="#288850"><b>static</b></font>  mode_t  othersReadWriteExecute();
                                <font color="#0000f8">// returns ------rwx (007) permissions</font>
                <font color="#288850"><b>static</b></font>  mode_t  saveInSwapSpace();
                                <font color="#0000f8">// returns --------t permissions</font>
                <font color="#288850"><b>static</b></font>  mode_t  setUserId();
                                <font color="#0000f8">// returns --s------ (u+s) permissions</font>
                <font color="#288850"><b>static</b></font>  mode_t  setGroupId();
                                <font color="#0000f8">// returns -----s--- (g+s) permissions</font>
};

<font color="#a020f0">#ifdef ENABLE_INLINES</font>
<font color="#a020f0">        #include </font><font color="#f800f8">&lt;rudiments/private/permissionsinlines.h&gt;</font>
<font color="#a020f0">#endif</font>

<font color="#a020f0">#endif</font>
</pre>
</body>
</html>
