<html>
<head>
<title>~/src/firstworks/rudiments-0.26/include/rudiments/filedescriptor.h.html</title>
<meta name="Generator" content="Vim/6.2">
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
</head>
<body bgcolor="#ffffff" text="#000000">
<pre>
<font color="#0000ff">// Copyright (c) 2002 David Muse</font>
<font color="#0000ff">// See the COPYING file for more information.</font>

<font color="#a020f0">#ifndef RUDIMENTS_FILEDESCRIPTOR_H</font>
<font color="#a020f0">#define RUDIMENTS_FILEDESCRIPTOR_H</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/private/filedescriptorincludes.h&gt;</font>

<font color="#0000ff">// The filedescriptor class is a base class for other classes that utilize</font>
<font color="#0000ff">// file descriptors.</font>

<font color="#2e8b57"><b>class</b></font> filedescriptor {
        <font color="#a52a2a"><b>public</b></font>:
                        filedescriptor();
                                <font color="#0000ff">// Creates an uninitialized filedescriptor.</font>
                        filedescriptor(<font color="#2e8b57"><b>int</b></font> fd);
                                <font color="#0000ff">// Creates a filedescriptor and associates the</font>
                                <font color="#0000ff">// already open file descriptor &quot;fd&quot; with it.</font>
                <font color="#2e8b57"><b>virtual</b></font> ~filedescriptor();
                                <font color="#0000ff">// Calls close() if it hasn't already been</font>
                                <font color="#0000ff">// called.</font>


                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>int</b></font>     close();
                                <font color="#0000ff">// Closes the file descriptor.</font>
                                <font color="#0000ff">// Returns 1 on success and 0 on failure.</font>

                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>int</b></font>     getFileDescriptor() <font color="#2e8b57"><b>const</b></font>;
                                <font color="#0000ff">// Returns the file descriptor.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>void</b></font>    setFileDescriptor(<font color="#2e8b57"><b>int</b></font> fd);
                                <font color="#0000ff">// Sets the file descriptor associated with</font>
                                <font color="#0000ff">// the class to &quot;fd&quot;.</font>


                <font color="#0000ff">// Write methods - write data to the file descriptor.</font>
                <font color="#0000ff">// These methods return the number of bytes that were</font>
                <font color="#0000ff">// successfully written.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> write(<font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>short</b></font> number);
                                <font color="#0000ff">// Write &quot;number&quot; to the file descriptor.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> write(<font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>long</b></font> number);
                                <font color="#0000ff">// Write &quot;number&quot; to the file descriptor.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> write(<font color="#2e8b57"><b>short</b></font> number);
                                <font color="#0000ff">// Write &quot;number&quot; to the file descriptor.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> write(<font color="#2e8b57"><b>long</b></font> number);
                                <font color="#0000ff">// Write &quot;number&quot; to the file descriptor.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> write(<font color="#2e8b57"><b>float</b></font> number);
                                <font color="#0000ff">// Write &quot;number&quot; to the file descriptor.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> write(<font color="#2e8b57"><b>double</b></font> number);
                                <font color="#0000ff">// Write &quot;number&quot; to the file descriptor.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> write(<font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>char</b></font> character);
                                <font color="#0000ff">// Write &quot;character&quot; to the file descriptor.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> write(<font color="#2e8b57"><b>char</b></font> character);
                                <font color="#0000ff">// Write &quot;character&quot; to the file descriptor.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> write(<font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>char</b></font> *string);
                                <font color="#0000ff">// Write &quot;string&quot; to the file descriptor.  Note</font>
                                <font color="#0000ff">// that &quot;string&quot; must be NULL-terminated.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> write(<font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> *string);
                                <font color="#0000ff">// Write &quot;string&quot; to the file descriptor.  Note</font>
                                <font color="#0000ff">// that &quot;string&quot; must be NULL-terminated.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> write(<font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>char</b></font> *string, <font color="#2e8b57"><b>size_t</b></font> size);
                                <font color="#0000ff">// Write &quot;size&quot; bytes from &quot;string&quot; to the file</font>
                                <font color="#0000ff">// descriptor.  Note that it is possible to</font>
                                <font color="#0000ff">// write beyond the string's NULL terminator</font>
                                <font color="#0000ff">// using this method.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> write(<font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> *string, <font color="#2e8b57"><b>size_t</b></font> size);
                                <font color="#0000ff">// Write &quot;size&quot; bytes from &quot;string&quot; to the file</font>
                                <font color="#0000ff">// descriptor.  Note that it is possible to</font>
                                <font color="#0000ff">// write beyond the string's NULL terminator</font>
                                <font color="#0000ff">// using this method.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> write(<font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>void</b></font> *buffer, <font color="#2e8b57"><b>size_t</b></font> size);
                                <font color="#0000ff">// Write &quot;size&quot; bytes from &quot;buffer&quot; to the file</font>
                                <font color="#0000ff">// descriptor.</font>


                <font color="#0000ff">// Write methods - write data to the file descriptor with a</font>
                <font color="#0000ff">// timeout of &quot;sec&quot; seconds and &quot;usec&quot; microseconds.</font>
                <font color="#0000ff">// These methods return the number of bytes that were</font>
                <font color="#0000ff">// successfully written or -1 if a timeout occurred.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> write(<font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>short</b></font> number,
                                                        <font color="#2e8b57"><b>long</b></font> sec, <font color="#2e8b57"><b>long</b></font> usec);
                                <font color="#0000ff">// Write &quot;number&quot; to the file descriptor.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> write(<font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>long</b></font> number,
                                                        <font color="#2e8b57"><b>long</b></font> sec, <font color="#2e8b57"><b>long</b></font> usec);
                                <font color="#0000ff">// Write &quot;number&quot; to the file descriptor.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> write(<font color="#2e8b57"><b>short</b></font> number, <font color="#2e8b57"><b>long</b></font> sec, <font color="#2e8b57"><b>long</b></font> usec);
                                <font color="#0000ff">// Write &quot;number&quot; to the file descriptor.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> write(<font color="#2e8b57"><b>long</b></font> number, <font color="#2e8b57"><b>long</b></font> sec, <font color="#2e8b57"><b>long</b></font> usec);
                                <font color="#0000ff">// Write &quot;number&quot; to the file descriptor.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> write(<font color="#2e8b57"><b>float</b></font> number, <font color="#2e8b57"><b>long</b></font> sec, <font color="#2e8b57"><b>long</b></font> usec);
                                <font color="#0000ff">// Write &quot;number&quot; to the file descriptor.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> write(<font color="#2e8b57"><b>double</b></font> number, <font color="#2e8b57"><b>long</b></font> sec, <font color="#2e8b57"><b>long</b></font> usec);
                                <font color="#0000ff">// Write &quot;number&quot; to the file descriptor.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> write(<font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>char</b></font> character,
                                                        <font color="#2e8b57"><b>long</b></font> sec, <font color="#2e8b57"><b>long</b></font> usec);
                                <font color="#0000ff">// Write &quot;character&quot; to the file descriptor.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> write(<font color="#2e8b57"><b>char</b></font> character, <font color="#2e8b57"><b>long</b></font> sec, <font color="#2e8b57"><b>long</b></font> usec);
                                <font color="#0000ff">// Write &quot;character&quot; to the file descriptor.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> write(<font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>char</b></font> *string,
                                                        <font color="#2e8b57"><b>long</b></font> sec, <font color="#2e8b57"><b>long</b></font> usec);
                                <font color="#0000ff">// Write &quot;string&quot; to the file descriptor.  Note</font>
                                <font color="#0000ff">// that &quot;string&quot; must be NULL-terminated.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> write(<font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> *string, <font color="#2e8b57"><b>long</b></font> sec, <font color="#2e8b57"><b>long</b></font> usec);
                                <font color="#0000ff">// Write &quot;string&quot; to the file descriptor.  Note</font>
                                <font color="#0000ff">// that &quot;string&quot; must be NULL-terminated.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> write(<font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>char</b></font> *string,
                                        <font color="#2e8b57"><b>size_t</b></font> size, <font color="#2e8b57"><b>long</b></font> sec, <font color="#2e8b57"><b>long</b></font> usec);
                                <font color="#0000ff">// Write &quot;size&quot; bytes from &quot;string&quot; to the file</font>
                                <font color="#0000ff">// descriptor.  Note that it is possible to</font>
                                <font color="#0000ff">// write beyond the string's NULL terminator</font>
                                <font color="#0000ff">// using this method.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> write(<font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> *string,
                                        <font color="#2e8b57"><b>size_t</b></font> size, <font color="#2e8b57"><b>long</b></font> sec, <font color="#2e8b57"><b>long</b></font> usec);
                                <font color="#0000ff">// Write &quot;size&quot; bytes from &quot;string&quot; to the file</font>
                                <font color="#0000ff">// descriptor.  Note that it is possible to</font>
                                <font color="#0000ff">// write beyond the string's NULL terminator</font>
                                <font color="#0000ff">// using this method.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> write(<font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>void</b></font> *buffer,
                                        <font color="#2e8b57"><b>size_t</b></font> size, <font color="#2e8b57"><b>long</b></font> sec, <font color="#2e8b57"><b>long</b></font> usec);
                                <font color="#0000ff">// Write &quot;size&quot; bytes from &quot;buffer&quot; to the file</font>
                                <font color="#0000ff">// descriptor.</font>


                <font color="#0000ff">// Read methods - read data from the file descriptor.</font>
                <font color="#0000ff">// These methods return the number of bytes that were</font>
                <font color="#0000ff">// successfully read.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> read(<font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>short</b></font> *buffer);
                                <font color="#0000ff">// Reads sizeof(unsigned short) bytes</font>
                                <font color="#0000ff">// from the file descriptor into &quot;buffer&quot;.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> read(<font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>long</b></font> *buffer);
                                <font color="#0000ff">// Reads sizeof(unsigned long) bytes</font>
                                <font color="#0000ff">// from the file descriptor into &quot;buffer&quot;.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> read(<font color="#2e8b57"><b>short</b></font> *buffer);
                                <font color="#0000ff">// Reads sizeof(short) bytes</font>
                                <font color="#0000ff">// from the file descriptor into &quot;buffer&quot;.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> read(<font color="#2e8b57"><b>long</b></font> *buffer);
                                <font color="#0000ff">// Reads sizeof(long) bytes</font>
                                <font color="#0000ff">// from the file descriptor into &quot;buffer&quot;.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> read(<font color="#2e8b57"><b>float</b></font> *buffer);
                                <font color="#0000ff">// Reads sizeof(float) bytes from the file</font>
                                <font color="#0000ff">// descriptor into &quot;buffer&quot;.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> read(<font color="#2e8b57"><b>double</b></font> *buffer);
                                <font color="#0000ff">// Reads sizeof(double) bytes from the file</font>
                                <font color="#0000ff">// descriptor into &quot;buffer&quot;.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> read(<font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>char</b></font> *buffer);
                                <font color="#0000ff">// Reads sizeof(unsigned char) bytes</font>
                                <font color="#0000ff">// from the file descriptor into &quot;buffer&quot;.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> read(<font color="#2e8b57"><b>char</b></font> *buffer);
                                <font color="#0000ff">// Reads sizeof(char) bytes from the file</font>
                                <font color="#0000ff">// descriptor into &quot;buffer&quot;.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> read(<font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>char</b></font> *buffer, <font color="#2e8b57"><b>size_t</b></font> size);
                                <font color="#0000ff">// Reads &quot;size&quot; bytes from the file descriptor</font>
                                <font color="#0000ff">// into &quot;buffer&quot;.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> read(<font color="#2e8b57"><b>char</b></font> *buffer, <font color="#2e8b57"><b>size_t</b></font> size);
                                <font color="#0000ff">// Reads &quot;size&quot; bytes from the file descriptor</font>
                                <font color="#0000ff">// into &quot;buffer&quot;.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> read(<font color="#2e8b57"><b>void</b></font> *buf, <font color="#2e8b57"><b>size_t</b></font> size);
                                <font color="#0000ff">// Reads &quot;size&quot; bytes from the file descriptor</font>
                                <font color="#0000ff">// into &quot;buffer&quot;.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> read(<font color="#2e8b57"><b>char</b></font> **buffer, <font color="#2e8b57"><b>char</b></font> *terminator);
                                <font color="#0000ff">// Reads from the file desciptor into &quot;buffer&quot;</font>
                                <font color="#0000ff">// until &quot;terminator&quot; is encountered.  Note</font>
                                <font color="#0000ff">// that &quot;buffer&quot; is allocated internally and</font>
                                <font color="#0000ff">// must be freed by the calling program.</font>


                <font color="#0000ff">// Read methods - read data from the file descriptor with a</font>
                <font color="#0000ff">// timeout of &quot;sec&quot; seconds and &quot;usec&quot; microseconds.</font>
                <font color="#0000ff">// These methods return the number of bytes that were</font>
                <font color="#0000ff">// successfully read or -1 if a timeout occurred.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> read(<font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>short</b></font> *buffer,
                                                        <font color="#2e8b57"><b>long</b></font> sec, <font color="#2e8b57"><b>long</b></font> usec);
                                <font color="#0000ff">// Reads sizeof(unsigned short) bytes</font>
                                <font color="#0000ff">// from the file descriptor into &quot;buffer&quot;.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> read(<font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>long</b></font> *buffer,
                                                        <font color="#2e8b57"><b>long</b></font> sec, <font color="#2e8b57"><b>long</b></font> usec);
                                <font color="#0000ff">// Reads sizeof(unsigned long) bytes</font>
                                <font color="#0000ff">// from the file descriptor into &quot;buffer&quot;.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> read(<font color="#2e8b57"><b>short</b></font> *buffer, <font color="#2e8b57"><b>long</b></font> sec, <font color="#2e8b57"><b>long</b></font> usec);
                                <font color="#0000ff">// Reads sizeof(short) bytes</font>
                                <font color="#0000ff">// from the file descriptor into &quot;buffer&quot;.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> read(<font color="#2e8b57"><b>long</b></font> *buffer, <font color="#2e8b57"><b>long</b></font> sec, <font color="#2e8b57"><b>long</b></font> usec);
                                <font color="#0000ff">// Reads sizeof(long) bytes</font>
                                <font color="#0000ff">// from the file descriptor into &quot;buffer&quot;.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> read(<font color="#2e8b57"><b>float</b></font> *buffer, <font color="#2e8b57"><b>long</b></font> sec, <font color="#2e8b57"><b>long</b></font> usec);
                                <font color="#0000ff">// Reads sizeof(float) bytes from the file</font>
                                <font color="#0000ff">// descriptor into &quot;buffer&quot;.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> read(<font color="#2e8b57"><b>double</b></font> *buffer, <font color="#2e8b57"><b>long</b></font> sec, <font color="#2e8b57"><b>long</b></font> usec);
                                <font color="#0000ff">// Reads sizeof(double) bytes from the file</font>
                                <font color="#0000ff">// descriptor into &quot;buffer&quot;.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> read(<font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>char</b></font> *buffer,
                                                        <font color="#2e8b57"><b>long</b></font> sec, <font color="#2e8b57"><b>long</b></font> usec);
                                <font color="#0000ff">// Reads sizeof(unsigned char) bytes</font>
                                <font color="#0000ff">// from the file descriptor into &quot;buffer&quot;.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> read(<font color="#2e8b57"><b>char</b></font> *buffer, <font color="#2e8b57"><b>long</b></font> sec, <font color="#2e8b57"><b>long</b></font> usec);
                                <font color="#0000ff">// Reads sizeof(char) bytes from the file</font>
                                <font color="#0000ff">// descriptor into &quot;buffer&quot;.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> read(<font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>char</b></font> *buffer,
                                        <font color="#2e8b57"><b>size_t</b></font> size, <font color="#2e8b57"><b>long</b></font> sec, <font color="#2e8b57"><b>long</b></font> usec);
                                <font color="#0000ff">// Reads &quot;size&quot; bytes from the file descriptor</font>
                                <font color="#0000ff">// into &quot;buffer&quot;.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> read(<font color="#2e8b57"><b>char</b></font> *buffer,
                                        <font color="#2e8b57"><b>size_t</b></font> size, <font color="#2e8b57"><b>long</b></font> sec, <font color="#2e8b57"><b>long</b></font> usec);
                                <font color="#0000ff">// Reads &quot;size&quot; bytes from the file descriptor</font>
                                <font color="#0000ff">// into &quot;buffer&quot;.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> read(<font color="#2e8b57"><b>void</b></font> *buf,
                                        <font color="#2e8b57"><b>size_t</b></font> size, <font color="#2e8b57"><b>long</b></font> sec, <font color="#2e8b57"><b>long</b></font> usec);
                                <font color="#0000ff">// Reads &quot;size&quot; bytes from the file descriptor</font>
                                <font color="#0000ff">// into &quot;buffer&quot;.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>ssize_t</b></font> read(<font color="#2e8b57"><b>char</b></font> **buffer, <font color="#2e8b57"><b>char</b></font> *terminator,
                                                        <font color="#2e8b57"><b>long</b></font> sec, <font color="#2e8b57"><b>long</b></font> usec);
                                <font color="#0000ff">// Reads from the file desciptor into &quot;buffer&quot;</font>
                                <font color="#0000ff">// until &quot;terminator&quot; is encountered.  Note</font>
                                <font color="#0000ff">// that &quot;buffer&quot; is allocated internally and</font>
                                <font color="#0000ff">// must be freed by the calling program.</font>


                <font color="#0000ff">// Wait methods.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>int</b></font>     waitForNonBlockingRead(<font color="#2e8b57"><b>long</b></font> sec, <font color="#2e8b57"><b>long</b></font> usec);
                                <font color="#0000ff">// Causes the application to wait until a read()</font>
                                <font color="#0000ff">// will proceed without blocking or until &quot;sec&quot;</font>
                                <font color="#0000ff">// seconds and &quot;usec&quot; microseconds have elapsed.</font>
                                <font color="#0000ff">// Returns -1 on error, 0 on timeout and 1</font>
                                <font color="#0000ff">// otherwise.</font>
                <font color="#2e8b57"><b>virtual</b></font> <font color="#2e8b57"><b>int</b></font>     waitForNonBlockingWrite(<font color="#2e8b57"><b>long</b></font> sec, <font color="#2e8b57"><b>long</b></font> usec);
                                <font color="#0000ff">// Causes the application to wait until a</font>
                                <font color="#0000ff">// write() will proceed without blocking or</font>
                                <font color="#0000ff">// until &quot;sec&quot; seconds and &quot;usec&quot; microseconds</font>
                                <font color="#0000ff">// have elapsed.</font>
                                <font color="#0000ff">// Returns -1 on error, 0 on timeout and 1</font>
                                <font color="#0000ff">// otherwise.</font>


                <font color="#0000ff">// By default, if a read or write is occurring and a signal</font>
                <font color="#0000ff">// interrupts it, the read or write returns with errno set to</font>
                <font color="#0000ff">// EINTR and must be retried.  These methods override that</font>
                <font color="#0000ff">// behavior.</font>
                <font color="#2e8b57"><b>void</b></font>    retryInterruptedReads();
                        <font color="#0000ff">// Causes reads to automatically retry if interrupted</font>
                        <font color="#0000ff">// by a signal.</font>
                <font color="#2e8b57"><b>void</b></font>    dontRetryInterruptedReads();
                        <font color="#0000ff">// Causes reads not to automatically retry if</font>
                        <font color="#0000ff">// interrupted by a signal.  This is the default.</font>
                <font color="#2e8b57"><b>void</b></font>    retryInterruptedWrites();
                        <font color="#0000ff">// Causes writes to automatically retry if</font>
                        <font color="#0000ff">// interrupted by a signal.  This is the default.</font>
                <font color="#2e8b57"><b>void</b></font>    dontRetryInterruptedWrites();
                        <font color="#0000ff">// Causes writes not to automatically retry if</font>
                        <font color="#0000ff">// interrupted by a signal.  This is the default.</font>
                <font color="#2e8b57"><b>void</b></font>    retryInterruptedWaits();
                        <font color="#0000ff">// Causes waits to automatically retry if</font>
                        <font color="#0000ff">// interrupted by a signal.  This is the default.</font>
                <font color="#2e8b57"><b>void</b></font>    dontRetryInterruptedWaits();
                        <font color="#0000ff">// Causes waits not to automatically retry if</font>
                        <font color="#0000ff">// interrupted by a signal.  This is the default.</font>


                <font color="#0000ff">// By default, read() will attempt to read the specified number</font>
                <font color="#0000ff">// of bytes from the file descriptor, in several passes if</font>
                <font color="#0000ff">// necessary.  No single pass will try to read more than</font>
                <font color="#0000ff">// SSIZE_MAX bytes.  These methods override that behavior.</font>
                <font color="#2e8b57"><b>void</b></font>    allowShortReads();
                        <font color="#0000ff">// Causes a read to return the number of bytes that</font>
                        <font color="#0000ff">// were read in a single pass from the file descriptor.</font>
                        <font color="#0000ff">// Note that reads longer than SSIZE_MAX will always</font>
                        <font color="#0000ff">// return SSIZE_MAX or fewer bytes.  This is useful,</font>
                        <font color="#0000ff">// for example, when reading from devices which block</font>
                        <font color="#0000ff">// rather than returning 0 for EOF.</font>
                <font color="#2e8b57"><b>void</b></font>    dontAllowShortReads();
                        <font color="#0000ff">// Causes a read to attempt to read the specified</font>
                        <font color="#0000ff">// number of bytes from the file descriptor, in several</font>
                        <font color="#0000ff">// passes if necessary.</font>


                <font color="#0000ff">// By default, calls to waitForNonBlockingRead() and</font>
                <font color="#0000ff">// waitForNonBlockingWrite() will wait using the select()</font>
                <font color="#0000ff">// system call.  These methods override that behavior.</font>
                <font color="#2e8b57"><b>void</b></font>    useListener(listener *lstnr);
                        <font color="#0000ff">// Causes calls to waitForNonBlockingRead() and</font>
                        <font color="#0000ff">// waitForNonBlockingWrite() to in turn call</font>
                        <font color="#0000ff">// lstnr-&gt;waitForNonBlockingRead() or</font>
                        <font color="#0000ff">// lstnr-&gt;waitForNonBlockingWrite().</font>
                <font color="#2e8b57"><b>void</b></font>    dontUseListener();
                        <font color="#0000ff">// Causes calls to waitForNonBlockingRead() and</font>
                        <font color="#0000ff">// waitForNonBlockingWrite() to use select().</font>
                        <font color="#0000ff">// This is the default.</font>

<font color="#a020f0">        #include </font><font color="#ff00ff">&lt;rudiments/private/filedescriptor.h&gt;</font>
};

<font color="#a020f0">#ifdef ENABLE_RUDIMENTS_INLINES</font>
<font color="#a020f0">        #include </font><font color="#ff00ff">&lt;rudiments/private/filedescriptorinlines.h&gt;</font>
<font color="#a020f0">#endif</font>

<font color="#a020f0">#endif</font>
</pre>
</body>
</html>
