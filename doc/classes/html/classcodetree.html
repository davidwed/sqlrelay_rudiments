<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Rudiments: codetree Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Rudiments</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">codetree Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="codetree" -->
<p><a href="classcodetree-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcodetree.html#a7f2c7af6c092cabdbfb513fc10f3f9b4">codetree</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcodetree.html#a7c772b1a8603ec6d6cae0e6781123459">~codetree</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcodetree.html#aae17e01d874f6e68de415492d743340f">parse</a> (const char *input, const char *grammar, const char *starttoken, rudiments::xmldomnode *output, const char **codeposition)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcodetree.html#af268c5670995d55cc5484c0f764d7cb5">write</a> (rudiments::xmldomnode *input, const char *grammar, rudiments::stringbuffer *output)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcodetree.html#a7002d26f36e0b3fa462a3a5ebad4c43f">setDebugLevel</a> (uint8_t debuglevel)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>The codetree class implements a generic parser that can parse source code (or similarly structured input) and create an XML tree representing the code. The class can also take that XML tree and write it back out as code.</p>
<p>A grammar must be specified to parse the input and write it back out. This grammar must be in a specific XML format, based on the EBNF format with a few extensions.</p>
<p>The top-level tag is &lt;grammar&gt;. Inside the grammar tag are sets of &lt;definition&gt; tags, each defining a nonterminal. Each &lt;definition&gt; tag must contain sets of &lt;terminal&gt;, &lt;nonterminal&gt;, &lt;alternation&gt;, &lt;repetition&gt;, &lt;concatenation&gt;, &lt;option&gt; and  tags. All tags except &lt;terminal&gt; and &lt;nonterminal&gt; must contain combinations of other tags.</p>
<p>The &lt;definition&gt; tag defines a nonterminal and has the following attributes:</p>
<p>name - Required. The name of the nonterminal. This will also be the tag name used to represent the nonterminal in the XML representation of the code.</p>
<p>start - Optional. A string to be printed before the nonterminal when writing it back out.</p>
<p>end - Optional. A string to be printed after the nonterminal when writing it back out.</p>
<p>token - Optional. If supplied, it indicates that the nonterminal is a "token". A tag will represent it in the XML representation of the code and special formatting will be used when writing the XML back out as code. There are 4 possible values: block, line, inline and literal.</p>
<p>When written back out, code inside of a block token is indented. In the XML representing the code, the tag representing a block token may contain tags for other tokens. A good example of a block token in C++ is a code block, surrounded by a pair of curly braces.</p>
<p>When written back out, a carriage return is appended to line tokens. In the XML representing the code, the tag representing a block token may contain tags for other tokens. A good example of a line token in C++ is a statement, terminated by a semicolon.</p>
<p>When written back out, an inline token is simply printed inline without any additional indentation or carriage returns. In the XML representing the code, the tag representing an inline token may contain tags for other tokens. A good example of an inline token in C++ (or any programming language) is an arithmetic expression which may contain many terms and operators.</p>
<p>Literal tokens are also printed inline, however in the XML representing the code, the tag representing a literal token does not contain any additional tokens but rather has a "value" attribute, the value of which is composed of the concatenation of all terminals that were ultimately encountered while parsing the section of the code described by the nonterminal. Good examples of literal tokens in C++ (or any programming language) are integers, floating point numbers and strings.</p>
<p>If omitted, the nonterminal is not a token and no tag will appear for it in the XML representing the code, but the nonterminal may be used to build up other literal tokens. Literal tokens must (ultimately) be composed of terminals, other literal tokens or nonterminals with no token type.</p>
<p>Examples:</p>
<p>&lt;definition name="code_block" token="block" start="{" end="}"&gt; ... other tags ... &lt;/definition&gt;</p>
<p>&lt;definition name="statement" token="line" end=";"&gt; ... other tags ... &lt;/definition&gt;</p>
<p>&lt;definition name="expression" token="inline"&gt; ... other tags ... &lt;/definition&gt;</p>
<p>&lt;definition name="integer" token="literal"&gt; ... other tags ... &lt;/definition&gt;</p>
<p>The &lt;terminal&gt; tag refers to a terminal and has the following attributes:</p>
<p>value - The text of the terminal. Ascii characters or XML entities can be used.</p>
<p>case - Whether the terminal is case-sensitive or not. Acceptable values are true or false.</p>
<p>Examples:</p>
<p>&lt;terminal value="1"&gt; &lt;terminal value="A"&gt; &lt;terminal value="&amp;#224;"&gt; &lt;terminal value="||"&gt; &lt;terminal value="&amp;&amp;"&gt; &lt;terminal value="class" case="false"&gt;</p>
<p>The &lt;nonterminal&gt; tag refers to a nonterminal defined elsewhere in the grammar and has the following attributes:</p>
<p>name - The name of the nonterminal.</p>
<p>Examples:</p>
<p>&lt;nonterminal name="code_block"&gt; &lt;nonterminal name="statement"&gt; &lt;nonterminal name="expression"&gt; &lt;nonterminal name="integer"&gt;</p>
<p>The &lt;alternation&gt; tag indicates to the parser that one of the enclosed tags must evaluate successfully for parsing to continue.</p>
<p>The &lt;repetition&gt; tag indicates to the parser that the enclosed tag may be evaluated zero or more times and that parsing should loop until it parses unsuccessfully.</p>
<p>The &lt;concatenation&gt; tag indicates to the parser that all of the enclosed tags must evaluate succussfully, in the specified order, when parsing the code for parsing to continue.</p>
<p>The &lt;option&gt; tag indicates to the parser that the enclosed tag may or may not evaluate succussfully and parsing should continue in either case.</p>
<p>The  tag defines an exception to the previous tag.</p>
<p>These tags may be used together to define nonterminals and ultimately a set of nonterminals may be used to define a grammar.</p>
<p>&lt;grammar&gt;</p>
<p>&lt;definition name="digit"&gt; &lt;alternation&gt; &lt;terminal value="0"&gt; &lt;terminal value="1"&gt; &lt;terminal value="2"&gt; &lt;terminal value="3"&gt; &lt;terminal value="4"&gt; &lt;terminal value="5"&gt; &lt;terminal value="6"&gt; &lt;terminal value="7"&gt; &lt;terminal value="8"&gt; &lt;terminal value="9"&gt; &lt;/alternation&gt; &lt;/definition&gt;</p>
<p>&lt;definition name="digit_excluding_zero"&gt; &lt;nonterminal name="digit"&gt;  &lt;terminal value="0"&gt; </p>
<p>&lt;/definition&gt;</p>
<p>&lt;definition name="integer" token="literal"&gt; &lt;alternation&gt; &lt;terminal value="0"&gt; &lt;concatenation&gt; &lt;option&gt; &lt;terminal value="-"&gt; &lt;/option&gt; &lt;concatenation&gt; &lt;nonterminal name="digit_excluding_zero"&gt; &lt;repetition&gt; &lt;nonterminal name="digit"&gt; &lt;/repetition&gt; &lt;/concatenation&gt; &lt;/concatenation&gt; &lt;/alternation&gt; &lt;/definition&gt;</p>
<p>&lt;/grammar&gt; </p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a7f2c7af6c092cabdbfb513fc10f3f9b4"></a><!-- doxytag: member="codetree::codetree" ref="a7f2c7af6c092cabdbfb513fc10f3f9b4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">codetree::codetree </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Creates a new instance of the codetree class. </p>

</div>
</div>
<a class="anchor" id="a7c772b1a8603ec6d6cae0e6781123459"></a><!-- doxytag: member="codetree::~codetree" ref="a7c772b1a8603ec6d6cae0e6781123459" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">codetree::~codetree </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Deletes this instance of the codetree class. </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="aae17e01d874f6e68de415492d743340f"></a><!-- doxytag: member="codetree::parse" ref="aae17e01d874f6e68de415492d743340f" args="(const char *input, const char *grammar, const char *starttoken, rudiments::xmldomnode *output, const char **codeposition)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool codetree::parse </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>grammar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>starttoken</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">rudiments::xmldomnode *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>codeposition</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Parses "input" using "grammar", starting with "starttoken", creates an XML represenataion of the code and appends it as children to "output". Returns true if parsing succeeded and false otherwise. If parsing fails, "codeposition" is set to the location in the code that parsing failed. </p>

</div>
</div>
<a class="anchor" id="a7002d26f36e0b3fa462a3a5ebad4c43f"></a><!-- doxytag: member="codetree::setDebugLevel" ref="a7002d26f36e0b3fa462a3a5ebad4c43f" args="(uint8_t debuglevel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void codetree::setDebugLevel </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>debuglevel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the debug level. Debug is written to standard out. </p>

</div>
</div>
<a class="anchor" id="af268c5670995d55cc5484c0f764d7cb5"></a><!-- doxytag: member="codetree::write" ref="af268c5670995d55cc5484c0f764d7cb5" args="(rudiments::xmldomnode *input, const char *grammar, rudiments::stringbuffer *output)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool codetree::write </td>
          <td>(</td>
          <td class="paramtype">rudiments::xmldomnode *&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>grammar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">rudiments::stringbuffer *&#160;</td>
          <td class="paramname"><em>output</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Interprets the XML representation of the code "input" using "grammar" and appends it as code to "output". Returns true if this succeeds and false otherwise. </p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Jan 22 2013 for Rudiments by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
