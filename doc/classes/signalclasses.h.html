<html>
<head>
<title>/usr/local/src/rudiments-0.25/include/rudiments/signalclasses.h.html</title>
<meta name="Generator" content="Vim/6.1">
</head>
<body bgcolor="#ffffff" text="#000000">
<pre>
<font color="#0000f8">// Copyright (c) 1999-2002 David Muse</font>
<font color="#0000f8">// See the COPYING file for more information.</font>

<font color="#a020f0">#ifndef RUDIMENTS_SIGNALCLASSES_H</font>
<font color="#a020f0">#define RUDIMENTS_SIGNALCLASSES_H</font>

<font color="#a020f0">#include </font><font color="#f800f8">&lt;rudiments/private/config.h&gt;</font>

<font color="#a020f0">#include </font><font color="#f800f8">&lt;signal.h&gt;</font>
<font color="#a020f0">#include </font><font color="#f800f8">&lt;sys/types.h&gt;</font>

<font color="#0000f8">// Signals are a means for processes to interrupt each other.</font>
<font color="#0000f8">//</font>
<font color="#0000f8">// Many signals will cause a process to exit unless they are explicitly</font>
<font color="#0000f8">// handled by a callback function.</font>
<font color="#0000f8">//</font>
<font color="#0000f8">// Different architectures have different signals, but most have the following</font>
<font color="#0000f8">// signals:</font>



<font color="#0000f8">// A signalset it just a collection of signals.  Many signal-related functions</font>
<font color="#0000f8">// take signalsets for arguments.  The signalset class makes signalsets</font>
<font color="#0000f8">// easy to manage.</font>
<font color="#288850"><b>class</b></font> signalset {
        <font color="#a02828"><b>public</b></font>:
                <font color="#288850"><b>int</b></font>     addSignal(<font color="#288850"><b>int</b></font> signum);
                        <font color="#0000f8">// add the signal &quot;signum&quot; to the set</font>
                <font color="#288850"><b>int</b></font>     addAllSignals();
                        <font color="#0000f8">// add all signals to the set</font>
                <font color="#288850"><b>int</b></font>     removeSignal(<font color="#288850"><b>int</b></font> signum);
                        <font color="#0000f8">// remove the signal &quot;signum&quot; from the set</font>
                <font color="#288850"><b>int</b></font>     removeAllSignals();
                        <font color="#0000f8">// remove all signals from the set</font>
                <font color="#288850"><b>int</b></font>     signalIsInSet(<font color="#288850"><b>int</b></font> signum) <font color="#288850"><b>const</b></font>;
                        <font color="#0000f8">// returns 1 if the signal &quot;signum&quot; is in the </font>
                        <font color="#0000f8">// set and 0 if it is not</font>

                sigset_t        *getSignalSet();
                                <font color="#0000f8">// returns the set of signals</font>

<font color="#a020f0">        #include </font><font color="#f800f8">&lt;rudiments/private/signalset.h&gt;</font>
};



<font color="#0000f8">// The signalmanager class provides methods for sending, blocking and waiting </font>
<font color="#0000f8">// for signals.</font>
<font color="#288850"><b>class</b></font> signalmanager {
        <font color="#a02828"><b>public</b></font>:
                <font color="#288850"><b>static</b></font>  <font color="#288850"><b>int</b></font>     sendSignal(pid_t processid, <font color="#288850"><b>int</b></font> signum);
                                <font color="#0000f8">// send singal &quot;signum&quot; to process &quot;processid&quot;</font>
                <font color="#288850"><b>static</b></font>  <font color="#288850"><b>int</b></font>     raiseSignal(<font color="#288850"><b>int</b></font> signum);
                                <font color="#0000f8">// send singal &quot;signum&quot; to self</font>
                <font color="#288850"><b>static</b></font>  <font color="#288850"><b>int</b></font>     ignoreSignals(<font color="#288850"><b>const</b></font> sigset_t *sigset);
                                <font color="#0000f8">// ignore signal &quot;signum&quot;</font>
                <font color="#288850"><b>static</b></font>  <font color="#288850"><b>int</b></font>     waitForSignals(<font color="#288850"><b>const</b></font> sigset_t *mask);
                                <font color="#0000f8">// wait until a signal NOT in the signal set </font>
                                <font color="#0000f8">// &quot;mask&quot; is received</font>
                <font color="#288850"><b>static</b></font>  <font color="#288850"><b>int</b></font>     examineBlockedSignals(sigset_t *sigset);
                                <font color="#0000f8">// sets &quot;sigset&quot; to the set of signals that</font>
                                <font color="#0000f8">// were raised, but blocked during a call to </font>
                                <font color="#0000f8">// waitForSignals()</font>
};


<font color="#0000f8">// The signalhandler class provides methods for catching and handling signals.</font>
<font color="#288850"><b>class</b></font> signalhandler {
        <font color="#a02828"><b>public</b></font>:
                        signalhandler();
                        signalhandler(<font color="#288850"><b>int</b></font> signum, <font color="#288850"><b>void</b></font> *handler);
                        <font color="#0000f8">// calls the setHandler() and handleSignal() methods</font>
                        <font color="#0000f8">// below during instantiation</font>

                <font color="#288850"><b>void</b></font>    setHandler(<font color="#288850"><b>void</b></font> *inthandler);
                        <font color="#0000f8">// sets the function to call when the process</font>
                        <font color="#0000f8">// receives the signal</font>

                <font color="#288850"><b>int</b></font>     handleSignal(<font color="#288850"><b>int</b></font> signum);
                        <font color="#0000f8">// Instructs the program to handle &quot;signum&quot; by calling</font>
                        <font color="#0000f8">// the handler set previously in setHandler().  May</font>
                        <font color="#0000f8">// be called multiple times to associate the same</font>
                        <font color="#0000f8">// handler with several signals.</font>

                <font color="#0000f8">// Signal flags modify the behavior of the signal handling</font>
                <font color="#0000f8">// process.</font>
                <font color="#288850"><b>void</b></font>    removeAllFlags();
                        <font color="#0000f8">// remove all flags</font>
                <font color="#288850"><b>void</b></font>    addFlag(<font color="#288850"><b>int</b></font> flag);
                        <font color="#0000f8">// add &quot;flag&quot; to the set of flags modifying the</font>
                        <font color="#0000f8">// behavior of this signal handler</font>
                <font color="#288850"><b>int</b></font>     getFlags() <font color="#288850"><b>const</b></font>;
                        <font color="#0000f8">// return the set of flags modifying the behavior of </font>
                        <font color="#0000f8">// this signal handler</font>


                <font color="#0000f8">// A signal mask is the set of signals that are blocked while</font>
                <font color="#0000f8">// the signal handler function is being called.  Masking</font>
                <font color="#0000f8">// signals can ensure that the function executes without</font>
                <font color="#0000f8">// interruption.</font>
                <font color="#288850"><b>int</b></font>             addSignalToMask(<font color="#288850"><b>int</b></font> signum);
                                <font color="#0000f8">// add the signal &quot;signum&quot; to the mask</font>
                <font color="#288850"><b>int</b></font>             addAllSignalsToMask();
                                <font color="#0000f8">// mask all signals</font>
                <font color="#288850"><b>int</b></font>             removeSignalFromMask(<font color="#288850"><b>int</b></font> signum);
                                <font color="#0000f8">// remove the signal &quot;signum&quot; from the mask</font>
                <font color="#288850"><b>int</b></font>             removeAllSignalsFromMask();
                                <font color="#0000f8">// mask no signals</font>
                <font color="#288850"><b>int</b></font>             signalIsInMask(<font color="#288850"><b>int</b></font> signum) <font color="#288850"><b>const</b></font>;
                                <font color="#0000f8">// returns 1 if the signal &quot;signum&quot; is masked </font>
                                <font color="#0000f8">// and 0 if it is not</font>
                <font color="#288850"><b>void</b></font>            setMask(sigset_t sigset);
                                <font color="#0000f8">// explicitly sets the mask to &quot;sigset&quot;</font>
                sigset_t        getMask() <font color="#288850"><b>const</b></font>;
                                <font color="#0000f8">// returns the set of signals currently masked</font>

<font color="#a020f0">        #include </font><font color="#f800f8">&lt;rudiments/private/signalhandler.h&gt;</font>

};

<font color="#a020f0">#ifdef ENABLE_RUDIMENTS_INLINES</font>
<font color="#a020f0">        #include </font><font color="#f800f8">&lt;rudiments/private/signalclassesinlines.h&gt;</font>
<font color="#a020f0">#endif</font>

<font color="#a020f0">#endif</font>
</pre>
</body>
</html>
