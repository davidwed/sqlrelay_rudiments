<html>
<head>
<title>~/src/firstworks/rudiments-0.28/include/rudiments/signalclasses.h.html</title>
<meta name="Generator" content="Vim/6.3">
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
</head>
<body bgcolor="#ffffff" text="#000000">
<pre>
<font color="#0000ff">// Copyright (c) 1999-2002 David Muse</font>
<font color="#0000ff">// See the COPYING file for more information.</font>

<font color="#a520f7">#ifndef RUDIMENTS_SIGNALCLASSES_H</font>
<font color="#a520f7">#define RUDIMENTS_SIGNALCLASSES_H</font>

<font color="#a520f7">#include </font><font color="#ff00ff">&lt;rudiments/private/signalclassesincludes.h&gt;</font>

<font color="#0000ff">// Signals are a means for processes to interrupt each other.</font>
<font color="#0000ff">//</font>
<font color="#0000ff">// Many signals will cause a process to exit unless they are explicitly</font>
<font color="#0000ff">// handled by a callback function.</font>
<font color="#0000ff">//</font>
<font color="#0000ff">// Different architectures have different signals, but most have the following</font>
<font color="#0000ff">// signals:</font>


<font color="#a520f7">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#298a52"><b>namespace</b></font> rudiments {
<font color="#a520f7">#endif</font>


<font color="#0000ff">// A signalset it just a collection of signals.  Many signal-related functions</font>
<font color="#0000ff">// take signalsets for arguments.  The signalset class makes signalsets</font>
<font color="#0000ff">// easy to manage.</font>
<font color="#298a52"><b>class</b></font> signalset {
        <font color="#a52829"><b>public</b></font>:
                <font color="#298a52"><b>bool</b></font>    addSignal(<font color="#298a52"><b>int</b></font> signum);
                        <font color="#0000ff">// Add the signal &quot;signum&quot; to the set.</font>
                        <font color="#0000ff">// Returns true on success and false on failure.</font>
                <font color="#298a52"><b>bool</b></font>    addAllSignals();
                        <font color="#0000ff">// Add all signals to the set.</font>
                        <font color="#0000ff">// Returns true on success and false on failure.</font>
                <font color="#298a52"><b>bool</b></font>    removeSignal(<font color="#298a52"><b>int</b></font> signum);
                        <font color="#0000ff">// Remove the signal &quot;signum&quot; from the set.</font>
                        <font color="#0000ff">// Returns true on success and false on failure.</font>
                <font color="#298a52"><b>bool</b></font>    removeAllSignals();
                        <font color="#0000ff">// Remove all signals from the set.</font>
                        <font color="#0000ff">// Returns true on success and false on failure.</font>
                <font color="#298a52"><b>int</b></font>     signalIsInSet(<font color="#298a52"><b>int</b></font> signum) <font color="#298a52"><b>const</b></font>;
                        <font color="#0000ff">// Returns 1 if the signal &quot;signum&quot; is in the </font>
                        <font color="#0000ff">// set, 0 if it is not and -1 on error.</font>

                sigset_t        *getSignalSet();
                                <font color="#0000ff">// returns the set of signals</font>

<font color="#a520f7">        #include </font><font color="#ff00ff">&lt;rudiments/private/signalset.h&gt;</font>
};



<font color="#0000ff">// The signalmanager class provides methods for sending, blocking and waiting </font>
<font color="#0000ff">// for signals.</font>
<font color="#298a52"><b>class</b></font> signalmanager {
        <font color="#a52829"><b>public</b></font>:
                <font color="#298a52"><b>static</b></font>  <font color="#298a52"><b>bool</b></font>    sendSignal(pid_t processid, <font color="#298a52"><b>int</b></font> signum);
                                <font color="#0000ff">// Send singal &quot;signum&quot; to process &quot;processid&quot;.</font>
                                <font color="#0000ff">// Returns true on success and false on failure.</font>
                <font color="#298a52"><b>static</b></font>  <font color="#298a52"><b>bool</b></font>    raiseSignal(<font color="#298a52"><b>int</b></font> signum);
                                <font color="#0000ff">// Send singal &quot;signum&quot; to self.</font>
                                <font color="#0000ff">// Returns true on success and false on failure.</font>
                <font color="#298a52"><b>static</b></font>  <font color="#298a52"><b>bool</b></font>    ignoreSignals(<font color="#298a52"><b>const</b></font> sigset_t *sigset);
                                <font color="#0000ff">// Ignore signal &quot;signum&quot;.</font>
                                <font color="#0000ff">// Returns true on success and false on failure.</font>
                <font color="#298a52"><b>static</b></font>  <font color="#298a52"><b>bool</b></font>    waitForSignals(<font color="#298a52"><b>const</b></font> sigset_t *mask);
                                <font color="#0000ff">// Wait until a signal NOT in the signal set </font>
                                <font color="#0000ff">// &quot;mask&quot; is received.</font>
                                <font color="#0000ff">// Returns true on success and false on failure.</font>
                <font color="#298a52"><b>static</b></font>  <font color="#298a52"><b>bool</b></font>    examineBlockedSignals(sigset_t *sigset);
                                <font color="#0000ff">// Sets &quot;sigset&quot; to the set of signals that</font>
                                <font color="#0000ff">// were raised, but blocked during a call to </font>
                                <font color="#0000ff">// waitForSignals().</font>
                                <font color="#0000ff">// Returns true on success and false on failure.</font>
};


<font color="#0000ff">// The signalhandler class provides methods for catching and handling signals.</font>
<font color="#298a52"><b>class</b></font> signalhandler {
        <font color="#a52829"><b>public</b></font>:
                        signalhandler();
                        signalhandler(<font color="#298a52"><b>int</b></font> signum, <font color="#298a52"><b>void</b></font> *handler);
                        <font color="#0000ff">// Calls the setHandler() and handleSignal() methods</font>
                        <font color="#0000ff">// below during instantiation.</font>

                <font color="#298a52"><b>void</b></font>    setHandler(<font color="#298a52"><b>void</b></font> *handler);
                        <font color="#0000ff">// Sets the function to call when the process</font>
                        <font color="#0000ff">// receives the signal.</font>
                <font color="#298a52"><b>void</b></font>    *getHandler();
                        <font color="#0000ff">// Returns a pointer to the function that will be</font>
                        <font color="#0000ff">// called when the process receives the signal.</font>

                <font color="#298a52"><b>bool</b></font>    handleSignal(<font color="#298a52"><b>int</b></font> signum);
                        <font color="#0000ff">// Instructs the program to handle &quot;signum&quot; by calling</font>
                        <font color="#0000ff">// the handler set previously in setHandler().  May</font>
                        <font color="#0000ff">// be called multiple times to associate the same</font>
                        <font color="#0000ff">// handler with several signals.</font>
                        <font color="#0000ff">//</font>
                        <font color="#0000ff">// Returns true on success and false on failure.</font>
                <font color="#298a52"><b>bool</b></font>    handleSignal(<font color="#298a52"><b>int</b></font> signum, signalhandler *oldhandler);
                        <font color="#0000ff">// Instructs the program to handle &quot;signum&quot; by calling</font>
                        <font color="#0000ff">// the handler set previously in setHandler().  May</font>
                        <font color="#0000ff">// be called multiple times to associate the same</font>
                        <font color="#0000ff">// handler with several signals.  Populates oldhandler</font>
                        <font color="#0000ff">// with the values that were used to handle this signal</font>
                        <font color="#0000ff">// prior to this call.</font>
                        <font color="#0000ff">//</font>
                        <font color="#0000ff">// Returns true on success and false on failure.</font>

                <font color="#0000ff">// Signal flags modify the behavior of the signal handling</font>
                <font color="#0000ff">// process.</font>
                <font color="#298a52"><b>void</b></font>    removeAllFlags();
                        <font color="#0000ff">// Remove all flags.</font>
                <font color="#298a52"><b>void</b></font>    addFlag(<font color="#298a52"><b>int</b></font> flag);
                        <font color="#0000ff">// Add &quot;flag&quot; to the set of flags modifying the</font>
                        <font color="#0000ff">// behavior of this signal handler.</font>
                <font color="#298a52"><b>int</b></font>     getFlags() <font color="#298a52"><b>const</b></font>;
                        <font color="#0000ff">// Return the set of flags modifying the behavior of </font>
                        <font color="#0000ff">// this signal handler.</font>


                <font color="#0000ff">// A signal mask is the set of signals that are blocked while</font>
                <font color="#0000ff">// the signal handler function is being called.  Masking</font>
                <font color="#0000ff">// signals can ensure that the function executes without</font>
                <font color="#0000ff">// interruption.</font>
                <font color="#298a52"><b>bool</b></font>            addSignalToMask(<font color="#298a52"><b>int</b></font> signum);
                                <font color="#0000ff">// Add the signal &quot;signum&quot; to the mask.</font>
                                <font color="#0000ff">// Returns true on success and false on failure.</font>
                <font color="#298a52"><b>bool</b></font>            addAllSignalsToMask();
                                <font color="#0000ff">// Mask all signals.</font>
                                <font color="#0000ff">// Returns true on success and false on failure.</font>
                <font color="#298a52"><b>bool</b></font>            removeSignalFromMask(<font color="#298a52"><b>int</b></font> signum);
                                <font color="#0000ff">// Remove the signal &quot;signum&quot; from the mask.</font>
                                <font color="#0000ff">// Returns true on success and false on failure.</font>
                <font color="#298a52"><b>bool</b></font>            removeAllSignalsFromMask();
                                <font color="#0000ff">// Mask no signals.</font>
                                <font color="#0000ff">// Returns true on success and false on failure.</font>
                <font color="#298a52"><b>int</b></font>             signalIsInMask(<font color="#298a52"><b>int</b></font> signum) <font color="#298a52"><b>const</b></font>;
                                <font color="#0000ff">// Returns 1 if the signal &quot;signum&quot; is in the </font>
                                <font color="#0000ff">// set, 0 if it is not and -1 on error.</font>
                <font color="#298a52"><b>void</b></font>            setMask(sigset_t sigset);
                                <font color="#0000ff">// Explicitly sets the mask to &quot;sigset&quot;.</font>
                sigset_t        getMask() <font color="#298a52"><b>const</b></font>;
                                <font color="#0000ff">// Returns the set of signals currently masked.</font>

<font color="#a520f7">        #include </font><font color="#ff00ff">&lt;rudiments/private/signalhandler.h&gt;</font>

};

<font color="#a520f7">#ifdef RUDIMENTS_NAMESPACE</font>
}
<font color="#a520f7">#endif</font>

<font color="#a520f7">#endif</font>
</pre>
</body>
</html>
