<html>
<head>
<title>firstworks   Programming with Rudiments using the Utility Classes</title>
<link href="../css/styles.css" rel="stylesheet">
</head>
<body>

<span class="heading">Programming with Rudiments using the Utility Classes</span><br><br>

<ul>
<li><a href="#environment">Using the environment Class</a></li>
<li><a href="#commandline">Using the commandline Class</a></li>
<li><a href="#parameterstring">Using the parameterstring Class</a></li>
<li><a href="#datetime">Using the datetime Class</a></li>
<li><a href="#timezonefile">Using the timezonefile Class</a></li>
<li><a href="#directory">Using the directory Class</a></li>
<li><a href="#filesystem">Using the filesystem Class</a></li>
<li><a href="#logger">Using the logger Class</a></li>
<li><a href="#permissions">Using the permissions Class</a></li>
<li><a href="#randomnumber">Using the randomnumber Class</a></li>
<li><a href="#regularexpression">Using the regularexpression Class</a></li>
<li><a href="#chat">Using the chat Class</a></li>
<li><a href="#crypt">Using the crypt Class</a></li>
<li><a href="#dynamiclib">Using the dynamiclib Class</a></li>
<li><a href="#error">Using the error Class</a></li>
<li><a href="#intervaltimer">Using the intervaltimer Class</a></li>
<li><a href="#math">Using the math Class</a></li>
<li><a href="#mutex">Using the mutex Class</a></li>
<li><a href="#process">Using the process Class</a></li>
<li><a href="#serialportprofile">Using the serialportprofile Class</a></li>
<li><a href="#snooze">Using the snooze Class</a></li>
<li><a href="#signal">Using the Signal Classes</a></li>
<li><a href="#sharedmemory">Using the sharedmemory Class</a></li>
<li><a href="#semaphoreset">Using the semaphoreset Class</a></li>
<li><a href="#memorymap">Using the memorymap Class</a></li>
<li><a href="#memorypool">Using the memorypool Class</a></li>
<li><a href="#variablebuffer">Using the variablebuffer Class</a></li>
<li><a href="#stringbuffer">Using the stringbuffer Class</a></li>
<li><a href="#character">Using the character Class</a></li>
<li><a href="#charstring">Using the charstring Class</a></li>
<li><a href="#rawbuffer">Using the rawbuffer Class</a></li>
<li><a href="#xmldom">Using the xmldom Classes</a></li>
<li><a href="#xmlsax">Using the xmlsax Class</a></li>
<li><a href="#dtd">Using the dtd Class</a></li>
<li><a href="#passwdentry">Using the passwdentry Class</a></li>
<li><a href="#shadowentry">Using the shadowentry Class</a></li>
<li><a href="#groupentry">Using the groupentry Class</a></li>
<li><a href="#hostentry">Using the hostentry Class</a></li>
<li><a href="#protocolentry">Using the protocolentry Class</a></li>
<li><a href="#serviceentry">Using the serviceentry Class</a></li>
<li><a href="#rpcentry">Using the rpcentry Class</a></li>
<li><a href="#linkedlist">Using the linkedlist Class</a></li>
<li><a href="#dictionary">Using the dictionary Class</a></li>
</ul>

<a name="environment"></a>
<span class="heading">Using the environment Class</span><br><br>

<p>The environment class allows you to get or set the value of environment
variables.  The following example gets, sets and resets the environment
variable TEST.</p>








<pre>
<font color="#0000ff">// Copyright (c) 2003  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/environment.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdio.h&gt;</font>

<font color="#a020f0">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a020f0">#endif</font>

<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argc, <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> **argv) {

        <font color="#0000ff">// print the environment variable &quot;TEST&quot;</font>
        printf(<font color="#ff00ff">&quot;TEST=</font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,environment::getValue(<font color="#ff00ff">&quot;TEST&quot;</font>));

        <font color="#0000ff">// set the value of &quot;TEST&quot; to &quot;value&quot;</font>
        <font color="#a52a2a"><b>if</b></font> (environment::setValue(<font color="#ff00ff">&quot;TEST&quot;</font>,<font color="#ff00ff">&quot;value&quot;</font>)) {
                printf(<font color="#ff00ff">&quot;TEST=</font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,environment::getValue(<font color="#ff00ff">&quot;TEST&quot;</font>));
        } <font color="#a52a2a"><b>else</b></font> {
                printf(<font color="#ff00ff">&quot;setValue() failed</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        }

        <font color="#0000ff">// set the value of &quot;TEST&quot; to &quot;newvalue&quot;</font>
        <font color="#a52a2a"><b>if</b></font> (environment::setValue(<font color="#ff00ff">&quot;TEST&quot;</font>,<font color="#ff00ff">&quot;newvalue&quot;</font>)) {
                printf(<font color="#ff00ff">&quot;TEST=</font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,environment::getValue(<font color="#ff00ff">&quot;TEST&quot;</font>));
        } <font color="#a52a2a"><b>else</b></font> {
                printf(<font color="#ff00ff">&quot;setValue() failed</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        }

        <font color="#0000ff">// remove &quot;TEST&quot; from the environment</font>
        environment::remove(<font color="#ff00ff">&quot;TEST&quot;</font>);

        <font color="#0000ff">// print the (non-existent) environment variable &quot;TEST&quot;</font>
        printf(<font color="#ff00ff">&quot;TEST=</font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,environment::getValue(<font color="#ff00ff">&quot;TEST&quot;</font>));

        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n\n</font><font color="#ff00ff">&quot;</font>);
        environment::print();

        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n\n</font><font color="#ff00ff">&quot;</font>);
        environment::clear();

        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n\n</font><font color="#ff00ff">clear?</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        environment::print();
}
</pre>



<a name="commandline"></a>
<span class="heading">Using the commandline Class</span><br><br>

<p>Most programs take command line options in the option/value pair format:</p>
<blockquote>program -option value -option value ...</blockquote>
<p>or</p>
<blockquote>program --option=value --option=value ...</blockquote>
<p>The commandline class makes it easy to deal with command line options of
either of these formats.  Below is some code illustrating the use of the
commandline class.</p>








<pre>
<font color="#0000ff">// Copyright (c) 2001  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/commandline.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/charstring.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdio.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdlib.h&gt;</font>

<font color="#a020f0">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a020f0">#endif</font>

<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argc, <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> **argv) {

        commandline     cmdline(argc,argv);

        <font color="#0000ff">// if -help was specified, display a usage message</font>
        <font color="#a52a2a"><b>if</b></font> (cmdline.found(<font color="#ff00ff">&quot;-help&quot;</font>)) {
                printf(<font color="#ff00ff">&quot;usage:  divide -divisor number -dividend number</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
                exit(<font color="#ff00ff">0</font>);
        }

        <font color="#0000ff">// If -divisor and -dividend are supplied, use them.  Otherwise</font>
        <font color="#0000ff">// display an error message.</font>
        <font color="#a52a2a"><b>if</b></font> (cmdline.found(<font color="#ff00ff">&quot;-divisor&quot;</font>) &amp;&amp; cmdline.found(<font color="#ff00ff">&quot;-dividend&quot;</font>)) {
                <font color="#2e8b57"><b>double</b></font>        divisor=charstring::toFloat(
                                        cmdline.getValue(<font color="#ff00ff">&quot;-divisor&quot;</font>));
                <font color="#2e8b57"><b>double</b></font>        dividend=charstring::toFloat(
                                        cmdline.getValue(<font color="#ff00ff">&quot;-dividend&quot;</font>));
                printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%0.2f</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,divisor/dividend);
        } <font color="#a52a2a"><b>else</b></font> {
                printf(<font color="#ff00ff">&quot;You must supply a divisor and a dividend.</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        }
}
</pre>



<a name="parameterstring"></a>
<span class="heading">Using the parameterstring Class</span><br><br>

<p>Sometimes a function needs to take an arbitrary set of parameters.  For
example, a function for connecting to a database may need host, port, socket,
username and password, any of which could be omitted depending on the
database.  Though C++ support methods which take an arbitrary number of
parameters, sometimes it is more convenient to for the method to accept a
single string parameter with name/value pairs in it instead.</p>

<p>The parameterstring class provides methods for parsing and accessing
a parameter string of the following form:</p>

<blockquote>
name1='value1';name2='value2';name3='value3'
</blockquote>

<p>The single quotes are optional.  If a parameter needs to contain a single
quote, then it can be escaped as follows:</p>

<blockquote>
name='\'value\''
</blockquote>

<p>Backslashes can be similarly escaped:</p>

<blockquote>
name='\\value\\'
</blockquote>

<pre>
...
</pre>








<pre>
<font color="#0000ff">// Copyright (c) 2002  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/parameterstring.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdio.h&gt;</font>

<font color="#a020f0">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a020f0">#endif</font>

<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argc, <font color="#2e8b57"><b>char</b></font> **argv) {

        parameterstring pstr;

        pstr.parse(<font color="#ff00ff">&quot;name1=value1;name2='value2';name3='</font><font color="#6a5acd">\\</font><font color="#ff00ff">'value3</font><font color="#6a5acd">\\</font><font color="#ff00ff">'';name4=</font><font color="#6a5acd">\\\\</font><font color="#ff00ff">value4</font><font color="#6a5acd">\\\\</font><font color="#ff00ff">&quot;</font>);

        printf(<font color="#ff00ff">&quot;By Name:</font><font color="#6a5acd">\n</font><font color="#ff00ff">name1=</font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">name2=</font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">name3=</font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">name4=</font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">name5=</font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                                pstr.getValue(<font color="#ff00ff">&quot;name1&quot;</font>),
                                pstr.getValue(<font color="#ff00ff">&quot;name2&quot;</font>),
                                pstr.getValue(<font color="#ff00ff">&quot;name3&quot;</font>),
                                pstr.getValue(<font color="#ff00ff">&quot;name4&quot;</font>),
                                pstr.getValue(<font color="#ff00ff">&quot;name5&quot;</font>));
}
</pre>



<a name="datetime"></a>
<span class="heading">Using the datetime Class</span><br><br>

<p>One of the most difficult things to do in a Unix environment is deal with
dates and times.  The "standard" functions and structures associated with 
dates and times are complex, vary widely from platform to platform and in
many cases are not thread safe.  The datetime class attempts to rectify this
situation.</p>

<p>The datetime class allows you to query and set the system clock. If your
platform has a working real-time-clock (/dev/rtc), then you can query or set
the hardware clock as well.  Note that your program must run as root in order
to set the system or hardware clock.  Since it is common for the system clock
to be set to the local time zone and the hardware clock to be set to GMT,
a method is provided for converting the hardware clock time to the system's
time zone.</p>

<p>Additionally there is a method for switching the time zone of the time
currently represented in the class.</p>

<p>The datetime class also provides methods for converting between several
common ways of representing time.  Such as a formatted string, the number of
seconds since 1970 and "struct tm".</p>

<p>There are also methods for adding discrete amounts of time to the time
currently stored in the class.  You can, for example add 150 seconds to 
"12:30:50 01/02/2003 EST" and get "12:32:20 01/02/2003 EST".  You can add
negative numbers to subtract time.</p>

<p>Below is some code illustrating the use of the datetime class.</p>








<pre>
<font color="#0000ff">// Copyright (c) 2001  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/datetime.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdio.h&gt;</font>

<font color="#a020f0">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a020f0">#endif</font>

<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argc, <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> **argv) {

        <font color="#0000ff">// set current time zone to America/New_York</font>
        printf(<font color="#ff00ff">&quot;setting TZ=America/New_York...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        environment     env;
        env.setValue(<font color="#ff00ff">&quot;TZ&quot;</font>,<font color="#ff00ff">&quot;America/New_York&quot;</font>);

        <font color="#0000ff">// get the current date</font>
        datetime        dt;
        dt.getSystemDateAndTime();

        <font color="#0000ff">// Write out the different parts of the date.</font>
        printf(<font color="#ff00ff">&quot;Hour       : </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,dt.getHour());
        printf(<font color="#ff00ff">&quot;Minutes    : </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,dt.getMinutes());
        printf(<font color="#ff00ff">&quot;Seconds           : </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,dt.getSeconds());
        printf(<font color="#ff00ff">&quot;Month      : </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,dt.getMonth());
        printf(<font color="#ff00ff">&quot;DayOfMonth : </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,dt.getDayOfMonth());
        printf(<font color="#ff00ff">&quot;DayOfWeek  : </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,dt.getDayOfWeek());
        printf(<font color="#ff00ff">&quot;DayOfYear  : </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,dt.getDayOfYear());
        printf(<font color="#ff00ff">&quot;Year       : </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,dt.getYear());
        printf(<font color="#ff00ff">&quot;Daylight Savings Time : </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,dt.isDaylightSavingsTime());
        printf(<font color="#ff00ff">&quot;Time Zone            : </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,dt.getTimeZoneString());
        printf(<font color="#ff00ff">&quot;Offset from GMT       : </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,dt.getTimeZoneOffset());
        printf(<font color="#ff00ff">&quot;Seconds since 1970    : </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,dt.getEpoch());
        printf(<font color="#ff00ff">&quot;Date String          : </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,dt.getString());

        <font color="#0000ff">// use static methods to translate between formats</font>
        <font color="#2e8b57"><b>char</b></font>   *string=datetime::getString(dt.getEpoch());
        printf(<font color="#ff00ff">&quot;String from Epoch     : </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,string);
        <font color="#a52a2a"><b>delete</b></font>[] string;
        string=datetime::getString(dt.getTm());
        printf(<font color="#ff00ff">&quot;String from tm        : </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,string);

        <font color="#0000ff">// use static methods to translate between formats</font>
        <font color="#2e8b57"><b>time_t</b></font> epoch=datetime::getEpoch(string);
        printf(<font color="#ff00ff">&quot;Epoch from String     : </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,epoch);
        <font color="#a52a2a"><b>delete</b></font>[] string;
        epoch=datetime::getEpoch(dt.getTm());
        printf(<font color="#ff00ff">&quot;Epoch from tm         : </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,epoch);

        <font color="#0000ff">// get time from hardware clock</font>
        printf(<font color="#ff00ff">&quot;Hardware Clock (assuming GMT): </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                (dt.getHardwareDateAndTime(<font color="#ff00ff">&quot;GMT&quot;</font>))?
                                        dt.getString():<font color="#ff00ff">&quot;failed&quot;</font>);

        <font color="#0000ff">// get time from hardware clock adjusting for timezone</font>
        printf(<font color="#ff00ff">&quot;Adjusted Hardware Clock      : </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                (dt.getAdjustedHardwareDateAndTime(<font color="#ff00ff">&quot;GMT&quot;</font>))?
                                        dt.getString():<font color="#ff00ff">&quot;failed&quot;</font>);

        <font color="#0000ff">// switch time zones</font>
        dt.adjustTimeZone(<font color="#ff00ff">&quot;MST&quot;</font>);
        printf(<font color="#ff00ff">&quot;Adjusting time zone to Mountain time: </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,dt.getString());

        <font color="#0000ff">// valid date</font>
        <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font>     *str=<font color="#ff00ff">&quot;02/20/1974 12:00:00&quot;</font>;
        printf(<font color="#ff00ff">&quot;valid date?  </font><font color="#6a5acd">%s</font><font color="#ff00ff">  : </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,str,datetime::validDateTime(str));
        str=<font color="#ff00ff">&quot;02/30/1974 12:00:00&quot;</font>;
        printf(<font color="#ff00ff">&quot;valid date?  </font><font color="#6a5acd">%s</font><font color="#ff00ff">  : </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,str,datetime::validDateTime(str));
        str=<font color="#ff00ff">&quot;02/20/1974 12:00:00 EST5EDT&quot;</font>;
        printf(<font color="#ff00ff">&quot;valid date?  </font><font color="#6a5acd">%s</font><font color="#ff00ff">  : </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,str,datetime::validDateTime(str));
        str=<font color="#ff00ff">&quot;02/30/1974 12:00:00 EST5EDT&quot;</font>;
        printf(<font color="#ff00ff">&quot;valid date?  </font><font color="#6a5acd">%s</font><font color="#ff00ff">  : </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,str,datetime::validDateTime(str));
}
</pre>



<a name="timezonefile"></a>
<span class="heading">Using the timezonefile Class</span><br><br>

<p>While I was working on timezone support in the datetime class I originally
thought that it might be useful to be able to parse timezone files.  I could not
find any standard C functions for parsing them, so I wrote a class that parses
them.</p>

<p>It turned out to be of very limited value, but it works and I never removed
it.  So, if you need such functionality, it exists.</p>








<pre>
<font color="#0000ff">// Copyright (c) 2003  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/timezonefile.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdio.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdlib.h&gt;</font>

<font color="#a020f0">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a020f0">#endif</font>

<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argc, <font color="#2e8b57"><b>char</b></font> **argv) {

        <font color="#0000ff">// parse the timezone file specified in the first argument</font>
        timezonefile    tz;
        <font color="#a52a2a"><b>if</b></font> (!tz.parseFile(argv[<font color="#ff00ff">1</font>])) {
                printf(<font color="#ff00ff">&quot;usage: tzn file</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
                exit(<font color="#ff00ff">1</font>);
        }

        <font color="#0000ff">// print using built-in method</font>
        tz.print();
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n\n</font><font color="#ff00ff">&quot;</font>);

        <font color="#0000ff">// print manually</font>
        printf(<font color="#ff00ff">&quot;ttisgmtcnt: </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,tz.getIsGMTCount());
        printf(<font color="#ff00ff">&quot;ttisstdcnt: </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,tz.getIsSTDCount());
        printf(<font color="#ff00ff">&quot;leapcnt: </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,tz.getLeapCount());
        printf(<font color="#ff00ff">&quot;timecnt: </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,tz.getTimeCount());
        printf(<font color="#ff00ff">&quot;typecnt: </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,tz.getTypeCount());
        printf(<font color="#ff00ff">&quot;charcnt: </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,tz.getCharacterCount());
        <font color="#2e8b57"><b>int</b></font>    i;
        <font color="#a52a2a"><b>for</b></font> (i=<font color="#ff00ff">0</font>; i&lt;tz.getTimeCount(); i++) {
                printf(<font color="#ff00ff">&quot;transitiontime[</font><font color="#6a5acd">%d</font><font color="#ff00ff">]: </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,i,tz.getTransitionTime(i));
        }
        <font color="#a52a2a"><b>for</b></font> (i=<font color="#ff00ff">0</font>; i&lt;tz.getTimeCount(); i++) {
                printf(<font color="#ff00ff">&quot;localtime[</font><font color="#6a5acd">%d</font><font color="#ff00ff">]: </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,i,tz.getLocalTimes(i));
        }
        <font color="#a52a2a"><b>for</b></font> (i=<font color="#ff00ff">0</font>; i&lt;tz.getTypeCount(); i++) {
                printf(<font color="#ff00ff">&quot;ttinfo[</font><font color="#6a5acd">%d</font><font color="#ff00ff">] {</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,i);
                printf(<font color="#ff00ff">&quot;      tt_gmtoff: </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                                        tz.getTimeTypeInfo(i)-&gt;tt_gmtoff);
                printf(<font color="#ff00ff">&quot;      tt_isdst: </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                                        tz.getTimeTypeInfo(i)-&gt;tt_isdst);
                printf(<font color="#ff00ff">&quot;      tt_abbrind: </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                                        tz.getTimeTypeInfo(i)-&gt;tt_abbrind);
                printf(<font color="#ff00ff">&quot;}</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        }
        printf(<font color="#ff00ff">&quot;rawtimezonestring: &quot;</font>);
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> i=<font color="#ff00ff">0</font>; i&lt;tz.getCharacterCount(); i++) {
                <font color="#a52a2a"><b>if</b></font> (tz.getRawTimeZoneString()[i]==(<font color="#2e8b57"><b>char</b></font>)<font color="#ff00ff">NULL</font>) {
                        printf(<font color="#ff00ff">&quot; &quot;</font>);
                }
                printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%c</font><font color="#ff00ff">&quot;</font>,tz.getRawTimeZoneString()[i]);
        }
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        <font color="#a52a2a"><b>for</b></font> (i=<font color="#ff00ff">0</font>; i&lt;tz.getLeapCount(); i++) {
                printf(<font color="#ff00ff">&quot;leapsecondtime[</font><font color="#6a5acd">%d</font><font color="#ff00ff">]: </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,i,
                                        tz.getLeapSecondTime(i));
                printf(<font color="#ff00ff">&quot;totalleapseconds[</font><font color="#6a5acd">%d</font><font color="#ff00ff">]: </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,i,
                                        tz.getTotalLeapSeconds(i));
        }
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> counter=<font color="#ff00ff">0</font>; counter&lt;tz.getTypeCount(); counter++) {
                printf(<font color="#ff00ff">&quot;timezonestrings[</font><font color="#6a5acd">%d</font><font color="#ff00ff">]=</font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,counter,
                                        tz.getTimeZoneString(counter));
        }
        <font color="#a52a2a"><b>for</b></font> (i=<font color="#ff00ff">0</font>; i&lt;tz.getIsSTDCount(); i++) {
                printf(<font color="#ff00ff">&quot;transstdwall[</font><font color="#6a5acd">%d</font><font color="#ff00ff">]: </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,i,
                                        tz.getStandardOrWallIndicator(i));
        }
        <font color="#a52a2a"><b>for</b></font> (i=<font color="#ff00ff">0</font>; i&lt;tz.getIsGMTCount(); i++) {
                printf(<font color="#ff00ff">&quot;transutclocal[</font><font color="#6a5acd">%d</font><font color="#ff00ff">]: </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,i,
                                        tz.getUTCOrLocalIndicator(i));
        }
}
</pre>



<a name="directory"></a>
<span class="heading">Using the directory Class</span><br><br>








<pre>
<font color="#0000ff">// Copyright (c) 2004  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/directory.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/file.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/permissions.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdio.h&gt;</font>

<font color="#a020f0">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a020f0">#endif</font>

<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argc, <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> **argv) {

        directory::create(<font color="#ff00ff">&quot;testdir&quot;</font>,permissions::evalPermString(<font color="#ff00ff">&quot;rwxr-xr-x&quot;</font>));
        file    f;
        f.create(<font color="#ff00ff">&quot;testdir/testfile1&quot;</font>,permissions::evalPermString(<font color="#ff00ff">&quot;rw-r--r--&quot;</font>));
        f.close();
        f.create(<font color="#ff00ff">&quot;testdir/testfile2&quot;</font>,permissions::evalPermString(<font color="#ff00ff">&quot;rw-r--r--&quot;</font>));
        f.close();


        printf(<font color="#ff00ff">&quot;Contents of testdir:</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        directory       d;
        d.open(<font color="#ff00ff">&quot;testdir&quot;</font>);

        <font color="#2e8b57"><b>char</b></font>   *name;
        <font color="#a52a2a"><b>for</b></font> (off64_t index=<font color="#ff00ff">0</font>; (name=d.getChildName(index)); index++) {
                printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%lld</font><font color="#ff00ff">: </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,index,name);
                <font color="#a52a2a"><b>delete</b></font>[] name;
        }

        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%d</font><font color="#ff00ff"> entries</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,d.getChildCount());

        <font color="#2e8b57"><b>char</b></font>   *cwd=directory::getCurrentWorkingDirectory();
        printf(<font color="#ff00ff">&quot;cwd=</font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,cwd);
        <font color="#a52a2a"><b>delete</b></font>[] cwd;

        directory::changeDirectory(<font color="#ff00ff">&quot;testdir&quot;</font>);

        cwd=directory::getCurrentWorkingDirectory();
        printf(<font color="#ff00ff">&quot;cwd=</font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,cwd);
        <font color="#a52a2a"><b>delete</b></font>[] cwd;

        directory::changeDirectory(<font color="#ff00ff">&quot;..&quot;</font>);

        cwd=directory::getCurrentWorkingDirectory();
        printf(<font color="#ff00ff">&quot;cwd=</font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,cwd);
        <font color="#a52a2a"><b>delete</b></font>[] cwd;

        file::remove(<font color="#ff00ff">&quot;testdir/testfile1&quot;</font>);
        file::remove(<font color="#ff00ff">&quot;testdir/testfile2&quot;</font>);
        directory::remove(<font color="#ff00ff">&quot;testdir&quot;</font>);

        printf(<font color="#ff00ff">&quot;maxFileNameLength(/usr/local)=</font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                        directory::maxFileNameLength(<font color="#ff00ff">&quot;/usr/local&quot;</font>));
        printf(<font color="#ff00ff">&quot;maxPathLength(/usr/local)=</font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                        directory::maxPathLength(<font color="#ff00ff">&quot;/usr/local&quot;</font>));
        printf(<font color="#ff00ff">&quot;canAccessLongFileNames(/usr/local)=</font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                        directory::canAccessLongFileNames(<font color="#ff00ff">&quot;/usr/local&quot;</font>));
}
</pre>



<a name="filesystem"></a>
<span class="heading">Using the filesystem Class</span><br><br>

<p>The filesystem class provides methods for collecting statistics about a
filesystem.  The "standard" function for getting filesystem statistics
is either statfs or statvfs.  Few operating systems implement statvfs and the
structure returned by statfs varies greatly between operating systems.  The
filesystem class attempts to remedy this situation.  However, no operating
system supports every method in the filesystem class.</p>








<pre>
<font color="#0000ff">// Copyright (c) 2003  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/filesystem.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdio.h&gt;</font>

<font color="#a020f0">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a020f0">#endif</font>

<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argc, <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> **argv) {

        filesystem      fs;
        fs.initialize(<font color="#ff00ff">&quot;/&quot;</font>);

        printf(<font color="#ff00ff">&quot;root fileststem stats:</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        printf(<font color="#ff00ff">&quot;       type:                           0x</font><font color="#6a5acd">%08x</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                                fs.getType());
        printf(<font color="#ff00ff">&quot;       block size:                     </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                                fs.getBlockSize());
        printf(<font color="#ff00ff">&quot;       optimum tranfer block size:     </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                                fs.getOptimumTransferBlockSize());
        printf(<font color="#ff00ff">&quot;       total blocks:                   </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                                fs.getTotalBlocks());
        printf(<font color="#ff00ff">&quot;       free blocks:                    </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                                fs.getFreeBlocks());
        printf(<font color="#ff00ff">&quot;       available blocks:               </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                                fs.getAvailableBlocks());
        printf(<font color="#ff00ff">&quot;       total nodes:                    </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                                fs.getTotalFileNodes());
        printf(<font color="#ff00ff">&quot;       free nodes:                     </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                                fs.getFreeFileNodes());
        printf(<font color="#ff00ff">&quot;       available nodes:                </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                                fs.getAvailableFileNodes());
        printf(<font color="#ff00ff">&quot;       filesystem id:                  </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                                fs.getFileSystemId());
        printf(<font color="#ff00ff">&quot;       maximum file name length:       </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                                fs.getMaximumFileNameLength());
        printf(<font color="#ff00ff">&quot;       owner:                          </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                                fs.getOwner());
        printf(<font color="#ff00ff">&quot;       sync writes:                    </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                                fs.getSyncWrites());
        printf(<font color="#ff00ff">&quot;       async writes:                   </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                                fs.getAsyncWrites());
        printf(<font color="#ff00ff">&quot;       fs type name:                   </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                                fs.getTypeName());
        printf(<font color="#ff00ff">&quot;       mount point:                    </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                                fs.getMountPoint());
        printf(<font color="#ff00ff">&quot;       sync reads:                     </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                                fs.getSyncReads());
        printf(<font color="#ff00ff">&quot;       async reads:                    </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                                fs.getAsyncReads());
        printf(<font color="#ff00ff">&quot;       device name:                    </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                                fs.getDeviceName());
        printf(<font color="#ff00ff">&quot;       fs specific string:             </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                                fs.getFilesystemSpecificString());
}
</pre>



<a name="logger"></a>
<span class="heading">Using the logger Class</span><br><br>

<p>The logger class and associated logdestination classes provide a framework
for generating log messages from applications.  An application can define a set
of logdestinations and attach them to an instance of the logger class.  Then,
when the application calls one of the write() methods of the logger class, the
log message is written to each of the logdestinations.  For example, an
application could simultaneously log to stderr and to a file.  Currently stdout,
stderr, file and syslog logdestinations are supported.  If an application needs
to send one set of log messages to one destination and another set to a
different destinations, it can create two instances of the logger class and use
one for each set of messages.</p>

<p>The following example illustrates use of the logger class.</p>








<pre>
<font color="#0000ff">// Copyright (c) 2002  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/logger.h&gt;</font>

<font color="#a020f0">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a020f0">#endif</font>

<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argc, <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> **argv) {

        logger                  lg;

        syslogdestination       sd;
        filedestination         fd;
        stdoutdestination       sod;
        stderrdestination       sed;

        <font color="#0000ff">// initialize and add a syslog log destination</font>
        sd.open(<font color="#ff00ff">&quot;logtest&quot;</font>,LOG_CONS,LOG_USER,LOG_INFO);
        lg.addLogDestination(&amp;sd);

        <font color="#0000ff">// initialize and add a file log destination</font>
        fd.open(<font color="#ff00ff">&quot;test.log&quot;</font>);
        lg.addLogDestination(&amp;fd);

        <font color="#0000ff">// add a standard output log destination</font>
        lg.addLogDestination(&amp;sod);

        <font color="#0000ff">// add a standard error log destination</font>
        lg.addLogDestination(&amp;sed);

        <font color="#0000ff">// write a string, character, long and float value to the log, along</font>
        <font color="#0000ff">// with a standard log header for each</font>
        <font color="#2e8b57"><b>char</b></font>   *header=logger::logHeader(<font color="#ff00ff">&quot;logtest&quot;</font>);
        lg.write(header,<font color="#ff00ff">0</font>,<font color="#ff00ff">&quot;test&quot;</font>);
        lg.write(header,<font color="#ff00ff">0</font>,<font color="#ff00ff">'t'</font>);
        lg.write(header,<font color="#ff00ff">0</font>,(<font color="#2e8b57"><b>long</b></font>)<font color="#ff00ff">12345</font>);
        lg.write(header,<font color="#ff00ff">0</font>,<font color="#ff00ff">123.45</font>);
        <font color="#a52a2a"><b>delete</b></font>[] header;

        <font color="#0000ff">// remove all log destinations</font>
        lg.removeAllLogDestinations();

        <font color="#0000ff">// add each of the log destinations back</font>
        lg.addLogDestination(&amp;sd);
        lg.addLogDestination(&amp;fd);
        lg.addLogDestination(&amp;sod);
        lg.addLogDestination(&amp;sed);

        <font color="#0000ff">// remove them one by one</font>
        lg.removeLogDestination(&amp;sd);
        lg.removeLogDestination(&amp;fd);
        lg.removeLogDestination(&amp;sod);
        lg.removeLogDestination(&amp;sed);
        lg.removeAllLogDestinations();

        <font color="#0000ff">// close the syslog log destination</font>
        sd.close();

        <font color="#0000ff">// close the file log destination</font>
        fd.close();
}
</pre>



<a name="permissions"></a>
<span class="heading">Using the permissions Class</span><br><br>

<p>The permissions class provides simple methods for generating permissions.
The output of these methods can be used whenever a function takes an argument
of type mode_t.  Below is some code illustrating the use of the permissions
class.</p>








<pre>
<font color="#0000ff">// Copyright (c) 2001  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/permissions.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/file.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdlib.h&gt;</font>

<font color="#a020f0">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a020f0">#endif</font>

<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argc, <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> **argv) {


        <font color="#0000ff">// Create a file with rw-r--r-- permissions</font>
        file    fd;
        fd.open(<font color="#ff00ff">&quot;/tmp/tempfile&quot;</font>,O_RDWR|O_CREAT,
                                permissions::evalPermString(<font color="#ff00ff">&quot;rw-r--r--&quot;</font>));
        system(<font color="#ff00ff">&quot;ls -l /tmp/tempfile&quot;</font>);


        <font color="#0000ff">// change the permissions to rw-rw-r--</font>
        permissions::setFilePermissions(fd.getFileDescriptor(),
                                permissions::evalPermString(<font color="#ff00ff">&quot;rw-rw-r--&quot;</font>));
        system(<font color="#ff00ff">&quot;ls -l /tmp/tempfile&quot;</font>);


        <font color="#0000ff">// close and delete the file</font>
        fd.close();
        file::remove(<font color="#ff00ff">&quot;/tmp/tempfile&quot;</font>);


        <font color="#0000ff">// do the same as above using different methods</font>
        fd.open(<font color="#ff00ff">&quot;/tmp/tempfile&quot;</font>,O_RDWR|O_CREAT,
                                permissions::ownerReadWrite()|
                                permissions::groupRead()|
                                permissions::othersRead());
        system(<font color="#ff00ff">&quot;ls -l /tmp/tempfile&quot;</font>);

        permissions::setFilePermissions(fd.getFileDescriptor(),
                                permissions::ownerReadWrite()|
                                permissions::groupReadWrite()|
                                permissions::othersRead());
        system(<font color="#ff00ff">&quot;ls -l /tmp/tempfile&quot;</font>);
        fd.close();
        file::remove(<font color="#ff00ff">&quot;/tmp/tempfile&quot;</font>);
}
</pre>



<a name="randomnumber"></a>
<span class="heading">Using the randomnumber Class</span><br><br>

<p>Functions for generating random numbers vary from platform to platform.  
The randomnumber class attempts to rectify this situation.  Below is some code
illustrating the use of the randomnumber class.</p>








<pre>
<font color="#0000ff">// Copyright (c) 2001  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/datetime.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/randomnumber.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdio.h&gt;</font>

<font color="#a020f0">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a020f0">#endif</font>

<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argc, <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> **argv) {

        <font color="#0000ff">// it's common to seed a random number generator with the number of</font>
        <font color="#0000ff">// seconds since 1970 (the epoch), so we'll get the current date.</font>
        datetime        dt;
        dt.getSystemDateAndTime();

        printf(<font color="#ff00ff">&quot;A random number between 0 and </font><font color="#6a5acd">%d</font><font color="#ff00ff">: &quot;</font>,<font color="#ff00ff">RAND_MAX</font>);
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%d</font><font color="#ff00ff">&quot;</font>,randomnumber::generateNumber(dt.getEpoch()));
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        printf(<font color="#ff00ff">&quot;A random number between 100 and 1000: &quot;</font>);
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%d</font><font color="#ff00ff">&quot;</font>,randomnumber::generateScaledNumber(dt.getEpoch(),<font color="#ff00ff">100</font>,<font color="#ff00ff">1000</font>));
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        printf(<font color="#ff00ff">&quot;Another random number between 100 and 1000: &quot;</font>);
        <font color="#2e8b57"><b>int</b></font>     basenumber=randomnumber::generateNumber(dt.getEpoch()+<font color="#ff00ff">1</font>);
        <font color="#2e8b57"><b>int</b></font>     scalednumber=randomnumber::scaleNumber(basenumber,<font color="#ff00ff">100</font>,<font color="#ff00ff">1000</font>);
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%d</font><font color="#ff00ff">&quot;</font>,scalednumber);
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        printf(<font color="#ff00ff">&quot;A random number between -100 and -1000: &quot;</font>);
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%d</font><font color="#ff00ff">&quot;</font>,randomnumber::generateScaledNumber(dt.getEpoch(),
                                                        -<font color="#ff00ff">100</font>,-<font color="#ff00ff">1000</font>));
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        printf(<font color="#ff00ff">&quot;Another random number between -100 and -1000: &quot;</font>);
        basenumber=randomnumber::generateNumber(dt.getEpoch()+<font color="#ff00ff">1</font>);
        scalednumber=randomnumber::scaleNumber(basenumber,-<font color="#ff00ff">100</font>,-<font color="#ff00ff">1000</font>);
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%d</font><font color="#ff00ff">&quot;</font>,scalednumber);
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        printf(<font color="#ff00ff">&quot;A random number between -100 and 100: &quot;</font>);
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%d</font><font color="#ff00ff">&quot;</font>,randomnumber::generateScaledNumber(dt.getEpoch(),-<font color="#ff00ff">100</font>,<font color="#ff00ff">100</font>));
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        printf(<font color="#ff00ff">&quot;Another random number between -100 and 100: &quot;</font>);
        basenumber=randomnumber::generateNumber(dt.getEpoch()+<font color="#ff00ff">1</font>);
        scalednumber=randomnumber::scaleNumber(basenumber,-<font color="#ff00ff">100</font>,<font color="#ff00ff">100</font>);
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%d</font><font color="#ff00ff">&quot;</font>,scalednumber);
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
}
</pre>



<a name="regularexpression"></a>
<span class="heading">Using the regularexpression Class</span><br><br>

<p>Regular expressions allow a programmer to perform complex string matching 
but methods for using regular expressions vary from platform to platform.  The
regularexpression class attempts to rectify this situation.  Below is some code
illustrating the use of the regularexpression class.</p>








<pre>
<font color="#0000ff">// Copyright (c) 2001  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/regularexpression.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdio.h&gt;</font>

<font color="#a020f0">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a020f0">#endif</font>

<font color="#2e8b57"><b>void</b></font> printMatches(regularexpression *re) {
        printf(<font color="#ff00ff">&quot;match 0: </font><font color="#6a5acd">\&quot;</font><font color="#6a5acd">%s</font><font color="#6a5acd">\&quot;\n</font><font color="#ff00ff">&quot;</font>,re-&gt;getSubstringStart(<font color="#ff00ff">0</font>));
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> i=<font color="#ff00ff">1</font>; i&lt;re-&gt;getSubstringCount(); i++) {
                printf(<font color="#ff00ff">&quot;match: </font><font color="#6a5acd">\&quot;</font><font color="#6a5acd">%s</font><font color="#6a5acd">\&quot;\n</font><font color="#ff00ff">&quot;</font>,re-&gt;getSubstringStart(i));
        }
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%d</font><font color="#ff00ff"> matches</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,re-&gt;getSubstringCount());
}

<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argc, <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> **argv) {

        <font color="#0000ff">// A quick match...</font>
        <font color="#a52a2a"><b>if</b></font> (regularexpression::match(<font color="#ff00ff">&quot;Hello!&quot;</font>,<font color="#ff00ff">&quot;.*Dave.*&quot;</font>)) {
                printf(<font color="#ff00ff">&quot;The string contains .*Dave.*</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        } <font color="#a52a2a"><b>else</b></font> {
                printf(<font color="#ff00ff">&quot;The string doesn't contain Dave</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        }

        <font color="#a52a2a"><b>if</b></font> (regularexpression::match(<font color="#ff00ff">&quot;Hello Dave!&quot;</font>,<font color="#ff00ff">&quot;.*Dave.*&quot;</font>)) {
                printf(<font color="#ff00ff">&quot;The string contains .*Dave.*</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        } <font color="#a52a2a"><b>else</b></font> {
                printf(<font color="#ff00ff">&quot;The string doesn't contain Dave</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        }

        <font color="#0000ff">// If you need to match over and over...</font>
        regularexpression       re(<font color="#ff00ff">&quot;Dave&quot;</font>);
        <font color="#a52a2a"><b>if</b></font> (re.match(<font color="#ff00ff">&quot;Hello!&quot;</font>)) {
                printf(<font color="#ff00ff">&quot;The string contains Dave</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        } <font color="#a52a2a"><b>else</b></font> {
                printf(<font color="#ff00ff">&quot;The string doesn't contain Dave</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        }
        printMatches(&amp;re);

        <font color="#a52a2a"><b>if</b></font> (re.match(<font color="#ff00ff">&quot;Hello Dave!&quot;</font>)) {
                printf(<font color="#ff00ff">&quot;The string contains Dave</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        } <font color="#a52a2a"><b>else</b></font> {
                printf(<font color="#ff00ff">&quot;The string doesn't contain Dave</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        }
        printMatches(&amp;re);

        re.study();
        <font color="#a52a2a"><b>if</b></font> (re.match(<font color="#ff00ff">&quot;Goodbye!&quot;</font>)) {
                printf(<font color="#ff00ff">&quot;The string contains Dave</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        } <font color="#a52a2a"><b>else</b></font> {
                printf(<font color="#ff00ff">&quot;The string doesn't contain Dave</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        }
        printMatches(&amp;re);

        <font color="#a52a2a"><b>if</b></font> (re.match(<font color="#ff00ff">&quot;Goodbye Dave!&quot;</font>)) {
                printf(<font color="#ff00ff">&quot;The string contains Dave</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        } <font color="#a52a2a"><b>else</b></font> {
                printf(<font color="#ff00ff">&quot;The string doesn't contain Dave</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        }
        printMatches(&amp;re);

        re.study();
        <font color="#a52a2a"><b>if</b></font> (re.match(<font color="#ff00ff">&quot;He is a jerk!&quot;</font>)) {
                printf(<font color="#ff00ff">&quot;The string contains Dave</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        } <font color="#a52a2a"><b>else</b></font> {
                printf(<font color="#ff00ff">&quot;The string doesn't contain Dave</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        }
        printMatches(&amp;re);

        <font color="#a52a2a"><b>if</b></font> (re.match(<font color="#ff00ff">&quot;Dave is a jerk!&quot;</font>)) {
                printf(<font color="#ff00ff">&quot;The string contains Dave</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        } <font color="#a52a2a"><b>else</b></font> {
                printf(<font color="#ff00ff">&quot;The string doesn't contain Dave</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        }
        printMatches(&amp;re);

        <font color="#a52a2a"><b>if</b></font> (re.match(<font color="#ff00ff">&quot;He writes cool software!&quot;</font>)) {
                printf(<font color="#ff00ff">&quot;The string contains Dave</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        } <font color="#a52a2a"><b>else</b></font> {
                printf(<font color="#ff00ff">&quot;The string doesn't contain Dave</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        }
        printMatches(&amp;re);

        <font color="#a52a2a"><b>if</b></font> (re.match(<font color="#ff00ff">&quot;Dave writes cool software!&quot;</font>)) {
                printf(<font color="#ff00ff">&quot;The string contains Dave</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        } <font color="#a52a2a"><b>else</b></font> {
                printf(<font color="#ff00ff">&quot;The string doesn't contain Dave</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        }
        printMatches(&amp;re);

        <font color="#a52a2a"><b>if</b></font> (re.match(<font color="#ff00ff">&quot;See ya later Dave!&quot;</font>)) {
                printf(<font color="#ff00ff">&quot;The string contains Dave</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        } <font color="#a52a2a"><b>else</b></font> {
                printf(<font color="#ff00ff">&quot;The string doesn't contain Dave</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        }
        printMatches(&amp;re);

        <font color="#a52a2a"><b>if</b></font> (re.match(<font color="#ff00ff">&quot;See ya later!&quot;</font>)) {
                printf(<font color="#ff00ff">&quot;The string contains Dave</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        } <font color="#a52a2a"><b>else</b></font> {
                printf(<font color="#ff00ff">&quot;The string doesn't contain Dave</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        }
        printMatches(&amp;re);

        <font color="#a52a2a"><b>if</b></font> (re.match(<font color="#ff00ff">&quot;Dave, Dave, Dave!&quot;</font>)) {
                printf(<font color="#ff00ff">&quot;The string contains Dave</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        } <font color="#a52a2a"><b>else</b></font> {
                printf(<font color="#ff00ff">&quot;The string doesn't contain Dave</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        }
        printMatches(&amp;re);
}
</pre>



<a name="chat"></a>
<span class="heading">Using the chat Class</span><br><br>

<p>...</p>


<a name="crypt"></a>
<span class="heading">Using the crypt Class</span><br><br>

<p>...</p>


<a name="dynamiclib"></a>
<span class="heading">Using the dynamiclib Class</span><br><br>

<p>...</p>


<a name="error"></a>
<span class="heading">Using the error Class</span><br><br>

<p>...</p>


<a name="intervaltimer"></a>
<span class="heading">Using the intervaltimer Class</span><br><br>

<p>...</p>








<pre>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/intervaltimer.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/signalclasses.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/snooze.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdio.h&gt;</font>

<font color="#a020f0">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a020f0">#endif</font>

RETSIGTYPE      alarmhandler() {
        printf(<font color="#ff00ff">&quot;alarm!</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
}

<font color="#2e8b57"><b>void</b></font>    waitForTimer(intervaltimer *t) {

        itimerval       itv;
        t-&gt;getIntervals(&amp;itv);
        printf(<font color="#ff00ff">&quot;initial: </font><font color="#6a5acd">%d</font><font color="#ff00ff">sec </font><font color="#6a5acd">%d</font><font color="#ff00ff">usec   &quot;</font>,
                itv.it_value.tv_sec,itv.it_value.tv_usec);
        printf(<font color="#ff00ff">&quot;interval: </font><font color="#6a5acd">%d</font><font color="#ff00ff">sec </font><font color="#6a5acd">%d</font><font color="#ff00ff">usec</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                itv.it_interval.tv_sec,itv.it_interval.tv_usec);

        <font color="#a52a2a"><b>for</b></font> (;;) {
                timeval gtv;
                t-&gt;getTimeRemaining(&amp;gtv);
                printf(<font color="#ff00ff">&quot;time remaining: </font><font color="#6a5acd">%d</font><font color="#ff00ff">sec </font><font color="#6a5acd">%d</font><font color="#ff00ff">usec</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,gtv.tv_sec,gtv.tv_usec);
                <font color="#a52a2a"><b>if</b></font> (gtv.tv_sec==<font color="#ff00ff">0</font> &amp;&amp; gtv.tv_usec==<font color="#ff00ff">0</font>) {
                        <font color="#a52a2a"><b>break</b></font>;
                }
                snooze::macrosnooze(<font color="#ff00ff">1</font>);
        }
}

<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argc, <font color="#2e8b57"><b>char</b></font> **argv) {

        signalhandler   ah;
        ah.setHandler((<font color="#2e8b57"><b>void</b></font> *)alarmhandler);
        ah.handleSignal(<font color="#ff00ff">SIGALRM</font>);

        intervaltimer   t(ITIMER_REAL);

        t.setInitialInterval(<font color="#ff00ff">2</font>,<font color="#ff00ff">0</font>);
        t.start();
        waitForTimer(&amp;t);

        t.setInitialInterval(<font color="#ff00ff">2</font>,<font color="#ff00ff">500000</font>);
        t.start();
        waitForTimer(&amp;t);

        timeval tv;
        tv.tv_sec=<font color="#ff00ff">2</font>;
        tv.tv_usec=<font color="#ff00ff">500000</font>;
        t.setInitialInterval(&amp;tv);
        t.start();
        waitForTimer(&amp;t);

        itimerval       stv;
        stv.it_value.tv_sec=<font color="#ff00ff">2</font>;
        stv.it_value.tv_usec=<font color="#ff00ff">0</font>;
        stv.it_interval.tv_sec=<font color="#ff00ff">0</font>;
        stv.it_interval.tv_usec=<font color="#ff00ff">0</font>;
        t.setIntervals(&amp;stv);
        t.start();
        waitForTimer(&amp;t);
}
</pre>



<a name="math"></a>
<span class="heading">Using the math Class</span><br><br>

<p>...</p>


<a name="mutex"></a>
<span class="heading">Using the mutex Class</span><br><br>

<p>...</p>


<a name="process"></a>
<span class="heading">Using the process Class</span><br><br>

<p>...</p>


<a name="serialportprofile"></a>
<span class="heading">Using the serialportprofile Class</span><br><br>

<p>...</p>


<a name="snooze"></a>
<span class="heading">Using the snooze Class</span><br><br>

<p>...</p>


<a name="signal"></a>
<span class="heading">Using the Signal Classes</span><br><br>

<p>Signals allow processes to interrupt the execution of other processes.
Signal handlers allow processes to intercept and react to the signals sent to 
them.</p>

<p>Rudiments provides 3 classes for working with signals: signalset, 
signalmanager and signalhandler.

<p>A signalset is just a collection of signals.  The signalset class allows 
a programmer to build up a collection of signals.</p>

<p>The signalmanager class provides methods for sending signals, ignoring
signals, waiting for signals and examining blocked signals.</p>

<p>The signalhandler class provides methods for catching and handling 
signals.</p>

<p>Below is some code illustrating the use of all three classes.  Note that
you'll have to kill this program with a -9.</p>


<a name="sharedmemory"></a>
<span class="heading">Using the sharedmemory Class</span><br><br>

<p>Shared memory allows seperate processes to access a common block of memory.
The standard functions and structures for managing shared memory segments are 
complex.  The sharedmemory class attempts to rectify this situation.  Below is
some code illustrating the use of the sharedmemory class.</p>

<p>There are methods in the sharedmemory class that allow you to get and
set user/group ownership and permissions of a segment that are not 
documented here, but they are straightforward and rarely used.</p>

<p>This program puts some data into shared memory then goes to sleep, giving
another program time to access the segment.</p>








<pre>
<font color="#0000ff">// Copyright (c) 2001  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/sharedmemory.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/permissions.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/file.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/snooze.h&gt;</font>

<font color="#a020f0">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a020f0">#endif</font>

<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argc, <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> **argv) {

        <font color="#0000ff">// create a file called /tmp/shm</font>
        file::remove(<font color="#ff00ff">&quot;/tmp/shm&quot;</font>);
        file    fd;
        fd.create(<font color="#ff00ff">&quot;/tmp/shm&quot;</font>,permissions::evalPermString(<font color="#ff00ff">&quot;rw-------&quot;</font>));
        fd.close();

        <font color="#0000ff">// create a shared memory segment, keyed to /tmp/shm, 128 bytes long</font>
        sharedmemory    shm;
        shm.create(file::generateKey(<font color="#ff00ff">&quot;/tmp/shm&quot;</font>,<font color="#ff00ff">1</font>),<font color="#ff00ff">128</font>,
                                permissions::evalPermString(<font color="#ff00ff">&quot;rw-------&quot;</font>));

        <font color="#0000ff">// write a string into the shared memory</font>
        <font color="#2e8b57"><b>char</b></font>    *shmptr=(<font color="#2e8b57"><b>char</b></font> *)shm.getPointer();
        strcpy(shmptr,<font color="#ff00ff">&quot;This string is in shared memory.&quot;</font>);

        <font color="#0000ff">// sleep while another process accesses the shared memory...</font>
        snooze::macrosnooze(<font color="#ff00ff">1000</font>);
}
</pre>



<p>This program reads the data from shared memory.</p>








<pre>
<font color="#0000ff">// Copyright (c) 2001  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/sharedmemory.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/permissions.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/file.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdio.h&gt;</font>

<font color="#a020f0">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a020f0">#endif</font>

<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argc, <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> **argv) {

        <font color="#0000ff">// attach to a shared memory segment keyed to /tmp/shm</font>
        sharedmemory    shm;
        shm.attach(file::generateKey(<font color="#ff00ff">&quot;/tmp/shm&quot;</font>,<font color="#ff00ff">1</font>));

        <font color="#0000ff">// display the data contained in the shared memory segment</font>
        <font color="#2e8b57"><b>char</b></font>    *shmptr=(<font color="#2e8b57"><b>char</b></font> *)shm.getPointer();
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,shmptr);
}
</pre>



<a name="semaphoreset"></a>
<span class="heading">Using the semaphoreset Class</span><br><br>

<p>Semaphores allow seperate processes or threads to synchronize activities.
The standard functions and structures for managing semaphores are complex.  
The sempahoreset class attempts to rectify this situation.  Below is some code
illustrating the use of the semaphoreset class.</p>

<p>There are methods in the semaphoreset class that allow you to get and
set user/group ownership and permissions of a semaphore set that are not 
documented here, but they are straightforward and rarely used.</p>

<p>The first program prints out 1 and 3, the second program prints out 2 and 4.
They use a set of 2 semaphores to synchronize these activities.  No matter
what order the programs are started in, they will always print out 

<p>1<br>2<br>3<br>4<br>1<br>2<br>3<br>4<br>etc.</p>

<p>These programs must both be run to the background.</p>








<pre>
<font color="#0000ff">// Copyright (c) 2001  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/semaphoreset.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/file.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/permissions.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdio.h&gt;</font>

<font color="#a020f0">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a020f0">#endif</font>


<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argc, <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> **argv) {

        <font color="#0000ff">// create a file called /tmp/sem</font>
        file::remove(<font color="#ff00ff">&quot;/tmp/sem&quot;</font>);
        file    fd;
        fd.create(<font color="#ff00ff">&quot;/tmp/sem&quot;</font>,permissions::evalPermString(<font color="#ff00ff">&quot;rw-------&quot;</font>));
        fd.close();

        <font color="#0000ff">// Create a semaphore set keyed to /tmp/sem containing 2 individual</font>
        <font color="#0000ff">// semaphores.  Initialize them to 0 and 1 respectively.</font>
        <font color="#2e8b57"><b>int</b></font>     vals[<font color="#ff00ff">2</font>]={<font color="#ff00ff">0</font>,<font color="#ff00ff">1</font>};
        semaphoreset    sem;
        sem.create(file::generateKey(<font color="#ff00ff">&quot;/tmp/sem&quot;</font>,<font color="#ff00ff">1</font>),
                        permissions::evalPermString(<font color="#ff00ff">&quot;rw-------&quot;</font>),<font color="#ff00ff">2</font>,vals);

        <font color="#0000ff">// loop 10 times, printing 2 and 4, synchronizing with another process</font>
        <font color="#0000ff">// using the semaphores.</font>
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> i=<font color="#ff00ff">0</font>; i&lt;<font color="#ff00ff">10</font>; i++) {
                sem.wait(<font color="#ff00ff">0</font>);
                printf(<font color="#ff00ff">&quot;2</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
                sem.signal(<font color="#ff00ff">1</font>);

                sem.wait(<font color="#ff00ff">0</font>);
                printf(<font color="#ff00ff">&quot;4</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
                sem.signal(<font color="#ff00ff">1</font>);
        }
}
</pre>










<pre>
<font color="#0000ff">// Copyright (c) 2001  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/semaphoreset.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/permissions.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/file.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdio.h&gt;</font>

<font color="#a020f0">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a020f0">#endif</font>

<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argc, <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> **argv) {

        <font color="#0000ff">// attach to the semaphore set keyed to /tmp/sem containing 2 semaphores</font>
        semaphoreset    sem;
        sem.attach(file::generateKey(<font color="#ff00ff">&quot;/tmp/sem&quot;</font>,<font color="#ff00ff">1</font>),<font color="#ff00ff">2</font>);

        <font color="#0000ff">// loop 10 times, printing 1 and 2, synchronizing with another process</font>
        <font color="#0000ff">// using the semaphores</font>
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> i=<font color="#ff00ff">0</font>; i&lt;<font color="#ff00ff">10</font>; i++) {
                sem.wait(<font color="#ff00ff">1</font>);
                printf(<font color="#ff00ff">&quot;1</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
                sem.signal(<font color="#ff00ff">0</font>);

                sem.wait(<font color="#ff00ff">1</font>);
                printf(<font color="#ff00ff">&quot;3</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
                sem.signal(<font color="#ff00ff">0</font>);
        }

        file::remove(<font color="#ff00ff">&quot;/tmp/sem&quot;</font>);
}
</pre>



<a name="memorymap"></a>
<span class="heading">Using the memorymap Class</span><br><br>

<p>...</p>


<a name="memorypool"></a>
<span class="heading">Using the memorypool Class</span><br><br>

<p>The memorypool class implements a pool of memory that starts with an
initial buffer and grows dynamically as needed.  Each time the pool is freed,
the dynamic buffers are deallocated.  After a configurable number of free's,
the initial buffer is resized to the average amount of memory that was
requested between free's since the last time it resized.</p>

<p>The memorypool class is especially useful for applications that do the same
task over and over where varying amounts of memory are required during each
iteration.  The class is particularly efficient in cases where memory
requirements are fairly constant between iterations with sporadic requirements
for lots of memory or where the memory requirements steadily get larger or 
smaller across iterations.</p>

<p>Using a memorypool can be faster than allocating memory on demand, then
deallocating it later and more efficient than using static buffers that are
large enough to contain the largest possible data.</p>

<p>The following code connects to a server on the local machine and reads
variable/value pairs from it.</p>








<pre>
<font color="#0000ff">// Copyright (c) 2002  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/memorypool.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdio.h&gt;</font>

<font color="#a020f0">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a020f0">#endif</font>

<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argc, <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> **argv) {

        memorypool      *mp=<font color="#a52a2a"><b>new</b></font> memorypool(<font color="#ff00ff">32</font>,<font color="#ff00ff">16</font>,<font color="#ff00ff">10</font>);

        printf(<font color="#ff00ff">&quot;first run...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> i=<font color="#ff00ff">0</font>; i&lt;<font color="#ff00ff">20</font>; i++) {
                <font color="#2e8b57"><b>char</b></font>  *segment=(<font color="#2e8b57"><b>char</b></font> *)mp-&gt;malloc(<font color="#ff00ff">6</font>);
                <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> j=<font color="#ff00ff">0</font>; j&lt;<font color="#ff00ff">6</font>; j++) {
                        segment[j]=(<font color="#2e8b57"><b>char</b></font>)<font color="#ff00ff">'a'</font>+i;
                }
        }
        mp-&gt;print();

        printf(<font color="#ff00ff">&quot;free...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        mp-&gt;free();
        mp-&gt;print();

        printf(<font color="#ff00ff">&quot;second run...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        <font color="#2e8b57"><b>char</b></font>   *segment=(<font color="#2e8b57"><b>char</b></font> *)mp-&gt;malloc(<font color="#ff00ff">40</font>);
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> j=<font color="#ff00ff">0</font>; j&lt;<font color="#ff00ff">40</font>; j++) {
                segment[j]=<font color="#ff00ff">'z'</font>;
        }
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> i=<font color="#ff00ff">0</font>; i&lt;<font color="#ff00ff">20</font>; i++) {
                <font color="#2e8b57"><b>char</b></font>  *segment=(<font color="#2e8b57"><b>char</b></font> *)mp-&gt;malloc(<font color="#ff00ff">6</font>);
                <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> j=<font color="#ff00ff">0</font>; j&lt;<font color="#ff00ff">6</font>; j++) {
                        segment[j]=(<font color="#2e8b57"><b>char</b></font>)<font color="#ff00ff">'a'</font>+i;
                }
        }
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> i=<font color="#ff00ff">0</font>; i&lt;<font color="#ff00ff">20</font>; i++) {
                <font color="#2e8b57"><b>char</b></font>  *segment=(<font color="#2e8b57"><b>char</b></font> *)mp-&gt;malloc(<font color="#ff00ff">2</font>);
                <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> j=<font color="#ff00ff">0</font>; j&lt;<font color="#ff00ff">6</font>; j++) {
                        segment[j]=(<font color="#2e8b57"><b>char</b></font>)<font color="#ff00ff">'A'</font>+i;
                }
        }
        mp-&gt;print();

        printf(<font color="#ff00ff">&quot;free...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        mp-&gt;free();
        mp-&gt;print();

        printf(<font color="#ff00ff">&quot;short/long/float/double...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        <font color="#2e8b57"><b>short</b></font>  *sp=(<font color="#2e8b57"><b>short</b></font> *)mp-&gt;malloc(<font color="#a52a2a"><b>sizeof</b></font>(<font color="#2e8b57"><b>short</b></font>));
        <font color="#2e8b57"><b>long</b></font>   *lp=(<font color="#2e8b57"><b>long</b></font> *)mp-&gt;malloc(<font color="#a52a2a"><b>sizeof</b></font>(<font color="#2e8b57"><b>long</b></font>));
        <font color="#2e8b57"><b>float</b></font>  *fp=(<font color="#2e8b57"><b>float</b></font> *)mp-&gt;malloc(<font color="#a52a2a"><b>sizeof</b></font>(<font color="#2e8b57"><b>float</b></font>));
        <font color="#2e8b57"><b>double</b></font> *dp=(<font color="#2e8b57"><b>double</b></font> *)mp-&gt;malloc(<font color="#a52a2a"><b>sizeof</b></font>(<font color="#2e8b57"><b>double</b></font>));
        *sp=<font color="#ff00ff">1</font>;
        *lp=<font color="#ff00ff">1</font>;
        *fp=<font color="#ff00ff">1.1</font>;
        *dp=<font color="#ff00ff">1.1</font>;

        printf(<font color="#ff00ff">&quot;sp: </font><font color="#6a5acd">%d</font><font color="#ff00ff">  lp: </font><font color="#6a5acd">%ld</font><font color="#ff00ff"> &quot;</font>,*sp,*lp);
        printf(<font color="#ff00ff">&quot;fp: </font><font color="#6a5acd">%f</font><font color="#ff00ff">  dp: </font><font color="#6a5acd">%f</font><font color="#ff00ff"> </font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,*fp,*dp);
        mp-&gt;print();

        printf(<font color="#ff00ff">&quot;free...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        mp-&gt;free();
        mp-&gt;print();

        printf(<font color="#ff00ff">&quot;short/long/float/double arrays...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        <font color="#2e8b57"><b>short</b></font>  *spa=(<font color="#2e8b57"><b>short</b></font> *)mp-&gt;malloc(<font color="#a52a2a"><b>sizeof</b></font>(<font color="#2e8b57"><b>short</b></font>)*<font color="#ff00ff">10</font>);
        <font color="#2e8b57"><b>long</b></font>   *lpa=(<font color="#2e8b57"><b>long</b></font> *)mp-&gt;malloc(<font color="#a52a2a"><b>sizeof</b></font>(<font color="#2e8b57"><b>long</b></font>)*<font color="#ff00ff">10</font>);
        <font color="#2e8b57"><b>float</b></font>  *fpa=(<font color="#2e8b57"><b>float</b></font> *)mp-&gt;malloc(<font color="#a52a2a"><b>sizeof</b></font>(<font color="#2e8b57"><b>float</b></font>)*<font color="#ff00ff">10</font>);
        <font color="#2e8b57"><b>double</b></font> *dpa=(<font color="#2e8b57"><b>double</b></font> *)mp-&gt;malloc(<font color="#a52a2a"><b>sizeof</b></font>(<font color="#2e8b57"><b>double</b></font>)*<font color="#ff00ff">10</font>);
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> i=<font color="#ff00ff">0</font>; i&lt;<font color="#ff00ff">10</font>; i++) {
                spa[i]=i;
                lpa[i]=i;
                fpa[i]=i+((<font color="#2e8b57"><b>float</b></font>)i/<font color="#ff00ff">10.0</font>);
                dpa[i]=i+((<font color="#2e8b57"><b>float</b></font>)i/<font color="#ff00ff">10.0</font>);
        }

        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> i=<font color="#ff00ff">0</font>; i&lt;<font color="#ff00ff">10</font>; i++) {
                printf(<font color="#ff00ff">&quot;sp: </font><font color="#6a5acd">%d</font><font color="#ff00ff">  lp: </font><font color="#6a5acd">%ld</font><font color="#ff00ff"> &quot;</font>,spa[i],lpa[i]);
                printf(<font color="#ff00ff">&quot;fp: </font><font color="#6a5acd">%f</font><font color="#ff00ff">  dp: </font><font color="#6a5acd">%f</font><font color="#ff00ff"> </font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,fpa[i],dpa[i]);
        }
        mp-&gt;print();

        printf(<font color="#ff00ff">&quot;free...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        mp-&gt;free();
        mp-&gt;print();

        <font color="#a52a2a"><b>delete</b></font> mp;


        mp=<font color="#a52a2a"><b>new</b></font> memorypool(<font color="#ff00ff">32</font>,<font color="#ff00ff">16</font>,<font color="#ff00ff">10</font>);
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> i=<font color="#ff00ff">0</font>; i&lt;<font color="#ff00ff">10</font>; i++) {
                <font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>long</b></font> total=<font color="#ff00ff">0</font>;
                <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>long</b></font> j=<font color="#ff00ff">0</font>; j&lt;<font color="#ff00ff">11</font>; j++) {
                        total=total+i+j;
                        mp-&gt;malloc(i+j);
                        mp-&gt;free();
                }
                printf(<font color="#ff00ff">&quot;should be: </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,total/<font color="#ff00ff">11</font>);
                mp-&gt;print();
        }

        <font color="#a52a2a"><b>delete</b></font> mp;
}
</pre>



<a name="variablebuffer"></a>
<span class="heading">Using the variablebuffer Class</span><br><br>

<p>The variablebuffer class allows you to manipulate a buffer of arbitrary
length containing binary data.  You can append data to a variablebuffer or
write data at arbitrary positions in the buffer.</p>








<pre>
<font color="#0000ff">// Copyright (c) 2002  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/variablebuffer.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdio.h&gt;</font>

<font color="#a020f0">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a020f0">#endif</font>

<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argc, <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> **argv) {

        <font color="#0000ff">// create a buffer</font>
        variablebuffer  *vb=<font color="#a52a2a"><b>new</b></font> variablebuffer(<font color="#ff00ff">10</font>,<font color="#ff00ff">10</font>);

        <font color="#0000ff">// append some string sequences to the buffer and display the contents</font>
        <font color="#0000ff">// of the buffer byte by byte</font>
        vb-&gt;append((<font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>char</b></font> *)<font color="#ff00ff">&quot;12345&quot;</font>,<font color="#ff00ff">5</font>);
        vb-&gt;append((<font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>char</b></font> *)<font color="#ff00ff">&quot;12345&quot;</font>,<font color="#ff00ff">5</font>);
        vb-&gt;append((<font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>char</b></font> *)<font color="#ff00ff">&quot;12345&quot;</font>,<font color="#ff00ff">5</font>);
        vb-&gt;append((<font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>char</b></font> *)<font color="#ff00ff">&quot;12345&quot;</font>,<font color="#ff00ff">5</font>);
        vb-&gt;append((<font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>char</b></font> *)<font color="#ff00ff">&quot;12345&quot;</font>,<font color="#ff00ff">5</font>);
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>size_t</b></font> i=<font color="#ff00ff">0</font>; i&lt;vb-&gt;getSize(); i++) {
                printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%c</font><font color="#ff00ff">&quot;</font>,vb-&gt;getBuffer()[i]);
        }
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);


        <font color="#0000ff">// write 66666 to the buffer at position 0 and display it's contents</font>
        <font color="#0000ff">// byte by byte (the first 5 bytes should be overwritten)</font>
        vb-&gt;setPosition(<font color="#ff00ff">0</font>);
        vb-&gt;write((<font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>char</b></font> *)<font color="#ff00ff">&quot;66666&quot;</font>,<font color="#ff00ff">5</font>);
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>size_t</b></font> i=<font color="#ff00ff">0</font>; i&lt;vb-&gt;getSize(); i++) {
                printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%c</font><font color="#ff00ff">&quot;</font>,vb-&gt;getBuffer()[i]);
        }
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);


        <font color="#0000ff">// write 66666 to the buffer at position 30 and display it's contents</font>
        <font color="#0000ff">// byte by byte, displaying nonprintable characters as .'s</font>
        <font color="#0000ff">// (there should be a gap in the buffer now containing random data)</font>
        vb-&gt;setPosition(<font color="#ff00ff">30</font>);
        vb-&gt;write((<font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>char</b></font> *)<font color="#ff00ff">&quot;66666&quot;</font>,<font color="#ff00ff">5</font>);
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>size_t</b></font> i=<font color="#ff00ff">0</font>; i&lt;vb-&gt;getSize(); i++) {
                <font color="#a52a2a"><b>if</b></font> (vb-&gt;getBuffer()[i]&gt;=<font color="#ff00ff">' '</font> &amp;&amp; vb-&gt;getBuffer()[i]&lt;=<font color="#ff00ff">'~'</font>) {
                        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%c</font><font color="#ff00ff">&quot;</font>,vb-&gt;getBuffer()[i]);
                } <font color="#a52a2a"><b>else</b></font> {
                        printf(<font color="#ff00ff">&quot;.&quot;</font>);
                }
        }
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);


        <font color="#0000ff">// set the current position to 50</font>
        vb-&gt;setPosition(<font color="#ff00ff">50</font>);

        <font color="#0000ff">// Append 12345 to the buffer and display it's contents byte by byte,</font>
        <font color="#0000ff">// displaying nonprintable characters as .'s</font>
        <font color="#0000ff">// Since we used append() instead of write(), the data should not be</font>
        <font color="#0000ff">// written at position 50, but rather just at the current end of</font>
        <font color="#0000ff">// the buffer.</font>
        vb-&gt;append((<font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>char</b></font> *)<font color="#ff00ff">&quot;12345&quot;</font>,<font color="#ff00ff">5</font>);
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>size_t</b></font> i=<font color="#ff00ff">0</font>; i&lt;vb-&gt;getSize(); i++) {
                <font color="#a52a2a"><b>if</b></font> (vb-&gt;getBuffer()[i]&gt;=<font color="#ff00ff">' '</font> &amp;&amp; vb-&gt;getBuffer()[i]&lt;=<font color="#ff00ff">'~'</font>) {
                        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%c</font><font color="#ff00ff">&quot;</font>,vb-&gt;getBuffer()[i]);
                } <font color="#a52a2a"><b>else</b></font> {
                        printf(<font color="#ff00ff">&quot;.&quot;</font>);
                }
        }
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        <font color="#0000ff">// Write 12345 to the buffer at the current position and display it's</font>
        <font color="#0000ff">// contents byte by byte, displaying nonprintable characters as .'s</font>
        <font color="#0000ff">// The current position should just be the end of the buffer, since</font>
        <font color="#0000ff">// we just appended.  So calling write() here is equivalent to calling</font>
        <font color="#0000ff">// append.</font>
        vb-&gt;write((<font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>char</b></font> *)<font color="#ff00ff">&quot;12345&quot;</font>,<font color="#ff00ff">5</font>);
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>size_t</b></font> i=<font color="#ff00ff">0</font>; i&lt;vb-&gt;getSize(); i++) {
                <font color="#a52a2a"><b>if</b></font> (vb-&gt;getBuffer()[i]&gt;=<font color="#ff00ff">' '</font> &amp;&amp; vb-&gt;getBuffer()[i]&lt;=<font color="#ff00ff">'~'</font>) {
                        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%c</font><font color="#ff00ff">&quot;</font>,vb-&gt;getBuffer()[i]);
                } <font color="#a52a2a"><b>else</b></font> {
                        printf(<font color="#ff00ff">&quot;.&quot;</font>);
                }
        }
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);


        <font color="#0000ff">// read 4 bytes from position 0 of the buffer and display them</font>
        <font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>char</b></font>  buffer[<font color="#ff00ff">5</font>];
        buffer[<font color="#ff00ff">4</font>]=(<font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>char</b></font>)<font color="#ff00ff">NULL</font>;
        vb-&gt;setPosition(<font color="#ff00ff">0</font>);
        <font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>long</b></font>  sizeread=vb-&gt;read(buffer,<font color="#ff00ff">4</font>);
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%ld</font><font color="#ff00ff">: &quot;</font>,sizeread);
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>long</b></font> i=<font color="#ff00ff">0</font>; i&lt;sizeread; i++) {
                printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%c</font><font color="#ff00ff">&quot;</font>,buffer[i]);
        }
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        <font color="#0000ff">// read 4 bytes from position 5 of the buffer and display them</font>
        vb-&gt;setPosition(<font color="#ff00ff">5</font>);
        sizeread=vb-&gt;read(buffer,<font color="#ff00ff">4</font>);
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%ld</font><font color="#ff00ff">: &quot;</font>,sizeread);
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>long</b></font> i=<font color="#ff00ff">0</font>; i&lt;sizeread; i++) {
                printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%c</font><font color="#ff00ff">&quot;</font>,buffer[i]);
        }
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        <font color="#0000ff">// read 4 bytes from position 60 of the buffer and display them</font>
        <font color="#0000ff">// (since this is off of the end of the buffer, nothing should be</font>
        <font color="#0000ff">// displayed)</font>
        vb-&gt;setPosition(<font color="#ff00ff">60</font>);
        sizeread=vb-&gt;read(buffer,<font color="#ff00ff">4</font>);
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%ld</font><font color="#ff00ff">: &quot;</font>,sizeread);
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>unsigned</b></font> <font color="#2e8b57"><b>long</b></font> i=<font color="#ff00ff">0</font>; i&lt;sizeread; i++) {
                printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%c</font><font color="#ff00ff">&quot;</font>,buffer[i]);
        }
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);


        <font color="#a52a2a"><b>delete</b></font> vb;
}
</pre>



<a name="stringbuffer"></a>
<span class="heading">Using the stringbuffer Class</span><br><br>

<p>The stringbuffer class allows you to manipulate strings of arbitrary length.
You can append data to a stringbuffer or write data at arbitrary positions in
the buffer.</p>








<pre>
<font color="#0000ff">// Copyright (c) 2003  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/charstring.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdio.h&gt;</font>

<font color="#a020f0">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a020f0">#endif</font>


<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argc, <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> **argv) {

        <font color="#0000ff">// create a new string 50 bytes long</font>
        <font color="#2e8b57"><b>char</b></font>   s[<font color="#ff00ff">50</font>];


        <font color="#0000ff">// set every byte in the string to NULL</font>
        charstring::zero(s,<font color="#ff00ff">50</font>);


        <font color="#0000ff">// Append &quot;hello there dave&quot; to the string and display it.</font>
        <font color="#0000ff">// The 3rd call to append() only appends the first 4 bytes of &quot;dave !!!&quot;</font>
        charstring::append(s,<font color="#ff00ff">&quot;hello &quot;</font>);
        charstring::append(s,<font color="#ff00ff">&quot;there &quot;</font>);
        charstring::append(s,<font color="#ff00ff">&quot;dave !!!&quot;</font>,<font color="#ff00ff">4</font>);
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\&quot;</font><font color="#6a5acd">%s</font><font color="#6a5acd">\&quot;\n</font><font color="#ff00ff">&quot;</font>,s);


        <font color="#0000ff">// Replace the contents of the string and display it over and over.</font>
        <font color="#0000ff">// Note that the 2nd and 4th call to copy() only copy part of the</font>
        <font color="#0000ff">// string passed into them.</font>
        charstring::copy(s,<font color="#ff00ff">&quot;what's &quot;</font>);
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\&quot;</font><font color="#6a5acd">%s</font><font color="#6a5acd">\&quot;\n</font><font color="#ff00ff">&quot;</font>,s);
        charstring::copy(s,<font color="#ff00ff">&quot;up !!!&quot;</font>,<font color="#ff00ff">2</font>);
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\&quot;</font><font color="#6a5acd">%s</font><font color="#6a5acd">\&quot;\n</font><font color="#ff00ff">&quot;</font>,s);
        charstring::copy(s,<font color="#ff00ff">2</font>,<font color="#ff00ff">&quot; !!!&quot;</font>);
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\&quot;</font><font color="#6a5acd">%s</font><font color="#6a5acd">\&quot;\n</font><font color="#ff00ff">&quot;</font>,s);
        charstring::copy(s,<font color="#ff00ff">6</font>,<font color="#ff00ff">&quot;!!!!!!&quot;</font>,<font color="#ff00ff">1</font>);
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\&quot;</font><font color="#6a5acd">%s</font><font color="#6a5acd">\&quot;\n</font><font color="#ff00ff">&quot;</font>,s);


        <font color="#0000ff">// clear the string again.</font>
        charstring::zero(s,<font color="#ff00ff">50</font>);


        <font color="#0000ff">// Append &quot;hello&quot; to the string.</font>
        charstring::append(s,<font color="#ff00ff">&quot;hello&quot;</font>);

        <font color="#0000ff">// perform several comparisons, all of which should return 0</font>
        printf(<font color="#ff00ff">&quot;compare: </font><font color="#6a5acd">%d</font><font color="#ff00ff">=0</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,charstring::compare(s,<font color="#ff00ff">&quot;hello&quot;</font>));
        printf(<font color="#ff00ff">&quot;compare: </font><font color="#6a5acd">%d</font><font color="#ff00ff">=0</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,charstring::compare(s,<font color="#ff00ff">&quot;hello&quot;</font>,<font color="#ff00ff">3</font>));
        printf(<font color="#ff00ff">&quot;compare: </font><font color="#6a5acd">%d</font><font color="#ff00ff">=0</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,charstring::compareIgnoringCase(s,<font color="#ff00ff">&quot;HELLO&quot;</font>));
        printf(<font color="#ff00ff">&quot;compare: </font><font color="#6a5acd">%d</font><font color="#ff00ff">=0</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,charstring::compareIgnoringCase(s,<font color="#ff00ff">&quot;HELLO&quot;</font>,<font color="#ff00ff">3</font>));

        <font color="#0000ff">// perform several contains() comparisons</font>
        printf(<font color="#ff00ff">&quot;findFirst: </font><font color="#6a5acd">\&quot;</font><font color="#6a5acd">%s</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">=llo</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,charstring::findFirst(s,<font color="#ff00ff">&quot;llo&quot;</font>));
        printf(<font color="#ff00ff">&quot;contains: </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,charstring::contains(s,<font color="#ff00ff">&quot;llo&quot;</font>));
        printf(<font color="#ff00ff">&quot;findFirst: </font><font color="#6a5acd">\&quot;</font><font color="#6a5acd">%s</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">=llo</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,charstring::findFirst(s,<font color="#ff00ff">'l'</font>));
        printf(<font color="#ff00ff">&quot;contains: </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,charstring::contains(s,<font color="#ff00ff">&quot;llo&quot;</font>));



        <font color="#0000ff">// duplicate the string and display the duplicated string</font>
        <font color="#2e8b57"><b>char</b></font>   *hello=charstring::duplicate(s);
        <font color="#2e8b57"><b>char</b></font>   *ell=charstring::subString(hello,<font color="#ff00ff">1</font>,<font color="#ff00ff">3</font>);
        <font color="#2e8b57"><b>char</b></font>   *lle=charstring::subString(hello,<font color="#ff00ff">3</font>,<font color="#ff00ff">1</font>);
        printf(<font color="#ff00ff">&quot;hello: </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,hello);
        printf(<font color="#ff00ff">&quot;ell: </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,ell);
        printf(<font color="#ff00ff">&quot;ell: </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,lle);

        <font color="#0000ff">// make sure to clean up what duplicate() returns</font>
        <font color="#a52a2a"><b>delete</b></font>[] hello;
        <font color="#a52a2a"><b>delete</b></font>[] ell;
        <font color="#a52a2a"><b>delete</b></font>[] lle;


        <font color="#0000ff">// split</font>
        <font color="#2e8b57"><b>char</b></font>           **list;
        <font color="#2e8b57"><b>uint64_t</b></font>       listlength;
        charstring::split(<font color="#ff00ff">&quot;hello||hi||bye||goodbye&quot;</font>,<font color="#ff00ff">&quot;||&quot;</font>,<font color="#ff00ff">false</font>,
                                                &amp;list,&amp;listlength);
        printf(<font color="#ff00ff">&quot;split(</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">hello||hi||bye||goodbye</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">,</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">||</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">)</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%lld</font><font color="#ff00ff"> items</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,listlength);
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>uint64_t</b></font> i=<font color="#ff00ff">0</font>; i&lt;listlength; i++) {
                printf(<font color="#ff00ff">&quot;      </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,list[i]);
                <font color="#a52a2a"><b>delete</b></font>[] list[i];
        }
        <font color="#a52a2a"><b>delete</b></font>[] list;

        charstring::split(<font color="#ff00ff">&quot;hello||hi||bye||goodbye||&quot;</font>,<font color="#ff00ff">&quot;||&quot;</font>,<font color="#ff00ff">false</font>,
                                                &amp;list,&amp;listlength);
        printf(<font color="#ff00ff">&quot;split(</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">hello||hi||bye||goodbye||</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">,</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">||</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">)</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%lld</font><font color="#ff00ff"> items</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,listlength);
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>uint64_t</b></font> i=<font color="#ff00ff">0</font>; i&lt;listlength; i++) {
                printf(<font color="#ff00ff">&quot;      </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,list[i]);
                <font color="#a52a2a"><b>delete</b></font>[] list[i];
        }
        <font color="#a52a2a"><b>delete</b></font>[] list;

        charstring::split(<font color="#ff00ff">&quot;||hello||hi||bye||goodbye||&quot;</font>,<font color="#ff00ff">&quot;||&quot;</font>,<font color="#ff00ff">false</font>,
                                                &amp;list,&amp;listlength);
        printf(<font color="#ff00ff">&quot;split(</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">||hello||hi||bye||goodbye||</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">,</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">||</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">)</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%lld</font><font color="#ff00ff"> items</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,listlength);
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>uint64_t</b></font> i=<font color="#ff00ff">0</font>; i&lt;listlength; i++) {
                printf(<font color="#ff00ff">&quot;      </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,list[i]);
                <font color="#a52a2a"><b>delete</b></font>[] list[i];
        }
        <font color="#a52a2a"><b>delete</b></font>[] list;

        charstring::split(<font color="#ff00ff">&quot;||||hello||||hi||||bye||||goodbye||||&quot;</font>,<font color="#ff00ff">&quot;||&quot;</font>,<font color="#ff00ff">false</font>,
                                                        &amp;list,&amp;listlength);
        printf(<font color="#ff00ff">&quot;split(</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">||||hello||||hi||||bye||||goodbye||||</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">,</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">||</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">)</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%lld</font><font color="#ff00ff"> items</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,listlength);
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>uint64_t</b></font> i=<font color="#ff00ff">0</font>; i&lt;listlength; i++) {
                printf(<font color="#ff00ff">&quot;      </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,list[i]);
                <font color="#a52a2a"><b>delete</b></font>[] list[i];
        }
        <font color="#a52a2a"><b>delete</b></font>[] list;

        charstring::split(<font color="#ff00ff">&quot;||||||||||&quot;</font>,<font color="#ff00ff">&quot;||&quot;</font>,<font color="#ff00ff">false</font>,&amp;list,&amp;listlength);
        printf(<font color="#ff00ff">&quot;split(</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">||||||||||</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">,</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">||</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">)</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%lld</font><font color="#ff00ff"> items</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,listlength);
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>uint64_t</b></font> i=<font color="#ff00ff">0</font>; i&lt;listlength; i++) {
                printf(<font color="#ff00ff">&quot;      </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,list[i]);
                <font color="#a52a2a"><b>delete</b></font>[] list[i];
        }
        <font color="#a52a2a"><b>delete</b></font>[] list;

        charstring::split(<font color="#ff00ff">&quot;<a href="http://www.firstworks.com/application/app.cgi/skin/module/template.html">http://www.firstworks.com/application/app.cgi/skin/module/template.html</a>&quot;</font>,<font color="#ff00ff">&quot;/&quot;</font>,<font color="#ff00ff">false</font>,&amp;list,&amp;listlength);
        printf(<font color="#ff00ff">&quot;split(</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff"><a href="http://www.firstworks.com/application/app.cgi/skin/module/template.html">http://www.firstworks.com/application/app.cgi/skin/module/template.html</a></font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">,</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">/</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">&quot;</font>);
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%lld</font><font color="#ff00ff"> items</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,listlength);
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>uint64_t</b></font> i=<font color="#ff00ff">0</font>; i&lt;listlength; i++) {
                printf(<font color="#ff00ff">&quot;      </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,list[i]);
                <font color="#a52a2a"><b>delete</b></font>[] list[i];
        }
        <font color="#a52a2a"><b>delete</b></font>[] list;

        <font color="#2e8b57"><b>char</b></font>   str[]=<font color="#ff00ff">&quot;hello'</font><font color="#6a5acd">\&quot;\\</font><font color="#ff00ff">hello'</font><font color="#6a5acd">\&quot;\\</font><font color="#ff00ff">&quot;</font>;
        <font color="#2e8b57"><b>char</b></font>   *escapedstr=charstring::escape(str,<font color="#ff00ff">&quot;</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">'&quot;</font>);
        <font color="#2e8b57"><b>char</b></font>   *unescapedstr=charstring::unescape(escapedstr);
        printf(<font color="#ff00ff">&quot;str            : </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,str);
        printf(<font color="#ff00ff">&quot;escapedstr     : </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,escapedstr);
        printf(<font color="#ff00ff">&quot;unescapedstr   : </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,unescapedstr);
        <font color="#a52a2a"><b>delete</b></font>[] unescapedstr;
        <font color="#a52a2a"><b>delete</b></font>[] escapedstr;


        <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font>     *alphabet=<font color="#ff00ff">&quot;aabbccddeeffgghhiijjkkllmmnnooppqqrrssttuuvvwwxxyyzz&quot;</font>;
        printf(<font color="#ff00ff">&quot;lengthContainingSet(</font><font color="#6a5acd">\&quot;</font><font color="#6a5acd">%s</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">,</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">gfedcba</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">)=</font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                alphabet,charstring::lengthContainingSet(alphabet,<font color="#ff00ff">&quot;gfedcba&quot;</font>));
        printf(<font color="#ff00ff">&quot;lengthNotContainingSet(</font><font color="#6a5acd">\&quot;</font><font color="#6a5acd">%s</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">,</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">hijklmnopqrstuvwxyz</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">)=</font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                alphabet,charstring::lengthNotContainingSet(alphabet,
                                                <font color="#ff00ff">&quot;hijklmnopqrstuvwxyz&quot;</font>));


        printf(<font color="#ff00ff">&quot;findFirstOfSet(</font><font color="#6a5acd">\&quot;</font><font color="#6a5acd">%s</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">,</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">mlk</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">)=</font><font color="#6a5acd">\&quot;</font><font color="#6a5acd">%s</font><font color="#6a5acd">\&quot;\n</font><font color="#ff00ff">&quot;</font>,
                alphabet,charstring::findFirstOfSet(alphabet,<font color="#ff00ff">&quot;klm&quot;</font>));
}
</pre>



<a name="character"></a>
<span class="heading">Using the character Class</span><br><br>

<p>...</p>


<a name="charstring"></a>
<span class="heading">Using the charstring Class</span><br><br>

<p>The charstring class contains some commonly needed string manipulation and
evaluation functions.  Below is some code illustrating the use of the string
class.</p>








<pre>
<font color="#0000ff">// Copyright (c) 2001  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/charstring.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdio.h&gt;</font>

<font color="#a020f0">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a020f0">#endif</font>

<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argc, <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> **argv) {

        <font color="#0000ff">// initialize a text buffer and print it out</font>
        <font color="#2e8b57"><b>char</b></font>    buffer[<font color="#ff00ff">100</font>];
        charstring::copy(buffer,<font color="#ff00ff">&quot;     hello there buddy     &quot;</font>);
        printf(<font color="#ff00ff">&quot;!</font><font color="#6a5acd">%s</font><font color="#ff00ff">!</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,buffer);


        <font color="#0000ff">// trim the spaces off of the right hand side</font>
        charstring::rightTrim(buffer);
        printf(<font color="#ff00ff">&quot;!</font><font color="#6a5acd">%s</font><font color="#ff00ff">!</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,buffer);


        <font color="#0000ff">// trim the spaces off of the left hand side</font>
        charstring::leftTrim(buffer);
        printf(<font color="#ff00ff">&quot;!</font><font color="#6a5acd">%s</font><font color="#ff00ff">!</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,buffer);


        <font color="#0000ff">// strip the spaces out</font>
        charstring::copy(buffer,<font color="#ff00ff">&quot;   hello      there   buddy  &quot;</font>);
        charstring::strip(buffer,<font color="#ff00ff">' '</font>);
        printf(<font color="#ff00ff">&quot;!</font><font color="#6a5acd">%s</font><font color="#ff00ff">!</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,buffer);


        <font color="#0000ff">// strip the &quot;   &quot; out</font>
        charstring::copy(buffer,<font color="#ff00ff">&quot;   hello       there  buddy  &quot;</font>);
        charstring::strip(buffer,<font color="#ff00ff">&quot;   &quot;</font>);
        printf(<font color="#ff00ff">&quot;!</font><font color="#6a5acd">%s</font><font color="#ff00ff">!</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,buffer);


        <font color="#0000ff">// convert buffer to uppercase</font>
        charstring::upper(buffer);
        printf(<font color="#ff00ff">&quot;!</font><font color="#6a5acd">%s</font><font color="#ff00ff">!</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,buffer);


        <font color="#0000ff">// convert buffer to lowercase</font>
        charstring::lower(buffer);
        printf(<font color="#ff00ff">&quot;!</font><font color="#6a5acd">%s</font><font color="#ff00ff">!</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,buffer);


        <font color="#0000ff">// http escape the buffer</font>
        <font color="#2e8b57"><b>char</b></font>    *escbuffer=charstring::httpEscape(<font color="#ff00ff">&quot;!@#$%^&amp;*()hello-+&quot;</font>);
        printf(<font color="#ff00ff">&quot;!@#$</font><font color="#6a5acd">\\</font><font color="#ff00ff">%^&amp;*()hello-+  http escaped is  </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,escbuffer);
        <font color="#a52a2a"><b>delete</b></font> escbuffer;


        <font color="#0000ff">// evaluate a string to see if it's a number</font>
        <font color="#a52a2a"><b>if</b></font> (charstring::isNumber(<font color="#ff00ff">&quot;-100.5&quot;</font>)) {
                printf(<font color="#ff00ff">&quot;-100.5 is a number</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        }
        <font color="#a52a2a"><b>if</b></font> (!charstring::isNumber(<font color="#ff00ff">&quot;-100.5.10&quot;</font>)) {
                printf(<font color="#ff00ff">&quot;-100.5.10 is not a number</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        }


        <font color="#0000ff">// evaluate a string to see if it's an integer</font>
        <font color="#a52a2a"><b>if</b></font> (charstring::isInteger(<font color="#ff00ff">&quot;-100&quot;</font>)) {
                printf(<font color="#ff00ff">&quot;-100 is an integer</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        }
        <font color="#a52a2a"><b>if</b></font> (!charstring::isInteger(<font color="#ff00ff">&quot;-100.5&quot;</font>)) {
                printf(<font color="#ff00ff">&quot;-100.5.10 is not an integer</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        }


        <font color="#0000ff">// create a new string containing text surrounded by spaces</font>
        <font color="#2e8b57"><b>char</b></font>   hello[<font color="#ff00ff">16</font>];
        charstring::copy(hello,<font color="#ff00ff">&quot;     hello     &quot;</font>);
        printf(<font color="#ff00ff">&quot;|</font><font color="#6a5acd">%s</font><font color="#ff00ff">|</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,hello);

        <font color="#0000ff">// left justify the text</font>
        charstring::leftJustify(hello,<font color="#ff00ff">15</font>);
        printf(<font color="#ff00ff">&quot;|</font><font color="#6a5acd">%s</font><font color="#ff00ff">|</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,hello);

        <font color="#0000ff">// right justify the text</font>
        charstring::rightJustify(hello,<font color="#ff00ff">15</font>);
        printf(<font color="#ff00ff">&quot;|</font><font color="#6a5acd">%s</font><font color="#ff00ff">|</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,hello);


        <font color="#0000ff">// center the text over and over...</font>
        charstring::copy(hello,<font color="#ff00ff">&quot;hello          &quot;</font>);
        charstring::center(hello,<font color="#ff00ff">15</font>);
        printf(<font color="#ff00ff">&quot;|</font><font color="#6a5acd">%s</font><font color="#ff00ff">|</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,hello);
        charstring::copy(hello,<font color="#ff00ff">&quot; hello         &quot;</font>);
        charstring::center(hello,<font color="#ff00ff">15</font>);
        printf(<font color="#ff00ff">&quot;|</font><font color="#6a5acd">%s</font><font color="#ff00ff">|</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,hello);
        charstring::copy(hello,<font color="#ff00ff">&quot;  hello        &quot;</font>);
        charstring::center(hello,<font color="#ff00ff">15</font>);
        printf(<font color="#ff00ff">&quot;|</font><font color="#6a5acd">%s</font><font color="#ff00ff">|</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,hello);
        charstring::copy(hello,<font color="#ff00ff">&quot;   hello       &quot;</font>);
        charstring::center(hello,<font color="#ff00ff">15</font>);
        printf(<font color="#ff00ff">&quot;|</font><font color="#6a5acd">%s</font><font color="#ff00ff">|</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,hello);
        charstring::copy(hello,<font color="#ff00ff">&quot;    hello      &quot;</font>);
        charstring::center(hello,<font color="#ff00ff">15</font>);
        printf(<font color="#ff00ff">&quot;|</font><font color="#6a5acd">%s</font><font color="#ff00ff">|</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,hello);
        charstring::copy(hello,<font color="#ff00ff">&quot;     hello     &quot;</font>);
        charstring::center(hello,<font color="#ff00ff">15</font>);
        printf(<font color="#ff00ff">&quot;|</font><font color="#6a5acd">%s</font><font color="#ff00ff">|</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,hello);
        charstring::copy(hello,<font color="#ff00ff">&quot;      hello    &quot;</font>);
        charstring::center(hello,<font color="#ff00ff">15</font>);
        printf(<font color="#ff00ff">&quot;|</font><font color="#6a5acd">%s</font><font color="#ff00ff">|</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,hello);
        charstring::copy(hello,<font color="#ff00ff">&quot;       hello   &quot;</font>);
        charstring::center(hello,<font color="#ff00ff">15</font>);
        printf(<font color="#ff00ff">&quot;|</font><font color="#6a5acd">%s</font><font color="#ff00ff">|</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,hello);
        charstring::copy(hello,<font color="#ff00ff">&quot;        hello  &quot;</font>);
        charstring::center(hello,<font color="#ff00ff">15</font>);
        printf(<font color="#ff00ff">&quot;|</font><font color="#6a5acd">%s</font><font color="#ff00ff">|</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,hello);
        charstring::copy(hello,<font color="#ff00ff">&quot;         hello &quot;</font>);
        charstring::center(hello,<font color="#ff00ff">15</font>);
        printf(<font color="#ff00ff">&quot;|</font><font color="#6a5acd">%s</font><font color="#ff00ff">|</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,hello);
        charstring::copy(hello,<font color="#ff00ff">&quot;          hello&quot;</font>);
        charstring::center(hello,<font color="#ff00ff">15</font>);
        printf(<font color="#ff00ff">&quot;|</font><font color="#6a5acd">%s</font><font color="#ff00ff">|</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,hello);


        <font color="#0000ff">// print the number of bytes necessary to store each number as a string</font>
        printf(<font color="#ff00ff">&quot;size of 1 is: </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,charstring::integerLength((<font color="#2e8b57"><b>long</b></font>)<font color="#ff00ff">1</font>));
        printf(<font color="#ff00ff">&quot;size of 10 is: </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,charstring::integerLength((<font color="#2e8b57"><b>long</b></font>)<font color="#ff00ff">10</font>));
        printf(<font color="#ff00ff">&quot;size of 100 is: </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,charstring::integerLength((<font color="#2e8b57"><b>long</b></font>)<font color="#ff00ff">100</font>));
        printf(<font color="#ff00ff">&quot;size of 1000 is: </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,charstring::integerLength((<font color="#2e8b57"><b>long</b></font>)<font color="#ff00ff">1000</font>));
        printf(<font color="#ff00ff">&quot;size of -1 is: </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,charstring::integerLength((<font color="#2e8b57"><b>long</b></font>)-<font color="#ff00ff">1</font>));
        printf(<font color="#ff00ff">&quot;size of -10 is: </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,charstring::integerLength((<font color="#2e8b57"><b>long</b></font>)-<font color="#ff00ff">10</font>));
        printf(<font color="#ff00ff">&quot;size of -100 is: </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,charstring::integerLength((<font color="#2e8b57"><b>long</b></font>)-<font color="#ff00ff">100</font>));
        printf(<font color="#ff00ff">&quot;size of -1000 is: </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,charstring::integerLength((<font color="#2e8b57"><b>long</b></font>)-<font color="#ff00ff">1000</font>));
}
</pre>



<a name="rawbuffer"></a>
<span class="heading">Using the rawbuffer Class</span><br><br>

<p>...</p>


<a name="xmldom"></a>
<span class="heading">Using the xmldom Class</span><br><br>

<p>The xmldom and xmldomnode classes provide a framework for DOM parsing of
XML documents.  The xmldom class provides methods for parsing the document
and accessing it's root node.  Each node of the document is represented by an
instance of the xmldomnode class.  The xmldomnode class provides methods for
accessing a node's data, attributes, child nodes, parent nodes and sibling
nodes.  Since the xmldom class creates a representation of the XML document
in memory, it should not be used to process arbitrarily large documents which
could exhaust system memory.</p>

<p>The following XML file contains an address book.</p>

<PRE>
<font color="#0000f8">&lt;?</font><font color="#288850"><b>xml</b></font><font color="#288850"><b> </b></font><font color="#288850"><b>version</b></font>=<font color="#f800f8">&quot;1.0&quot;</font><font color="#0000f8">?&gt;</font>
<font color="#008888">&lt;!</font><font color="#a02828"><b>DOCTYPE</b></font> instances <font color="#a02828"><b>SYSTEM</b></font> <font color="#f800f8">&quot;adbook.dtd&quot;</font><font color="#008888">&gt;</font>
<font color="#008888">&lt;</font><font color="#008888">addressbook</font><font color="#008888">&gt;</font>
        <font color="#008888">&lt;</font><font color="#008888">person</font><font color="#008888"> </font><font color="#288850"><b>firstname</b></font>=<font color="#f800f8">&quot;David&quot;</font><font color="#008888"> </font><font color="#288850"><b>middlename</b></font>=<font color="#f800f8">&quot;Lee&quot;</font><font color="#008888"> </font><font color="#288850"><b>lastname</b></font>=<font color="#f800f8">&quot;Muse&quot;</font><font color="#008888">&gt;</font>
                <font color="#008888">&lt;</font><font color="#008888">phones</font><font color="#008888">&gt;</font>
                        <font color="#008888">&lt;</font><font color="#008888">phone</font><font color="#008888"> </font><font color="#288850"><b>location</b></font>=<font color="#f800f8">&quot;home&quot;</font><font color="#008888"> </font><font color="#288850"><b>number</b></font>=<font color="#f800f8">&quot;1-222-333-4444&quot;</font><font color="#008888">/&gt;</font>
                        <font color="#008888">&lt;</font><font color="#008888">phone</font><font color="#008888"> </font><font color="#288850"><b>location</b></font>=<font color="#f800f8">&quot;work&quot;</font><font color="#008888"> </font><font color="#288850"><b>number</b></font>=<font color="#f800f8">&quot;1-333-444-5555&quot;</font><font color="#008888">/&gt;</font>
                        <font color="#008888">&lt;</font><font color="#008888">phone</font><font color="#008888"> </font><font color="#288850"><b>location</b></font>=<font color="#f800f8">&quot;mobile&quot;</font><font color="#008888"> </font><font color="#288850"><b>number</b></font>=<font color="#f800f8">&quot;1-444-555-6666&quot;</font><font color="#008888">/&gt;</font>
                <font color="#008888">&lt;/phones&gt;</font>
                <font color="#008888">&lt;</font><font color="#008888">addresses</font><font color="#008888">&gt;</font>
                        <font color="#008888">&lt;</font><font color="#008888">address</font><font color="#008888"> </font><font color="#288850"><b>location</b></font>=<font color="#f800f8">&quot;home&quot;</font><font color="#008888"> </font><font color="#288850"><b>address</b></font>=<font color="#f800f8">&quot;1234 homestreet dr.&quot;</font><font color="#008888"> </font><font color="#288850"><b>city</b></font>=<font color="#f800f8">&quot;mycity&quot;</font><font color="#008888"> </font><font color="#288850"><b>state</b></font>=<font color="#f800f8">&quot;GA&quot;</font><font color="#008888"> </font><font color="#288850"><b>zip</b></font>=<font color="#f800f8">&quot;12345&quot;</font><font color="#008888">/&gt;</font>
                        <font color="#008888">&lt;</font><font color="#008888">address</font><font color="#008888"> </font><font color="#288850"><b>location</b></font>=<font color="#f800f8">&quot;work&quot;</font><font color="#008888"> </font><font color="#288850"><b>address</b></font>=<font color="#f800f8">&quot;2345 workstreet dr.&quot;</font><font color="#008888"> </font><font color="#288850"><b>city</b></font>=<font color="#f800f8">&quot;mycity&quot;</font><font color="#008888"> </font><font color="#288850"><b>state</b></font>=<font color="#f800f8">&quot;GA&quot;</font><font color="#008888"> </font><font color="#288850"><b>zip</b></font>=<font color="#f800f8">&quot;23456&quot;</font><font color="#008888">/&gt;</font>
                <font color="#008888">&lt;/addresses&gt;</font>
                <font color="#008888">&lt;</font><font color="#008888">emails</font><font color="#008888">&gt;</font>
                        <font color="#008888">&lt;</font><font color="#008888">email</font><font color="#008888"> </font><font color="#288850"><b>location</b></font>=<font color="#f800f8">&quot;home&quot;</font><font color="#008888"> </font><font color="#288850"><b>address</b></font>=<font color="#f800f8">&quot;dmuse@firstworks.com&quot;</font><font color="#008888">/&gt;</font>
                        <font color="#008888">&lt;</font><font color="#008888">email</font><font color="#008888"> </font><font color="#288850"><b>location</b></font>=<font color="#f800f8">&quot;work&quot;</font><font color="#008888"> </font><font color="#288850"><b>address</b></font>=<font color="#f800f8">&quot;dmuse@workemail.com&quot;</font><font color="#008888">/&gt;</font>
                <font color="#008888">&lt;/emails&gt;</font>
        <font color="#008888">&lt;/person&gt;</font>
<font color="#008888">&lt;/addressbook&gt;</font>
</PRE>

<p>The following program parses the addressbook and prints it to the screen.</p>

<pre>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/xmldom.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;iostream&gt;</font>

<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> std;

<font color="#2e8b57"><b>int</b></font>     main() {

        xmldom  x;
        x.parseFile(<font color="#ff00ff">&quot;addressbook.xml&quot;</font>);
        x.getRootNode()-&gt;cascadeOnDelete();


        xmldomnode      *addressbook=x.getRootNode()-&gt;getChild(<font color="#ff00ff">&quot;addressbook&quot;</font>);
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> i=<font color="#ff00ff">0</font>; i&lt;addressbook-&gt;getChildCount(); i++) {

                xmldomnode      *person=addressbook-&gt;getChild(i);
                <font color="#a52a2a"><b>if</b></font> (person-&gt;getType()!=TAG_XMLDOMNODETYPE) {
                        <font color="#a52a2a"><b>continue</b></font>;
                }

                cout &lt;&lt; person-&gt;getAttribute(<font color="#ff00ff">&quot;firstname&quot;</font>)-&gt;getValue() &lt;&lt; <font color="#ff00ff">&quot; &quot;</font>;
                cout &lt;&lt; person-&gt;getAttribute(<font color="#ff00ff">&quot;middlename&quot;</font>)-&gt;getValue() &lt;&lt; <font color="#ff00ff">&quot; &quot;</font>;
                cout &lt;&lt; person-&gt;getAttribute(<font color="#ff00ff">&quot;lastname&quot;</font>)-&gt;getValue() &lt;&lt; endl;

                xmldomnode      *phones=person-&gt;getChild(<font color="#ff00ff">&quot;phones&quot;</font>);
                cout &lt;&lt; <font color="#ff00ff">&quot;Phones:&quot;</font> &lt;&lt; endl;
                <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> j=<font color="#ff00ff">0</font>; j&lt;phones-&gt;getChildCount(); j++) {

                        xmldomnode      *phone=phones-&gt;getChild(j);
                        <font color="#a52a2a"><b>if</b></font> (phone-&gt;getType()!=TAG_XMLDOMNODETYPE) {
                                <font color="#a52a2a"><b>continue</b></font>;
                        }
                        cout &lt;&lt; <font color="#ff00ff">&quot;       &quot;</font>;
                        cout &lt;&lt; phone-&gt;getAttribute(<font color="#ff00ff">&quot;location&quot;</font>)-&gt;
                                                        getValue() &lt;&lt; <font color="#ff00ff">&quot;: &quot;</font>;
                        cout &lt;&lt; phone-&gt;getAttribute(<font color="#ff00ff">&quot;number&quot;</font>)-&gt;
                                                        getValue() &lt;&lt; endl;
                }
                cout &lt;&lt; endl;

                xmldomnode      *addresses=person-&gt;getChild(<font color="#ff00ff">&quot;addresses&quot;</font>);
                cout &lt;&lt; <font color="#ff00ff">&quot;Addresses:&quot;</font> &lt;&lt; endl;
                <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> j=<font color="#ff00ff">0</font>; j&lt;addresses-&gt;getChildCount(); j++) {

                        xmldomnode      *address=addresses-&gt;getChild(j);
                        <font color="#a52a2a"><b>if</b></font> (address-&gt;getType()!=TAG_XMLDOMNODETYPE) {
                                <font color="#a52a2a"><b>continue</b></font>;
                        }
                        cout &lt;&lt; <font color="#ff00ff">&quot;       &quot;</font>;
                        cout &lt;&lt; address-&gt;getAttribute(<font color="#ff00ff">&quot;location&quot;</font>)-&gt;
                                                        getValue() &lt;&lt; <font color="#ff00ff">&quot;: &quot;</font>;
                        cout &lt;&lt; address-&gt;getAttribute(<font color="#ff00ff">&quot;address&quot;</font>)-&gt;
                                                        getValue() &lt;&lt; <font color="#ff00ff">&quot; &quot;</font>;
                        cout &lt;&lt; address-&gt;getAttribute(<font color="#ff00ff">&quot;city&quot;</font>)-&gt;
                                                        getValue() &lt;&lt; <font color="#ff00ff">&quot;, &quot;</font>;
                        cout &lt;&lt; address-&gt;getAttribute(<font color="#ff00ff">&quot;state&quot;</font>)-&gt;
                                                        getValue() &lt;&lt; <font color="#ff00ff">&quot; &quot;</font>;
                        cout &lt;&lt; address-&gt;getAttribute(<font color="#ff00ff">&quot;zip&quot;</font>)-&gt;
                                                        getValue() &lt;&lt; endl;
                }
                cout &lt;&lt; endl;

                xmldomnode      *emails=person-&gt;getChild(<font color="#ff00ff">&quot;emails&quot;</font>);
                cout &lt;&lt; <font color="#ff00ff">&quot;Emails:&quot;</font> &lt;&lt; endl;
                <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> j=<font color="#ff00ff">0</font>; j&lt;emails-&gt;getChildCount(); j++) {

                        xmldomnode      *email=emails-&gt;getChild(j);
                        <font color="#a52a2a"><b>if</b></font> (email-&gt;getType()!=TAG_XMLDOMNODETYPE) {
                                <font color="#a52a2a"><b>continue</b></font>;
                        }
                        cout &lt;&lt; <font color="#ff00ff">&quot;       &quot;</font>;
                        cout &lt;&lt; email-&gt;getAttribute(<font color="#ff00ff">&quot;location&quot;</font>)-&gt;
                                                        getValue() &lt;&lt; <font color="#ff00ff">&quot;: &quot;</font>;
                        cout &lt;&lt; email-&gt;getAttribute(<font color="#ff00ff">&quot;address&quot;</font>)-&gt;
                                                        getValue() &lt;&lt; endl;
                }
                cout &lt;&lt; endl;
        }
}
</pre>

<p>Here is the output of the program above.</p>

<blockquote>
<PRE>
David Lee Muse
Phones:
        home: 1-222-333-4444
        work: 1-333-444-5555
        mobile: 1-444-555-6666

Addresses:
        home: 1234 homestreet dr. mycity, GA 12345
        work: 2345 workstreet dr. mycity, GA 23456

Emails:
        home: dmuse@firstworks.com
        work: dmuse@workemail.com
</PRE>
</blockquote>

<a name="xmlsax"></a>
<span class="heading">Using the xmlsax Class</span><br><br>

<p>The xmlsax class provides a callback-based framework for parsing XML
documents.  The xmlsax class provides methods for parsing strings of XML or 
XML files.  When it encounters a tag, attribute or other XML component, it
calls one of it's callback methods.  These methods may be overridden by
a child class to perform specific tasks.  The xmlsax class is especially useful
if you can't afford to load the entire document into memory and use the xmldom
class, or if you just need to extract specific data from an XML file.</p>

<pre>
<font color="#0000ff">// Copyright (c) 2002  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/xmlsax.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdio.h&gt;</font>

<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;

<font color="#2e8b57"><b>class</b></font> myxmlsax : <font color="#a52a2a"><b>public</b></font> xmlsax {
        <font color="#a52a2a"><b>public</b></font>:
                        myxmlsax();
        <font color="#a52a2a"><b>private</b></font>:
                <font color="#2e8b57"><b>int</b></font>     xmlVersionStart();
                <font color="#2e8b57"><b>int</b></font>     xmlVersionEnd();
                <font color="#2e8b57"><b>int</b></font>     doctypeStart(<font color="#2e8b57"><b>char</b></font> *name);
                <font color="#2e8b57"><b>int</b></font>     externalSubset(<font color="#2e8b57"><b>char</b></font> *filename);
                <font color="#2e8b57"><b>int</b></font>     doctypeEnd();
                <font color="#2e8b57"><b>int</b></font>     tagStart(<font color="#2e8b57"><b>char</b></font> *name);
                <font color="#2e8b57"><b>int</b></font>     attributeName(<font color="#2e8b57"><b>char</b></font> *name);
                <font color="#2e8b57"><b>int</b></font>     attributeValue(<font color="#2e8b57"><b>char</b></font> *value);
                <font color="#2e8b57"><b>int</b></font>     text(<font color="#2e8b57"><b>char</b></font> *string);
                <font color="#2e8b57"><b>int</b></font>     tagEnd(<font color="#2e8b57"><b>char</b></font> *name);
                <font color="#2e8b57"><b>int</b></font>     comment(<font color="#2e8b57"><b>char</b></font> *string);
                <font color="#2e8b57"><b>int</b></font>     cdata(<font color="#2e8b57"><b>char</b></font> *string);
                <font color="#2e8b57"><b>void</b></font>    indent(<font color="#2e8b57"><b>int</b></font> spaces);
                <font color="#2e8b57"><b>int</b></font>     ind;
};

myxmlsax::myxmlsax() : xmlsax() {
        ind=<font color="#ff00ff">0</font>;
}

<font color="#2e8b57"><b>int</b></font>     myxmlsax::xmlVersionStart() {
        printf(<font color="#ff00ff">&quot;XML version start:</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        <font color="#a52a2a"><b>return</b></font> <font color="#ff00ff">1</font>;
}

<font color="#2e8b57"><b>int</b></font>     myxmlsax::xmlVersionEnd() {
        printf(<font color="#ff00ff">&quot;XML version end:</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        <font color="#a52a2a"><b>return</b></font> <font color="#ff00ff">1</font>;
}

<font color="#2e8b57"><b>int</b></font>     myxmlsax::doctypeStart(<font color="#2e8b57"><b>char</b></font> *name) {
        printf(<font color="#ff00ff">&quot;DOCTYPE start: </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,name);
        <font color="#a52a2a"><b>return</b></font> <font color="#ff00ff">1</font>;
}

<font color="#2e8b57"><b>int</b></font>     myxmlsax::externalSubset(<font color="#2e8b57"><b>char</b></font> *filename) {
        printf(<font color="#ff00ff">&quot;        external subset: </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,filename);
        <font color="#a52a2a"><b>return</b></font> <font color="#ff00ff">1</font>;
}

<font color="#2e8b57"><b>int</b></font>     myxmlsax::doctypeEnd() {
        printf(<font color="#ff00ff">&quot;DOCTYPE end:</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        <font color="#a52a2a"><b>return</b></font> <font color="#ff00ff">1</font>;
}

<font color="#2e8b57"><b>void</b></font>    myxmlsax::indent(<font color="#2e8b57"><b>int</b></font> spaces) {
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> i=<font color="#ff00ff">0</font>; i&lt;spaces; i++) {
                printf(<font color="#ff00ff">&quot;  &quot;</font>);
        }
}

<font color="#2e8b57"><b>int</b></font>     myxmlsax::tagStart(<font color="#2e8b57"><b>char</b></font> *name) {
        indent(ind);
        printf(<font color="#ff00ff">&quot;tagStart: </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,name);
        ind++;
        <font color="#a52a2a"><b>return</b></font> <font color="#ff00ff">1</font>;
}

<font color="#2e8b57"><b>int</b></font>     myxmlsax::attributeName(<font color="#2e8b57"><b>char</b></font> *name) {
        indent(ind+<font color="#ff00ff">1</font>);
        printf(<font color="#ff00ff">&quot;attribute name: </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,name);
        <font color="#a52a2a"><b>return</b></font> <font color="#ff00ff">1</font>;
}

<font color="#2e8b57"><b>int</b></font>     myxmlsax::attributeValue(<font color="#2e8b57"><b>char</b></font> *value) {
        indent(ind+<font color="#ff00ff">1</font>);
        printf(<font color="#ff00ff">&quot;attribute value: </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,value);
        <font color="#a52a2a"><b>return</b></font> <font color="#ff00ff">1</font>;
}

<font color="#2e8b57"><b>int</b></font>     myxmlsax::text(<font color="#2e8b57"><b>char</b></font> *string) {
        indent(ind+<font color="#ff00ff">1</font>);
        printf(<font color="#ff00ff">&quot;text: </font><font color="#6a5acd">\n</font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,string);
        <font color="#a52a2a"><b>return</b></font> <font color="#ff00ff">1</font>;
}

<font color="#2e8b57"><b>int</b></font>     myxmlsax::tagEnd(<font color="#2e8b57"><b>char</b></font> *name) {
        ind--;
        indent(ind);
        printf(<font color="#ff00ff">&quot;tagEnd: </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,name);
        <font color="#a52a2a"><b>return</b></font> <font color="#ff00ff">1</font>;
}

<font color="#2e8b57"><b>int</b></font>     myxmlsax::comment(<font color="#2e8b57"><b>char</b></font> *string) {
        indent(ind);
        printf(<font color="#ff00ff">&quot;comment: </font><font color="#6a5acd">\n</font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,string);
        <font color="#a52a2a"><b>return</b></font> <font color="#ff00ff">1</font>;
}

<font color="#2e8b57"><b>int</b></font>     myxmlsax::cdata(<font color="#2e8b57"><b>char</b></font> *string) {
        indent(ind);
        printf(<font color="#ff00ff">&quot;cdata: </font><font color="#6a5acd">\n</font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,string);
        <font color="#a52a2a"><b>return</b></font> <font color="#ff00ff">1</font>;
}


<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argv, <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> **argc) {

        myxmlsax        x;
        x.parseFile(<font color="#ff00ff">&quot;xmls.xml&quot;</font>);
}
</pre>

<a name="dtd"></a>
<span class="heading">Using the dtd Class</span><br><br>

<p>The dtd class provides methods for parsing an XML DTD.  The result is an
XML DOM tree representing the DTD.  Once parsed, the tree can be accessed
using the xmldom and xmldomnode classes.</p>

<pre>
<font color="#0000ff">// Copyright (c) 2002  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/dtd.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdio.h&gt;</font>

<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;

<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argv, <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> **argc) {

        <font color="#0000ff">// display the contents of dtd.dtd</font>
        dtd     d;
        d.parseFile(<font color="#ff00ff">&quot;dtd.dtd&quot;</font>);
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,d.xml()-&gt;xml()-&gt;getString());
}
</pre>

<a name="passwdentry"></a>
<span class="heading">Using the passwdentry Class</span><br><br>

<p>The passwdentry class allows you to look up entries from /etc/passwd or
from elsewhere if you're using the Name Service Switch.</p>

<pre>
<font color="#0000ff">// Copyright (c) 2002  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/passwdentry.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdio.h&gt;</font>

<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;

<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argv, <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> **argc) {


        <font color="#0000ff">// get the password entry for &quot;root&quot;</font>
        passwdentry     pwent;
        pwent.initialize(<font color="#ff00ff">&quot;root&quot;</font>);

        <font color="#0000ff">// print the components individually</font>
        printf(<font color="#ff00ff">&quot;Individually...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        printf(<font color="#ff00ff">&quot;        Name:           </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,pwent.getName());
        printf(<font color="#ff00ff">&quot;        Password:       </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,pwent.getPassword());
        printf(<font color="#ff00ff">&quot;        User Id:        </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,pwent.getUserId());
        printf(<font color="#ff00ff">&quot;        Primary Group:  </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,pwent.getPrimaryGroupId());
        printf(<font color="#ff00ff">&quot;        Real Name:      </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,pwent.getRealName());
        printf(<font color="#ff00ff">&quot;        Home Directory: </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,pwent.getHomeDirectory());
        printf(<font color="#ff00ff">&quot;        Shell:          </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,pwent.getShell());
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        <font color="#0000ff">// use the built in print method</font>
        printf(<font color="#ff00ff">&quot;Built In...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        pwent.print();
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);



        <font color="#0000ff">// get the password entry for user id 0</font>
        pwent.initialize((uid_t)<font color="#ff00ff">0</font>);

        <font color="#0000ff">// print the components individually</font>
        printf(<font color="#ff00ff">&quot;Individually...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        printf(<font color="#ff00ff">&quot;        Name:           </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,pwent.getName());
        printf(<font color="#ff00ff">&quot;        Password:       </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,pwent.getPassword());
        printf(<font color="#ff00ff">&quot;        User Id:        </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,pwent.getUserId());
        printf(<font color="#ff00ff">&quot;        Primary Group:  </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,pwent.getPrimaryGroupId());
        printf(<font color="#ff00ff">&quot;        Real Name:      </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,pwent.getRealName());
        printf(<font color="#ff00ff">&quot;        Home Directory: </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,pwent.getHomeDirectory());
        printf(<font color="#ff00ff">&quot;        Shell:          </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,pwent.getShell());
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        <font color="#0000ff">// use the built in print method</font>
        printf(<font color="#ff00ff">&quot;Built In...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        pwent.print();
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
}
</pre>

<a name="shadowentry"></a>
<span class="heading">Using the shadowentry Class</span><br><br>

<p>The shadowentry class allows you to look up entries from /etc/shadow or
from elsewhere if you're using the Name Service Switch.</p>








<pre>
<font color="#0000ff">// Copyright (c) 2003  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/shadowentry.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdio.h&gt;</font>

<font color="#a020f0">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a020f0">#endif</font>


<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argc, <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> **argv) {


        <font color="#0000ff">// get the shadow entry for &quot;root&quot;</font>
        shadowentry     spent;
        spent.initialize(<font color="#ff00ff">&quot;root&quot;</font>);

        <font color="#0000ff">// print the components individually</font>
        printf(<font color="#ff00ff">&quot;Individually...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        printf(<font color="#ff00ff">&quot;       Name: </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,spent.getName());
        printf(<font color="#ff00ff">&quot;       Encrypted Password: </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,spent.getEncryptedPassword());
        printf(<font color="#ff00ff">&quot;       Last Change: </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                                        spent.getLastChangeDate());
        printf(<font color="#ff00ff">&quot;       Days Before Change Allowed: </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                                        spent.getDaysBeforeChangeAllowed());
        printf(<font color="#ff00ff">&quot;       Days Before Change Required: </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                                        spent.getDaysBeforeChangeRequired());
        printf(<font color="#ff00ff">&quot;       Days Before Expiration Warning: </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                                        spent.getDaysBeforeExpirationWarning());
        printf(<font color="#ff00ff">&quot;       Days Of Inactivity Allowed: </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                                        spent.getDaysOfInactivityAllowed());
        printf(<font color="#ff00ff">&quot;       Expiration Date: </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                                        spent.getExpirationDate());
        printf(<font color="#ff00ff">&quot;       Flag: </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,spent.getFlag());
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        <font color="#0000ff">// use the built in print method</font>
        printf(<font color="#ff00ff">&quot;Built In...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        spent.print();
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
}
</pre>



<a name="groupentry"></a>
<span class="heading">Using the groupentry Class</span><br><br>

<p>The groupentry class allows you to look up entries from /etc/group or
from elsewhere if you're using the Name Service Switch.</p>








<pre>
<font color="#0000ff">// Copyright (c) 2002  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/groupentry.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdio.h&gt;</font>

<font color="#a020f0">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a020f0">#endif</font>

<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argc, <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> **argv) {


        <font color="#0000ff">// get the group entry for &quot;bin&quot;</font>
        groupentry      grent;
        grent.initialize(<font color="#ff00ff">&quot;bin&quot;</font>);

        <font color="#0000ff">// print the components individually</font>
        printf(<font color="#ff00ff">&quot;Individually...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        printf(<font color="#ff00ff">&quot;       Name:           </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,grent.getName());
        printf(<font color="#ff00ff">&quot;       Password:       </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,grent.getPassword());
        printf(<font color="#ff00ff">&quot;       Group Id:       </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,grent.getGroupId());
        printf(<font color="#ff00ff">&quot;       Members:</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> i=<font color="#ff00ff">0</font>; grent.getMembers()[i]; i++) {
                printf(<font color="#ff00ff">&quot;              </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,grent.getMembers()[i]);
        }
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        <font color="#0000ff">// use the built in print method</font>
        printf(<font color="#ff00ff">&quot;Built in...:</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        grent.print();
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);



        <font color="#0000ff">// get the group entry for group id 1</font>
        grent.initialize((gid_t)<font color="#ff00ff">1</font>);

        <font color="#0000ff">// print the components individually</font>
        printf(<font color="#ff00ff">&quot;Individually...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        printf(<font color="#ff00ff">&quot;       Name:           </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,grent.getName());
        printf(<font color="#ff00ff">&quot;       Password:       </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,grent.getPassword());
        printf(<font color="#ff00ff">&quot;       Group Id:       </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,grent.getGroupId());
        printf(<font color="#ff00ff">&quot;       Members:</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> i=<font color="#ff00ff">0</font>; grent.getMembers()[i]; i++) {
                printf(<font color="#ff00ff">&quot;              </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,grent.getMembers()[i]);
        }
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        <font color="#0000ff">// use the built in print method</font>
        printf(<font color="#ff00ff">&quot;Built in...:</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        grent.print();
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
}
</pre>



<a name="hostentry"></a>
<span class="heading">Using the hostentry Class</span><br><br>

<p>The hostentry class allows you to look up entries from /etc/hosts or
from elsewhere if you're using the Name Service Switch.</p>








<pre>
<font color="#0000ff">// Copyright (c) 2002  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/hostentry.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdio.h&gt;</font>

<font color="#a020f0">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a020f0">#endif</font>

<font color="#0000ff">// this function takes addr[]={127,1,1,0} and returns &quot;127.1.1.0&quot;</font>
<font color="#2e8b57"><b>char</b></font> *getAddressString(<font color="#2e8b57"><b>int</b></font> length, <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> *addr) {
        <font color="#2e8b57"><b>char</b></font>   *address=<font color="#a52a2a"><b>new</b></font> <font color="#2e8b57"><b>char</b></font>[(length*<font color="#ff00ff">4</font>)+<font color="#ff00ff">1</font>];
        address[<font color="#ff00ff">0</font>]=(<font color="#2e8b57"><b>char</b></font>)<font color="#ff00ff">NULL</font>;
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> byte=<font color="#ff00ff">0</font>; byte&lt;length; byte++) {
                sprintf(address,<font color="#ff00ff">&quot;</font><font color="#6a5acd">%s%d</font><font color="#ff00ff">&quot;</font>,address,addr[byte]);
                <font color="#a52a2a"><b>if</b></font> (byte&lt;length-<font color="#ff00ff">1</font>) {
                        sprintf(address,<font color="#ff00ff">&quot;</font><font color="#6a5acd">%s</font><font color="#ff00ff">.&quot;</font>,address);
                }
        }
        <font color="#a52a2a"><b>return</b></font> address;
}

<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argc, <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> **argv) {


        <font color="#0000ff">// get the host information for &quot;localhost&quot;</font>
        hostentry       he;
        he.initialize(<font color="#ff00ff">&quot;localhost&quot;</font>);

        <font color="#0000ff">// print the components individually</font>
        printf(<font color="#ff00ff">&quot;Individually...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        printf(<font color="#ff00ff">&quot;       Name: </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,he.getName());
        printf(<font color="#ff00ff">&quot;       Alias list:</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> i=<font color="#ff00ff">0</font>; he.getAliasList()[i]; i++) {
                printf(<font color="#ff00ff">&quot;              </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,he.getAliasList()[i]);
        }
        printf(<font color="#ff00ff">&quot;       Address type: </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,he.getAddressType());
        printf(<font color="#ff00ff">&quot;       Address length: </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,he.getAddressLength());
        printf(<font color="#ff00ff">&quot;       Address list:</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> i=<font color="#ff00ff">0</font>; he.getAddressList()[i]; i++) {
                <font color="#2e8b57"><b>char</b></font>  *addr=getAddressString(he.getAddressLength(),
                                                he.getAddressList()[i]);
                printf(<font color="#ff00ff">&quot;              </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,addr);
                <font color="#a52a2a"><b>delete</b></font>[] addr;
        }
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        <font color="#0000ff">// use the built in print method</font>
        printf(<font color="#ff00ff">&quot;Built In...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        he.print();
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);



        <font color="#0000ff">// get the host information for &quot;127.0.0.1&quot;</font>
        <font color="#2e8b57"><b>char</b></font>   address[]={<font color="#ff00ff">127</font>,<font color="#ff00ff">0</font>,<font color="#ff00ff">0</font>,<font color="#ff00ff">1</font>};
        he.initialize(address,<font color="#ff00ff">4</font>,AF_INET);

        <font color="#0000ff">// print the components individually</font>
        printf(<font color="#ff00ff">&quot;Individually...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        printf(<font color="#ff00ff">&quot;       Name: </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,he.getName());
        printf(<font color="#ff00ff">&quot;       Alias list:</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> i=<font color="#ff00ff">0</font>; he.getAliasList()[i]; i++) {
                printf(<font color="#ff00ff">&quot;              </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,he.getAliasList()[i]);
        }
        printf(<font color="#ff00ff">&quot;       Address type: </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,he.getAddressType());
        printf(<font color="#ff00ff">&quot;       Address length: </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,he.getAddressLength());
        printf(<font color="#ff00ff">&quot;       Address list:</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> i=<font color="#ff00ff">0</font>; he.getAddressList()[i]; i++) {
                <font color="#2e8b57"><b>char</b></font>  *addr=getAddressString(he.getAddressLength(),
                                                he.getAddressList()[i]);
                printf(<font color="#ff00ff">&quot;              </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,addr);
                <font color="#a52a2a"><b>delete</b></font>[] addr;
        }
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        <font color="#0000ff">// use the built in print method</font>
        printf(<font color="#ff00ff">&quot;Built In...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        he.print();
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
}
</pre>



<a name="protocolentry"></a>
<span class="heading">Using the protocolentry Class</span><br><br>

<p>The protocolentry class allows you to look up entries from /etc/protocols
or from elsewhere if you're using the Name Service Switch.</p>








<pre>
<font color="#0000ff">// Copyright (c) 2002  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/protocolentry.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdio.h&gt;</font>

<font color="#a020f0">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a020f0">#endif</font>

<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argc, <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> **argv) {


        <font color="#0000ff">// get the protocol information for &quot;tcp&quot;</font>
        protocolentry   pe;
        pe.initialize(<font color="#ff00ff">&quot;tcp&quot;</font>);

        <font color="#0000ff">// print the components individually</font>
        printf(<font color="#ff00ff">&quot;Individually...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        printf(<font color="#ff00ff">&quot;       Name:           </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,pe.getName());
        printf(<font color="#ff00ff">&quot;       Alias list:</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> i=<font color="#ff00ff">0</font>; pe.getAliasList()[i]; i++) {
                printf(<font color="#ff00ff">&quot;              </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,pe.getAliasList()[i]);
        }
        printf(<font color="#ff00ff">&quot;       Number:         </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,pe.getNumber());
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        <font color="#0000ff">// use the built in print method</font>
        printf(<font color="#ff00ff">&quot;Built In...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        pe.print();
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);



        <font color="#0000ff">// get the protocol information for protocol number 6</font>
        pe.initialize(<font color="#ff00ff">6</font>);

        <font color="#0000ff">// print the components individually</font>
        printf(<font color="#ff00ff">&quot;Individually...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        printf(<font color="#ff00ff">&quot;       Name:           </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,pe.getName());
        printf(<font color="#ff00ff">&quot;       Alias list:</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> i=<font color="#ff00ff">0</font>; pe.getAliasList()[i]; i++) {
                printf(<font color="#ff00ff">&quot;              </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,pe.getAliasList()[i]);
        }
        printf(<font color="#ff00ff">&quot;       Number:         </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,pe.getNumber());
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        <font color="#0000ff">// use the built in print method</font>
        printf(<font color="#ff00ff">&quot;Built In...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        pe.print();
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
}
</pre>



<a name="serviceentry"></a>
<span class="heading">Using the serviceentry Class</span><br><br>

<p>The serviceentry class allows you to look up entries from /etc/services
or from elsewhere if you're using the Name Service Switch.</p>








<pre>
<font color="#0000ff">// Copyright (c) 2003  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/serviceentry.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdio.h&gt;</font>

<font color="#a020f0">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a020f0">#endif</font>

<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argc, <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> **argv) {


        <font color="#0000ff">// get the service information for &quot;smtp&quot;,&quot;tcp&quot;</font>
        serviceentry    se;
        se.initialize(<font color="#ff00ff">&quot;smtp&quot;</font>,<font color="#ff00ff">&quot;tcp&quot;</font>);

        <font color="#0000ff">// print the components individually</font>
        printf(<font color="#ff00ff">&quot;Individually...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        printf(<font color="#ff00ff">&quot;       Name:           </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,se.getName());
        printf(<font color="#ff00ff">&quot;       Port:           </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,se.getPort());
        printf(<font color="#ff00ff">&quot;       Protocol:       </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,se.getProtocol());
        printf(<font color="#ff00ff">&quot;       Alias list:</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> i=<font color="#ff00ff">0</font>; se.getAliasList()[i]; i++) {
                printf(<font color="#ff00ff">&quot;              </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,se.getAliasList()[i]);
        }
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        <font color="#0000ff">// use the built in print method</font>
        printf(<font color="#ff00ff">&quot;Built In...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        se.print();
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);



        <font color="#0000ff">// get the service information for the service on port 25, &quot;tcp&quot;</font>
        se.initialize(<font color="#ff00ff">25</font>,<font color="#ff00ff">&quot;tcp&quot;</font>);

        <font color="#0000ff">// print the components individually</font>
        printf(<font color="#ff00ff">&quot;Individually...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        printf(<font color="#ff00ff">&quot;       Name:           </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,se.getName());
        printf(<font color="#ff00ff">&quot;       Port:           </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,se.getPort());
        printf(<font color="#ff00ff">&quot;       Protocol:       </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,se.getProtocol());
        printf(<font color="#ff00ff">&quot;       Alias list:</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> i=<font color="#ff00ff">0</font>; se.getAliasList()[i]; i++) {
                printf(<font color="#ff00ff">&quot;              </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,se.getAliasList()[i]);
        }
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        <font color="#0000ff">// use the built in print method</font>
        printf(<font color="#ff00ff">&quot;Built In...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        se.print();
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
}
</pre>



<a name="rpcentry"></a>
<span class="heading">Using the rpcentry Class</span><br><br>

<p>The rpcentry class allows you to look up entries from /etc/rpc
or from elsewhere if you're using the Name Service Switch.</p>








<pre>
<font color="#0000ff">// Copyright (c) 2003  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/rpcentry.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdio.h&gt;</font>

<font color="#a020f0">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a020f0">#endif</font>

<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argc, <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> **argv) {


        <font color="#0000ff">// get the rpc information for &quot;portmap&quot;</font>
        rpcentry        re;
        re.initialize(<font color="#ff00ff">&quot;portmap&quot;</font>);

        <font color="#0000ff">// print the components individually</font>
        printf(<font color="#ff00ff">&quot;Individually...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        printf(<font color="#ff00ff">&quot;       Name:           </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,re.getName());
        printf(<font color="#ff00ff">&quot;       Number:         </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,re.getNumber());
        printf(<font color="#ff00ff">&quot;       Alias list:</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> i=<font color="#ff00ff">0</font>; re.getAliasList()[i]; i++) {
                printf(<font color="#ff00ff">&quot;              </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,re.getAliasList()[i]);
        }
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        <font color="#0000ff">// use the built in print method</font>
        printf(<font color="#ff00ff">&quot;Built In...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        re.print();
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);



        <font color="#0000ff">// get the protocol information for protocol number 100000</font>
        re.initialize(<font color="#ff00ff">100000</font>);

        <font color="#0000ff">// print the components individually</font>
        printf(<font color="#ff00ff">&quot;Individually...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        printf(<font color="#ff00ff">&quot;       Name:           </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,re.getName());
        printf(<font color="#ff00ff">&quot;       Number:         </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,re.getNumber());
        printf(<font color="#ff00ff">&quot;       Alias list:</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> i=<font color="#ff00ff">0</font>; re.getAliasList()[i]; i++) {
                printf(<font color="#ff00ff">&quot;              </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,re.getAliasList()[i]);
        }
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        <font color="#0000ff">// use the built in print method</font>
        printf(<font color="#ff00ff">&quot;Built In...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        re.print();
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
}
</pre>



<a name="linkedlist"></a>
<span class="heading">Using the linkedlist Class</span><br><br>

<p>The linkedlist class allows you to store arbitrary data in a doubly-linked
list.</p>

<p>Since lists of strings are commonly used, a stringlist typedef is
provided for convenience.</p>








<pre>
<font color="#0000ff">// Copyright (c) 2003  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/linkedlist.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdio.h&gt;</font>

<font color="#a020f0">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a020f0">#endif</font>

<font color="#2e8b57"><b>int</b></font>     main(<font color="#2e8b57"><b>int</b></font> argc, <font color="#2e8b57"><b>char</b></font> **argv) {

        <font color="#0000ff">// create a list of integers</font>
        linkedlist&lt;<font color="#2e8b57"><b>int</b></font>&gt;        intl;

        <font color="#0000ff">// append values to the list, displaying the list after each append</font>
        printf(<font color="#ff00ff">&quot;append(0)</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        intl.append(<font color="#ff00ff">0</font>);
        intl.print();

        printf(<font color="#ff00ff">&quot;append(1)</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        intl.append(<font color="#ff00ff">1</font>);
        intl.print();

        printf(<font color="#ff00ff">&quot;append(3)</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        intl.append(<font color="#ff00ff">3</font>);
        intl.print();

        <font color="#0000ff">// insert a value into the middle of the list, display the list</font>
        printf(<font color="#ff00ff">&quot;insert(2,2)</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        intl.insert(<font color="#ff00ff">2</font>,<font color="#ff00ff">2</font>);
        intl.print();

        <font color="#0000ff">// remove values from the list, displaying the list after each removal</font>
        printf(<font color="#ff00ff">&quot;removeByIndex(0)</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        intl.removeByIndex(<font color="#ff00ff">0</font>);
        intl.print();

        printf(<font color="#ff00ff">&quot;removeByData(3)</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        intl.removeByData(<font color="#ff00ff">3</font>);
        intl.print();

        <font color="#0000ff">// change a value in the list, display the list</font>
        printf(<font color="#ff00ff">&quot;setDataByIndex(1,50)</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        intl.setDataByIndex(<font color="#ff00ff">1</font>,<font color="#ff00ff">50</font>);
        intl.print();

        <font color="#0000ff">// clear the list, display the list</font>
        printf(<font color="#ff00ff">&quot;clear()</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        intl.clear();
        intl.print();


        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n\n</font><font color="#ff00ff">&quot;</font>);


        <font color="#0000ff">// create a list of strings</font>
        stringlist      strl;

        <font color="#0000ff">// append values to the list, displaying the list after each append</font>
        printf(<font color="#ff00ff">&quot;append(zero)</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        strl.append(<font color="#ff00ff">&quot;zero&quot;</font>);
        strl.print();

        printf(<font color="#ff00ff">&quot;append(one)</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        strl.append(<font color="#ff00ff">&quot;one&quot;</font>);
        strl.print();

        printf(<font color="#ff00ff">&quot;append(three)</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        strl.append(<font color="#ff00ff">&quot;three&quot;</font>);
        strl.print();

        <font color="#0000ff">// insert a value into the middle of the list, display the list</font>
        printf(<font color="#ff00ff">&quot;insert(2,two)</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        strl.insert(<font color="#ff00ff">2</font>,<font color="#ff00ff">&quot;two&quot;</font>);
        strl.print();

        <font color="#0000ff">// remove values from the list, displaying the list after each removal</font>
        printf(<font color="#ff00ff">&quot;removeByIndex(0)</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        strl.removeByIndex(<font color="#ff00ff">0</font>);
        strl.print();

        printf(<font color="#ff00ff">&quot;removeByData(three)</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        strl.removeByData(<font color="#ff00ff">&quot;three&quot;</font>);
        strl.print();

        <font color="#0000ff">// change a value in the list, display the list</font>
        printf(<font color="#ff00ff">&quot;setDataByIndex(1,fifty)</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        strl.setDataByIndex(<font color="#ff00ff">1</font>,<font color="#ff00ff">&quot;fifty&quot;</font>);
        strl.print();

        <font color="#0000ff">// clear the list, display the list</font>
        printf(<font color="#ff00ff">&quot;clear()</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        strl.clear();
        strl.print();
}
</pre>



<a name="dictionary"></a>
<span class="heading">Using the dictionary Class</span><br><br>

<p>The dictionary class allows you to store arbitrary key/value-pair data.</p>

<p>Since dictionaries with string and long integer keys and dictionaries with
string keys and values are commonly used, convenience classes are provided
for each.</p>








<pre>
<font color="#0000ff">// Copyright (c) 2003  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/dictionary.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdio.h&gt;</font>

<font color="#a020f0">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a020f0">#endif</font>

<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argc, <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> **argv) {

        <font color="#0000ff">// create a dictionary containing string keys and string values</font>
        namevaluepairs  dict;
        printf(<font color="#ff00ff">&quot;string keys, string values:</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        <font color="#0000ff">// add values to the dictionary</font>
        dict.setData(<font color="#ff00ff">&quot;1&quot;</font>,<font color="#ff00ff">&quot;one&quot;</font>);
        dict.setData(<font color="#ff00ff">&quot;2&quot;</font>,<font color="#ff00ff">&quot;two&quot;</font>);
        dict.setData(<font color="#ff00ff">&quot;3&quot;</font>,<font color="#ff00ff">&quot;three&quot;</font>);
        dict.setData(<font color="#ff00ff">&quot;4&quot;</font>,<font color="#ff00ff">&quot;four&quot;</font>);

        <font color="#0000ff">// display the length and contents of the dictionary</font>
        printf(<font color="#ff00ff">&quot;length: </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,dict.getList()-&gt;getLength());
        dict.print();
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        <font color="#0000ff">// remove values, displaying the dictionary after each removal</font>
        dict.removeData(<font color="#ff00ff">&quot;3&quot;</font>);
        dict.print();
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        dict.removeData(<font color="#ff00ff">&quot;2&quot;</font>);
        dict.print();
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        dict.removeData(<font color="#ff00ff">&quot;4&quot;</font>);
        dict.print();
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        dict.removeData(<font color="#ff00ff">&quot;1&quot;</font>);
        dict.print();



        <font color="#0000ff">// create a dictionary containing long integer keys and string values</font>
        numericdictionary&lt;<font color="#2e8b57"><b>char</b></font> *&gt;      numdict;
        printf(<font color="#ff00ff">&quot;integer keys, string values:</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        <font color="#0000ff">// add values to the dictionary</font>
        numdict.setData(<font color="#ff00ff">1</font>,<font color="#ff00ff">&quot;one&quot;</font>);
        numdict.setData(<font color="#ff00ff">2</font>,<font color="#ff00ff">&quot;two&quot;</font>);
        numdict.setData(<font color="#ff00ff">3</font>,<font color="#ff00ff">&quot;three&quot;</font>);
        numdict.setData(<font color="#ff00ff">4</font>,<font color="#ff00ff">&quot;four&quot;</font>);

        <font color="#0000ff">// display the length and contents of the dictionary</font>
        printf(<font color="#ff00ff">&quot;length: </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,numdict.getList()-&gt;getLength());
        numdict.print();
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        <font color="#0000ff">// remove values, displaying the dictionary after each removal</font>
        numdict.removeData(<font color="#ff00ff">3</font>);
        numdict.print();
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        numdict.removeData(<font color="#ff00ff">2</font>);
        numdict.print();
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        numdict.removeData(<font color="#ff00ff">4</font>);
        numdict.print();
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        numdict.removeData(<font color="#ff00ff">1</font>);
        numdict.print();
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);



        <font color="#0000ff">// create a dictionary containing double precision</font>
        <font color="#0000ff">// floating point keys and string values</font>
        dictionary&lt;<font color="#2e8b57"><b>double</b></font>,<font color="#2e8b57"><b>char</b></font> *&gt;      doubledict;
        printf(<font color="#ff00ff">&quot;floating point keys, string values:</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        <font color="#0000ff">// add values to the dictionary</font>
        doubledict.setData(<font color="#ff00ff">1.1</font>,<font color="#ff00ff">&quot;one point one&quot;</font>);
        doubledict.setData(<font color="#ff00ff">2.2</font>,<font color="#ff00ff">&quot;two point two&quot;</font>);
        doubledict.setData(<font color="#ff00ff">3.3</font>,<font color="#ff00ff">&quot;three point three&quot;</font>);
        doubledict.setData(<font color="#ff00ff">4.4</font>,<font color="#ff00ff">&quot;four point four&quot;</font>);

        <font color="#0000ff">// display the length and contents of the dictionary</font>
        printf(<font color="#ff00ff">&quot;length: </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,doubledict.getList()-&gt;getLength());
        doubledict.print();
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        <font color="#0000ff">// remove values, displaying the dictionary after each removal</font>
        doubledict.removeData(<font color="#ff00ff">3.3</font>);
        doubledict.print();
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        doubledict.removeData(<font color="#ff00ff">2.2</font>);
        doubledict.print();
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        doubledict.removeData(<font color="#ff00ff">4.4</font>);
        doubledict.print();
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);

        doubledict.removeData(<font color="#ff00ff">1.1</font>);
        doubledict.print();
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
}
</pre>



</body>
</html>
