






<pre>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/intervaltimer.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/signalclasses.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/snooze.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdio.h&gt;</font>

<font color="#a020f0">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a020f0">#endif</font>

RETSIGTYPE      alarmhandler() {
        printf(<font color="#ff00ff">&quot;alarm!</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
}

<font color="#2e8b57"><b>void</b></font>    waitForTimer(intervaltimer *t) {

        itimerval       itv;
        t-&gt;getIntervals(&amp;itv);
        printf(<font color="#ff00ff">&quot;initial: </font><font color="#6a5acd">%d</font><font color="#ff00ff">sec </font><font color="#6a5acd">%d</font><font color="#ff00ff">usec   &quot;</font>,
                itv.it_value.tv_sec,itv.it_value.tv_usec);
        printf(<font color="#ff00ff">&quot;interval: </font><font color="#6a5acd">%d</font><font color="#ff00ff">sec </font><font color="#6a5acd">%d</font><font color="#ff00ff">usec</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                itv.it_interval.tv_sec,itv.it_interval.tv_usec);

        <font color="#a52a2a"><b>for</b></font> (;;) {
                timeval gtv;
                t-&gt;getTimeRemaining(&amp;gtv);
                printf(<font color="#ff00ff">&quot;time remaining: </font><font color="#6a5acd">%d</font><font color="#ff00ff">sec </font><font color="#6a5acd">%d</font><font color="#ff00ff">usec</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,gtv.tv_sec,gtv.tv_usec);
                <font color="#a52a2a"><b>if</b></font> (gtv.tv_sec==<font color="#ff00ff">0</font> &amp;&amp; gtv.tv_usec==<font color="#ff00ff">0</font>) {
                        <font color="#a52a2a"><b>break</b></font>;
                }
                snooze::macrosnooze(<font color="#ff00ff">1</font>);
        }
}

<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argc, <font color="#2e8b57"><b>char</b></font> **argv) {

        signalhandler   ah;
        ah.setHandler((<font color="#2e8b57"><b>void</b></font> *)alarmhandler);
        ah.handleSignal(<font color="#ff00ff">SIGALRM</font>);

        intervaltimer   t(ITIMER_REAL);

        t.setInitialInterval(<font color="#ff00ff">2</font>,<font color="#ff00ff">0</font>);
        t.start();
        waitForTimer(&amp;t);

        t.setInitialInterval(<font color="#ff00ff">2</font>,<font color="#ff00ff">500000</font>);
        t.start();
        waitForTimer(&amp;t);

        timeval tv;
        tv.tv_sec=<font color="#ff00ff">2</font>;
        tv.tv_usec=<font color="#ff00ff">500000</font>;
        t.setInitialInterval(&amp;tv);
        t.start();
        waitForTimer(&amp;t);

        itimerval       stv;
        stv.it_value.tv_sec=<font color="#ff00ff">2</font>;
        stv.it_value.tv_usec=<font color="#ff00ff">0</font>;
        stv.it_interval.tv_sec=<font color="#ff00ff">0</font>;
        stv.it_interval.tv_usec=<font color="#ff00ff">0</font>;
        t.setIntervals(&amp;stv);
        t.start();
        waitForTimer(&amp;t);
}
</pre>


