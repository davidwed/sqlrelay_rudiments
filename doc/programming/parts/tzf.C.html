






<pre>
<font color="#0000ff">// Copyright (c) 2003  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/timezonefile.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdio.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdlib.h&gt;</font>

<font color="#a020f0">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a020f0">#endif</font>

<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argc, <font color="#2e8b57"><b>char</b></font> **argv) {

        <font color="#0000ff">// parse the timezone file specified in the first argument</font>
        timezonefile    tz;
        <font color="#a52a2a"><b>if</b></font> (!tz.parseFile(argv[<font color="#ff00ff">1</font>])) {
                printf(<font color="#ff00ff">&quot;usage: tzn file</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
                exit(<font color="#ff00ff">1</font>);
        }

        <font color="#0000ff">// print using built-in method</font>
        tz.print();
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n\n</font><font color="#ff00ff">&quot;</font>);

        <font color="#0000ff">// print manually</font>
        printf(<font color="#ff00ff">&quot;ttisgmtcnt: </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,tz.getIsGMTCount());
        printf(<font color="#ff00ff">&quot;ttisstdcnt: </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,tz.getIsSTDCount());
        printf(<font color="#ff00ff">&quot;leapcnt: </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,tz.getLeapCount());
        printf(<font color="#ff00ff">&quot;timecnt: </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,tz.getTimeCount());
        printf(<font color="#ff00ff">&quot;typecnt: </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,tz.getTypeCount());
        printf(<font color="#ff00ff">&quot;charcnt: </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,tz.getCharacterCount());
        <font color="#2e8b57"><b>int</b></font>    i;
        <font color="#a52a2a"><b>for</b></font> (i=<font color="#ff00ff">0</font>; i&lt;tz.getTimeCount(); i++) {
                printf(<font color="#ff00ff">&quot;transitiontime[</font><font color="#6a5acd">%d</font><font color="#ff00ff">]: </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,i,tz.getTransitionTime(i));
        }
        <font color="#a52a2a"><b>for</b></font> (i=<font color="#ff00ff">0</font>; i&lt;tz.getTimeCount(); i++) {
                printf(<font color="#ff00ff">&quot;localtime[</font><font color="#6a5acd">%d</font><font color="#ff00ff">]: </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,i,tz.getLocalTimes(i));
        }
        <font color="#a52a2a"><b>for</b></font> (i=<font color="#ff00ff">0</font>; i&lt;tz.getTypeCount(); i++) {
                printf(<font color="#ff00ff">&quot;ttinfo[</font><font color="#6a5acd">%d</font><font color="#ff00ff">] {</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,i);
                printf(<font color="#ff00ff">&quot;      tt_gmtoff: </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                                        tz.getTimeTypeInfo(i)-&gt;tt_gmtoff);
                printf(<font color="#ff00ff">&quot;      tt_isdst: </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                                        tz.getTimeTypeInfo(i)-&gt;tt_isdst);
                printf(<font color="#ff00ff">&quot;      tt_abbrind: </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                                        tz.getTimeTypeInfo(i)-&gt;tt_abbrind);
                printf(<font color="#ff00ff">&quot;}</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        }
        printf(<font color="#ff00ff">&quot;rawtimezonestring: &quot;</font>);
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> i=<font color="#ff00ff">0</font>; i&lt;tz.getCharacterCount(); i++) {
                <font color="#a52a2a"><b>if</b></font> (tz.getRawTimeZoneString()[i]==(<font color="#2e8b57"><b>char</b></font>)<font color="#ff00ff">NULL</font>) {
                        printf(<font color="#ff00ff">&quot; &quot;</font>);
                }
                printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%c</font><font color="#ff00ff">&quot;</font>,tz.getRawTimeZoneString()[i]);
        }
        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        <font color="#a52a2a"><b>for</b></font> (i=<font color="#ff00ff">0</font>; i&lt;tz.getLeapCount(); i++) {
                printf(<font color="#ff00ff">&quot;leapsecondtime[</font><font color="#6a5acd">%d</font><font color="#ff00ff">]: </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,i,
                                        tz.getLeapSecondTime(i));
                printf(<font color="#ff00ff">&quot;totalleapseconds[</font><font color="#6a5acd">%d</font><font color="#ff00ff">]: </font><font color="#6a5acd">%ld</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,i,
                                        tz.getTotalLeapSeconds(i));
        }
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> counter=<font color="#ff00ff">0</font>; counter&lt;tz.getTypeCount(); counter++) {
                printf(<font color="#ff00ff">&quot;timezonestrings[</font><font color="#6a5acd">%d</font><font color="#ff00ff">]=</font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,counter,
                                        tz.getTimeZoneString(counter));
        }
        <font color="#a52a2a"><b>for</b></font> (i=<font color="#ff00ff">0</font>; i&lt;tz.getIsSTDCount(); i++) {
                printf(<font color="#ff00ff">&quot;transstdwall[</font><font color="#6a5acd">%d</font><font color="#ff00ff">]: </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,i,
                                        tz.getStandardOrWallIndicator(i));
        }
        <font color="#a52a2a"><b>for</b></font> (i=<font color="#ff00ff">0</font>; i&lt;tz.getIsGMTCount(); i++) {
                printf(<font color="#ff00ff">&quot;transutclocal[</font><font color="#6a5acd">%d</font><font color="#ff00ff">]: </font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,i,
                                        tz.getUTCOrLocalIndicator(i));
        }
}
</pre>


