






<pre>
<font color="#0000ff">// Copyright (c) 2004  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/directory.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/file.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/permissions.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdio.h&gt;</font>

<font color="#a020f0">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a020f0">#endif</font>

<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argc, <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> **argv) {

        directory::create(<font color="#ff00ff">&quot;testdir&quot;</font>,permissions::evalPermString(<font color="#ff00ff">&quot;rwxr-xr-x&quot;</font>));
        file    f;
        f.create(<font color="#ff00ff">&quot;testdir/testfile1&quot;</font>,permissions::evalPermString(<font color="#ff00ff">&quot;rw-r--r--&quot;</font>));
        f.close();
        f.create(<font color="#ff00ff">&quot;testdir/testfile2&quot;</font>,permissions::evalPermString(<font color="#ff00ff">&quot;rw-r--r--&quot;</font>));
        f.close();


        printf(<font color="#ff00ff">&quot;Contents of testdir:</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        directory       d;
        d.open(<font color="#ff00ff">&quot;testdir&quot;</font>);

        <font color="#2e8b57"><b>char</b></font>   *name;
        <font color="#a52a2a"><b>for</b></font> (off64_t index=<font color="#ff00ff">0</font>; (name=d.getChildName(index)); index++) {
                printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%lld</font><font color="#ff00ff">: </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,index,name);
                <font color="#a52a2a"><b>delete</b></font>[] name;
        }

        printf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">%d</font><font color="#ff00ff"> entries</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,d.getChildCount());

        <font color="#2e8b57"><b>char</b></font>   *cwd=directory::getCurrentWorkingDirectory();
        printf(<font color="#ff00ff">&quot;cwd=</font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,cwd);
        <font color="#a52a2a"><b>delete</b></font>[] cwd;

        directory::changeDirectory(<font color="#ff00ff">&quot;testdir&quot;</font>);

        cwd=directory::getCurrentWorkingDirectory();
        printf(<font color="#ff00ff">&quot;cwd=</font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,cwd);
        <font color="#a52a2a"><b>delete</b></font>[] cwd;

        directory::changeDirectory(<font color="#ff00ff">&quot;..&quot;</font>);

        cwd=directory::getCurrentWorkingDirectory();
        printf(<font color="#ff00ff">&quot;cwd=</font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,cwd);
        <font color="#a52a2a"><b>delete</b></font>[] cwd;

        file::remove(<font color="#ff00ff">&quot;testdir/testfile1&quot;</font>);
        file::remove(<font color="#ff00ff">&quot;testdir/testfile2&quot;</font>);
        directory::remove(<font color="#ff00ff">&quot;testdir&quot;</font>);

        printf(<font color="#ff00ff">&quot;maxFileNameLength(/usr/local)=</font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                        directory::maxFileNameLength(<font color="#ff00ff">&quot;/usr/local&quot;</font>));
        printf(<font color="#ff00ff">&quot;maxPathLength(/usr/local)=</font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                        directory::maxPathLength(<font color="#ff00ff">&quot;/usr/local&quot;</font>));
        printf(<font color="#ff00ff">&quot;canAccessLongFileNames(/usr/local)=</font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,
                        directory::canAccessLongFileNames(<font color="#ff00ff">&quot;/usr/local&quot;</font>));
}
</pre>


