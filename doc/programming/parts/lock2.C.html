






<pre>
<font color="#0000ff">// Copyright (c) 2003  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/file.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/snooze.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdio.h&gt;</font>

<font color="#a020f0">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a020f0">#endif</font>

<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argc, <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> **argv) {

        file    fl;
        fl.open(<font color="#ff00ff">&quot;testfile&quot;</font>,O_RDWR);

        printf(<font color="#ff00ff">&quot;locking...</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        printf(<font color="#ff00ff">&quot;locked=</font><font color="#6a5acd">%d</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,fl.lockFile(F_RDLCK|F_WRLCK));

        printf(<font color="#ff00ff">&quot;sleeping</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        snooze::macrosnooze(<font color="#ff00ff">100</font>);
}
</pre>


