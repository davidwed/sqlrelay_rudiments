






<pre>
<font color="#0000ff">// Copyright (c) 2002  David Muse</font>
<font color="#0000ff">// See the file COPYING for more information</font>

<font color="#a020f0">#include </font><font color="#ff00ff">&lt;rudiments/xmlsax.h&gt;</font>
<font color="#a020f0">#include </font><font color="#ff00ff">&lt;stdio.h&gt;</font>

<font color="#a020f0">#ifdef RUDIMENTS_NAMESPACE</font>
<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> rudiments;
<font color="#a020f0">#endif</font>

<font color="#2e8b57"><b>class</b></font> myxmlsax : <font color="#a52a2a"><b>public</b></font> xmlsax {
        <font color="#a52a2a"><b>public</b></font>:
                        myxmlsax();
        <font color="#a52a2a"><b>private</b></font>:
                <font color="#2e8b57"><b>bool</b></font>  xmlVersionStart();
                <font color="#2e8b57"><b>bool</b></font>  xmlVersionEnd();
                <font color="#2e8b57"><b>bool</b></font>  doctypeStart(<font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> *name);
                <font color="#2e8b57"><b>bool</b></font>  externalSubset(<font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> *filename);
                <font color="#2e8b57"><b>bool</b></font>  doctypeEnd();
                <font color="#2e8b57"><b>bool</b></font>  tagStart(<font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> *name);
                <font color="#2e8b57"><b>bool</b></font>  attributeName(<font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> *name);
                <font color="#2e8b57"><b>bool</b></font>  attributeValue(<font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> *value);
                <font color="#2e8b57"><b>bool</b></font>  text(<font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> *string);
                <font color="#2e8b57"><b>bool</b></font>  tagEnd(<font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> *name);
                <font color="#2e8b57"><b>bool</b></font>  comment(<font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> *string);
                <font color="#2e8b57"><b>bool</b></font>  cdata(<font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> *string);
                <font color="#2e8b57"><b>void</b></font>  indent(<font color="#2e8b57"><b>int</b></font> spaces);
                <font color="#2e8b57"><b>int</b></font>   ind;
};

myxmlsax::myxmlsax() : xmlsax() {
        ind=<font color="#ff00ff">0</font>;
}

<font color="#2e8b57"><b>bool</b></font>    myxmlsax::xmlVersionStart() {
        printf(<font color="#ff00ff">&quot;XML version start:</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        <font color="#a52a2a"><b>return</b></font> <font color="#ff00ff">true</font>;
}

<font color="#2e8b57"><b>bool</b></font>    myxmlsax::xmlVersionEnd() {
        printf(<font color="#ff00ff">&quot;XML version end:</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        <font color="#a52a2a"><b>return</b></font> <font color="#ff00ff">true</font>;
}

<font color="#2e8b57"><b>bool</b></font>    myxmlsax::doctypeStart(<font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> *name) {
        printf(<font color="#ff00ff">&quot;DOCTYPE start: </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,name);
        <font color="#a52a2a"><b>return</b></font> <font color="#ff00ff">true</font>;
}

<font color="#2e8b57"><b>bool</b></font>    myxmlsax::externalSubset(<font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> *filename) {
        printf(<font color="#ff00ff">&quot;       external subset: </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,filename);
        <font color="#a52a2a"><b>return</b></font> <font color="#ff00ff">true</font>;
}

<font color="#2e8b57"><b>bool</b></font>    myxmlsax::doctypeEnd() {
        printf(<font color="#ff00ff">&quot;DOCTYPE end:</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        <font color="#a52a2a"><b>return</b></font> <font color="#ff00ff">true</font>;
}

<font color="#2e8b57"><b>void</b></font>    myxmlsax::indent(<font color="#2e8b57"><b>int</b></font> spaces) {
        <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> i=<font color="#ff00ff">0</font>; i&lt;spaces; i++) {
                printf(<font color="#ff00ff">&quot;  &quot;</font>);
        }
}

<font color="#2e8b57"><b>bool</b></font>    myxmlsax::tagStart(<font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> *name) {
        indent(ind);
        printf(<font color="#ff00ff">&quot;tagStart: </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,name);
        ind++;
        <font color="#a52a2a"><b>return</b></font> <font color="#ff00ff">true</font>;
}

<font color="#2e8b57"><b>bool</b></font>    myxmlsax::attributeName(<font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> *name) {
        indent(ind+<font color="#ff00ff">1</font>);
        printf(<font color="#ff00ff">&quot;attribute name: </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,name);
        <font color="#a52a2a"><b>return</b></font> <font color="#ff00ff">true</font>;
}

<font color="#2e8b57"><b>bool</b></font>    myxmlsax::attributeValue(<font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> *value) {
        indent(ind+<font color="#ff00ff">1</font>);
        printf(<font color="#ff00ff">&quot;attribute value: </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,value);
        <font color="#a52a2a"><b>return</b></font> <font color="#ff00ff">true</font>;
}

<font color="#2e8b57"><b>bool</b></font>    myxmlsax::text(<font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> *string) {
        indent(ind+<font color="#ff00ff">1</font>);
        printf(<font color="#ff00ff">&quot;text: </font><font color="#6a5acd">\n</font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,string);
        <font color="#a52a2a"><b>return</b></font> <font color="#ff00ff">true</font>;
}

<font color="#2e8b57"><b>bool</b></font>    myxmlsax::tagEnd(<font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> *name) {
        ind--;
        indent(ind);
        printf(<font color="#ff00ff">&quot;tagEnd: </font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,name);
        <font color="#a52a2a"><b>return</b></font> <font color="#ff00ff">true</font>;
}

<font color="#2e8b57"><b>bool</b></font>    myxmlsax::comment(<font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> *string) {
        indent(ind);
        printf(<font color="#ff00ff">&quot;comment: </font><font color="#6a5acd">\n</font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,string);
        <font color="#a52a2a"><b>return</b></font> <font color="#ff00ff">true</font>;
}

<font color="#2e8b57"><b>bool</b></font>    myxmlsax::cdata(<font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> *string) {
        indent(ind);
        printf(<font color="#ff00ff">&quot;cdata: </font><font color="#6a5acd">\n</font><font color="#6a5acd">%s</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,string);
        <font color="#a52a2a"><b>return</b></font> <font color="#ff00ff">true</font>;
}


<font color="#2e8b57"><b>int</b></font> main(<font color="#2e8b57"><b>int</b></font> argc, <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> **argv) {

        myxmlsax        x;
        printf(<font color="#ff00ff">&quot;=====================================================</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        x.parseString(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n\</font>
<font color="#ff00ff">&lt;?xml version=</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">1.0</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff"> ?&gt;</font><font color="#6a5acd">\n\</font>
<font color="#ff00ff">&lt;!DOCTYPE test SYSTEM </font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">test.dtd</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff"> [ test [test [test [test]]]]&gt;</font><font color="#6a5acd">\n\</font>
<font color="#ff00ff">&lt;test&gt;start test text</font><font color="#6a5acd">\n\</font>
<font color="#ff00ff">        &lt;tag1 name11='&amp;amp;&amp;lt;&amp;gt;&amp;apos;&amp;quot;' name12='&amp;amp&amp;lt&amp;gt&amp;apos&amp;quot' name13='&amp;&amp;&amp;&amp;&amp;' / &gt; end tag1 text</font><font color="#6a5acd">\n\</font>
<font color="#ff00ff">        &lt;tag2 name21=</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">value21</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff"> name22=</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">value22</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">&gt; start tag2 text</font><font color="#6a5acd">\n\</font>
<font color="#ff00ff">                &lt;tag3 name31=</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">value31</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff"> name32=</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">value32</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">&gt; start tag3 text</font><font color="#6a5acd">\n\</font>
<font color="#ff00ff">                        &lt;tag4 name42=</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">value41</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff"> name42=</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">value42</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff"> /&gt; end tag4 end text</font><font color="#6a5acd">\n\</font>
<font color="#ff00ff">                &lt;/tag3&gt; end tag3 text</font><font color="#6a5acd">\n\</font>
<font color="#ff00ff">&lt;!-- test comment --&gt;</font><font color="#6a5acd">\n\</font>
<font color="#ff00ff">&lt;?target test=</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">test1</font><font color="#6a5acd">\&quot;</font><font color="#ff00ff">?&gt;</font><font color="#6a5acd">\n\</font>
<font color="#ff00ff">        &lt;/tag2&gt; end tag2 text</font><font color="#6a5acd">\n\</font>
<font color="#ff00ff">&amp;amp;&amp;lt;&amp;gt;&amp;apos;&amp;quot;</font><font color="#6a5acd">\n\</font>
<font color="#ff00ff">&amp;amp&amp;lt&amp;gt&amp;apos&amp;quot</font><font color="#6a5acd">\n\</font>
<font color="#ff00ff">&amp;&amp;&amp;&amp;&amp;</font><font color="#6a5acd">\n\</font>
<font color="#ff00ff">&lt;![CDATA[ test [ test [ test [test]]]]]&gt;</font><font color="#6a5acd">\n\</font>
<font color="#ff00ff">&lt;/test&gt;</font><font color="#6a5acd">\n\</font>
<font color="#ff00ff">&quot;</font>);
        printf(<font color="#ff00ff">&quot;=====================================================</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
        x.parseFile(<font color="#ff00ff">&quot;xmls.xml&quot;</font>);
}
</pre>


